---
title: 音乐服务器搭建
date: 2024-01-21 23:59:15
tags:
---

# 搭建原因

由于国内大厂吃相难看，各种广告，app的臃肿。再加上版权垄断听个破歌冲vip都听不全。于是忍无可忍搭建了自己的音乐服务器

# 推荐搭配观看

这个是我当时换系统重新搭了一遍的过程。换源什么的都有，可以查看

[转debian | frozenfish'blog (frozenfish0x.top)](https://frozenfish0x.top/2024/01/08/转debian/)

这是官方文档，英语不好可以用翻译软件查看

[Documentation | Navidrome](https://www.navidrome.org/docs/)

<!--more-->

# 搭建方案

## 我本人的方案

​	

```
自购设备当音乐服务器：
	成本：一个设备的钱。我使用的是n450 600快钱，每个月的电费大概会多七八块钱。
	服务器要一直开着。就像路由器一样，有一定运维成本
```

## 其他方案

```
买云服务器，如阿里云99快钱一年的服务器活动，只是自己用，随便一个云服务器就能带起来。
```



# 搭建前注意事项

```
如果自己搭建服务器连接在路由器下，首先要确保自己拥有公网ip，ipv6或者ipv4都可以，确保自己路由器防火墙有关闭功能：可以测试防火墙通行情况，吧windows关闭所有防火墙，然后安装一个服务器，如apech，还有php的一键话部署测试软件phpstudy（推荐）然后通过在浏览器通过公网地址进行访问测试。
2.建议让路由器拨号上网，把光猫改成桥接模式。（最好这么做！！！！！！不然ipv4会有公网ip分配在光猫身上情况。ipv6则可能吃不到ipv6地址分配）


如果是自己购买的云服务器则不用担心这些问题，进行控制台放行端口就可以访问。
```



# 安装

```
因为在容器里跑有易于维护，和可备份配置容易等优点。所以采用linux+docker+navidrome+fileBrowser方案

首先在物理机安装一个linux系统，推荐debian（安装了则不用看这步）
	debian：    
		然后 sudo apt install docker
			sudo docker pull navidrome
			sudo docker pull filebrowser/filebrowser
			然后创建她两所需要的目录
			我这里是在/home/fish/下创建
			sudo mkdir /home/fish
			cd /home/fish
			mkdir filebrowser
			mkdir music
			
			文件管理的安装：
			docker run -d -v /home/fish/filebrowser/sites/root:/srv -v 						/home/fish/filebrowser/filebrowserconfig.json:/etc/config.json -v 				/home/fish/filebrowser/database.db:/etc/database.db -p 8080:80
			 filebrowser/filebrowser
			 
			音乐服务的安装：
			docker run -d \
   			--name navidrome \
  			 --restart=unless-stopped \
  			--user $(id -u):$(id -g) \
   			-v /home/fish/music:/music:ro \
   			-v /home/fish/navidrome:/data \
   			-p 4533:4533 \
   			-e ND_LOGLEVEL=info \
   			deluan/navidrome:latest
	
	然后就安装成功了：
		可以通过你的内网ip+端口号进行访问服务
		4533是音乐服务器。8080是文件管理
		8080可以上传音乐
```



# 优化

## 	last.fm

​		推荐在设置里面有个last.fm点击勾选后，注册然后登录就可以使用，注意别用qq邮箱，用gmail可以过。不行就上魔法！

## 封面歌词获取

有个软件叫music Tag下载后把需要添加封面歌词等信息的音乐放进去就可以获取成功

教程：

[开源音乐服务器Navidrome最佳伴侣MusicTag，音乐刮削还属MusicTag猛_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1eo4y1u7Li/?spm_id_from=333.337.search-card.all.click&vd_source=918e3cd28b5502ea4080d2a670fc82a8)

## 客户端：

```
如果你不想天天网页播放。其实也有软件客户端可以使用，windows还有安卓都有，
安卓windows都可以使用<音流>软件作为客户端。简单易用
```

#### 	高级

​	navidrome根据mpv开发的接口，所以如果你觉得音流进阶功能还要vip就可以修改自己的客户端。或者定制自己的

[自动点唱机模式 |航海机场 (navidrome.org)](https://www.navidrome.org/docs/usage/jukebox/)

[mpv.io](https://mpv.io/)

# 结尾：

​	原大伙都能音乐自由！！！！！！！！！！！！！！！！！！！！！
