<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://example.com">
  <title>frozenfish</title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    
    <!-- <meta name="keywords" content="">
    <meta name="description" content=""> -->
  
  <meta property="og:type" content="website">
<meta property="og:title" content="frozenfish">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="frozenfish">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="frozenfish">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="frozenfish" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link rel="apple-touch-icon" href="/apple-touch-icon-180x180.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.a5fda8.css">
  <style type="text/css">
    
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

  
    
 	  <script src="/lib/clickLove.js"></script>
  
  


  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      


<div class="overlay" style="background: #4d4d4d;"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/img/head.webp" class="js-avatar">
		</a>
		<hgroup>
			<h1 class="header-author"><a href="/">frozenfish</a></h1>
		</hgroup>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/" target="_blank">主页</a></li>
			
				<li><a href="https://zhousiwei.gitee.io/ibooks/" target="_blank">技术笔记</a></li>
			
				<li><a href="/tags/%E9%9A%8F%E7%AC%94/" target="_blank">随笔</a></li>
			
			</ul>
		</nav>
		<nav class="header-smart-menu">
			
				
					<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
				
			
				
					<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
				
			
				
					<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
				
			
		</nav>
		<nav class="header-nav">


			<div class="social">
				
					
						<a class="github" href="#" 
												title="GitHub" target="_blank"><i class="icon-github"></i></a>
					
				
					
						<a class="github" href="#" 
												title="GitHub" target="_blank"><i class="icon-github"></i></a>
					
				
					
						<a class="gitee" href="#" 
												title="码云" target="_blank"><i class="icon-gitee"></i></a>
					
				
					
						<a class="jianshu" href="#" 
												title="简书" target="_blank"><i class="icon-jianshu"></i></a>
					
				
			</div>
		
			
			
			
			
			<div>
				<!--
					<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="240" height="86" src="//music.163.com/outchain/player?type=2&id=1334445174&auto=1&height=66"></iframe>
				-->
					<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="240" height=450 src="//music.163.com/outchain/player?type=0&id=8894537131&auto=1&height=430"></iframe>
			</div>
			
				
				<p style="font-size: 12px;">这似乎是首纯音乐，请尽情的欣赏它吧！<p>
			
		

		<!-- 网易云音乐插件 -->
		<!--
			
    			<div style="position:absolute; bottom:120px left:auto; width:85%">
        				
					<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=450 src="//music.163.com/outchain/player?type=0&id=8894537131&auto=1&height=430"></iframe>
					<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="240" height="52" src="//music.163.com/outchain/player?type=2&id=1334445174&auto=0&height=32"></iframe>
    			</div>
		
	     -->
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
      
      <a class="forkMe" style="position:absolute;z-index:999;top:0;right:0.5em;" 
        href="https://github.com/frozenfish0x/" target="_blank">
        <img src="/img/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
      
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<a href="/">
					<img src="/img/head.webp" class="js-avatar">
				</a>
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">frozenfish</h1>
			</hgroup>
			
			
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						
						<a class="github" target="_blank" 
							href="#" title="GitHub"><i class="icon-github"></i></a>
						
					
						
						<a class="github" target="_blank" 
							href="#" title="GitHub"><i class="icon-github"></i></a>
						
					
						
						<a class="gitee" target="_blank" 
							href="#" title="码云"><i class="icon-gitee"></i></a>
						
					
						
						<a class="jianshu" target="_blank" 
							href="#" title="简书"><i class="icon-jianshu"></i></a>
						
					
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 33.333333333333336%"><a href="/">主页</a></li>
		        
					<li style="width: 33.333333333333336%"><a target="_blank" rel="noopener" href="https://zhousiwei.gitee.io/ibooks/">技术笔记</a></li>
		        
					<li style="width: 33.333333333333336%"><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1"
              class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            

  
    <article id="网络工程师-网络工程师知识" class="article article-type-网络工程师  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/2023/12/02/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9F%A5%E8%AF%86/" target="_blank">网络工程师知识</a>
  
    </h1>
  


  
  
<a href="/2023/12/02/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9F%A5%E8%AF%86/" class="archive-article-date">
        <time datetime="2023-12-01T16:16:43.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-12-02</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <h1 id="悲哀的开始"><a href="#悲哀的开始" class="headerlink" title="悲哀的开始"></a>悲哀的开始</h1><pre><code>因为要混饭吃，没工作经验没技术（指技术不能去做一份程序相关，或者安全相关的工作，毕竟这仅仅是一个开始），于是决定找一份目前可以快速上手相关工作，所以开始学习网络工程师相关技术。此文章用来记录初级工程师知识，以及网络工程师一般要做的日常常见工作。
(我想做网安，二进制安全。求师傅带)
</code></pre>
<h2 id="申明"><a href="#申明" class="headerlink" title="申明"></a>申明</h2><pre><code>因为是自己用来学习的，大部分前辈都进行了很好的总结，我会将互联网各种资料整合起来,再加上自己的理解来写这篇文章，仅供个人学习用途
</code></pre>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="常见的网络设备"><a href="#常见的网络设备" class="headerlink" title="常见的网络设备"></a>常见的网络设备</h2><h3 id="1-网络交换机"><a href="#1-网络交换机" class="headerlink" title="1.网络交换机"></a>1.网络交换机</h3><pre><code>交换机使用内容可寻址存储器(Content Addressable Memory, CAM), 因此可以记住设备所插入的端口。思科公司生产的交换机被设计可用于从小型机构到有数千台设备的大型企业网络。

交换机的基本功能是利用设备的 MAC 地址（第二层）和 IP 地址（第三层）来运行，它们也能完成更为复杂的一些工作，比如包括基于 permit/deny（运行或访问）、协议及端口号（第四层），还有综合各层及其它方面的策略和规则的处理列表（porcessing lists）。

早期版本的交换机又被叫做网桥。网桥查看数据帧的源端口和 MAC 地址，以建立一个表并做出转发决定。在网桥上，有相应软件来访问这个表，在交换机上，则是由硬件（专用集成电路， Application Specific Integreated Chips, ASIC）去访问 CAM 表。因此交换机可以看成是一台多端口网桥。

采行交换机可以将你的网络划分成更小的、更可管理的部分（就是网段，segments）。进而允许单位内部的不同部门，比如人力资源、财务、法务等等，得以同时在各自的网段上工作，这是十分有用的，因为同一部门的设备大部分时间都是用于各自之间的通信。


通过交换机，你还可以更好地使用 IP 电话，因为交换机端口能够通过端口为其供电（使用 PoE 接口）。基本的网络交换机用于：

1.连接诸如打印机和 PC 这样的网络设备
2.赋予网络服务器和路由器网络访问
3.使用 VLAN 对网络进行划分
VLAN 就是虚拟局域网。
</code></pre>
<h3 id="2-网络路由器"><a href="#2-网络路由器" class="headerlink" title="2.网络路由器"></a>2.网络路由器</h3><pre><code>作为一名思科工程师，你将耗费大量时间来对路由器进行安装、配置以及故障排除。为此，CCNA 大纲超过半数的内容都是用于学习路由器配置的。

路由器是用于建立网络的设备。与负责同一网络上的设备相互通信的交换机不同，路由器实现不同网络上的设备之间的通信。老旧型号的路由器上只有端口，这些端口都是物理内建与其中，固定在主板上的。这样的路由器仍然时不时的可以见到，但现代网络需要路由器具备 IP 电话、交换及安全以及能够连接到不同类型电讯公司的功能。因此，路由器是模块化的了，这就是说你有路由器机架和一些空着的插槽，能够连接大量的路由或交换模块。
</code></pre>
<p><img src="https://ccna60d.xfoss.com/images/60days-13.png"><br><img src="https://ccna60d.xfoss.com/images/60days-4.png"><br>路由器，routers</p>
<p><img src="https://ccna60d.xfoss.com/images/60days-5.png"><br>交换机，routers</p>
<p><img src="https://ccna60d.xfoss.com/images/60days-6.png"><br>有防火墙的路由器</p>
<p><img src="https://ccna60d.xfoss.com/images/60days-7.png"><br>无线路由器</p>
<p><img src="https://ccna60d.xfoss.com/images/60days-8.png"><br>多层交换机</p>
<p><img src="https://ccna60d.xfoss.com/images/60days-12.png"><br>防火墙</p>
<h2 id="局域网和广域网拓扑"><a href="#局域网和广域网拓扑" class="headerlink" title="局域网和广域网拓扑"></a>局域网和广域网拓扑</h2><table>
<thead>
<tr>
<th>拓扑</th>
<th>物理</th>
<th>逻辑</th>
</tr>
</thead>
<tbody><tr>
<td>星形</td>
<td>星形</td>
<td>总线</td>
</tr>
<tr>
<td>令牌环</td>
<td>星形</td>
<td>环形</td>
</tr>
<tr>
<td>点对点</td>
<td>总线</td>
<td>总线</td>
</tr>
<tr>
<td>FDDI</td>
<td>环形</td>
<td>环形</td>
</tr>
</tbody></table>
<h2 id="OSI-和-TCP-模型"><a href="#OSI-和-TCP-模型" class="headerlink" title="OSI 和 TCP 模型"></a>OSI 和 TCP 模型</h2><pre><code>开放标准互连（Open Standards Interconnection, OSI）是有国际标准化组织创建的。伴随技术喷发，网络设备和网络软件行业兴起了几家巨头，包括思科、微软、Novell、IBM、惠普、苹果以及其它几家公司。每家都有自己的线缆和端口类型，允许各自的商业性协议。此时，如你从一家买路由器、另一家买交换机，又从别家买服务器，就会出现兼容性问题。

有一些处理这些问题的通容办法，比如在网络上部署网关来转换不同的协议，这会导致性能上的瓶颈（比如网络慢速部分）并会令到故障排除十分困难和费时。最终，厂商们不得不达成一个在各自产品上都能工作的通用标准，一套叫做 TCP/IP 的免费协议包。最后，那些未能采行 TCP/IP 的厂商失去市场份额，走向破产。

ISO 创建出 OSI 模型，以助力于各厂商就通用标准达成一致，实现厂商之间的兼容。此模型包括了将总多网络功能分解为一套逻辑分层，或通俗地称为层的东西。各层只需完成其特定的一些功能，比如说你的公司专注于防火墙，那么这些防火墙将自然地与其它厂商的设备一起工作。

此模型的优势在于每件设备设计用来出色完成一个角色，而非不充分地完成多个角色。客户可以根据其解决方案选出最好的设备，而不用死栓在一家厂商那里。同时故障排除也变得更为容易，因为确定的出错可被追踪到具体的某层。

OSI 模型将所有网络功能划分为七个不同的层。该层次化模型从第七层一路去往第一层。那些离用户更近、更为复杂的功能，在顶部，一直到处于底层的网络线缆规格，如同表
</code></pre>
<table>
<thead>
<tr>
<th>层</th>
<th>层名</th>
</tr>
</thead>
<tbody><tr>
<td>7</td>
<td>应用层，Application</td>
</tr>
<tr>
<td>6</td>
<td>表示层, Presentation</td>
</tr>
<tr>
<td>5</td>
<td>会话层, Session</td>
</tr>
<tr>
<td>4</td>
<td>传输层, Transport</td>
</tr>
<tr>
<td>3</td>
<td>网络层, Network</td>
</tr>
<tr>
<td>2</td>
<td>数据链路层, Data Link</td>
</tr>
<tr>
<td>1</td>
<td>物理层, Physical</td>
</tr>
</tbody></table>
<p>“<strong>A</strong>ll <strong>P</strong>eople <strong>S</strong>eem <strong>T</strong>o <strong>N</strong>eed <strong>D</strong>ata <strong>P</strong>rocessing”</p>
<p>在数据为通过物理网络介质传输而自顶层传至底层时，数据被放入不同的逻辑数据套盒子。尽管我们常把这些数据盒子称作“包（packets）”, 实际上根据其处于 OSI 不同的层而有不同的名称。从 OSI 模型往下的数据处理，叫做封装。而往上的处理中从盒子里取出数据的过程，叫做解封装。</p>
<h3 id="第七层-–-应用层"><a href="#第七层-–-应用层" class="headerlink" title="第七层 – 应用层"></a><strong>第七层 – 应用层</strong></h3><p>这是到你我这些终端用户最近的层。应用层并非操作系统，但它通常提供了诸如 e-mail(SMTP 以及 POP3)、web 浏览（使用 HTTP）、以及文件传输服务（使用 FTP）。应用层决定了资源的可用性。</p>
<h3 id="第六层–表示层"><a href="#第六层–表示层" class="headerlink" title="第六层–表示层"></a><strong>第六层–表示层</strong></h3><p>表示层将数据提供给应用层。多媒体技术工作在这一层，你可以想到 MP4、JPEG、GIF 等等。而加密、解密以及数据压缩都发生在这一层。</p>
<h3 id="第五层–会话层"><a href="#第五层–会话层" class="headerlink" title="第五层–会话层"></a><strong>第五层–会话层</strong></h3><p>会话层的角色是建立、管理及中断设备之间的会话。这些动作发生在逻辑链路上，而真正干的事情是将两个软件应用程序连接起来。SQL、RPC 以及 NFS 都工作于会话层。</p>
<h3 id="第四层–传输层"><a href="#第四层–传输层" class="headerlink" title="第四层–传输层"></a><strong>第四层–传输层</strong></h3><p>传输层的角色是将来自更高层的数据分拆成被称为数据段（segments）的更小片。虚电路（virtual circuits）在这里建立，在设备之间能够通信之间有赖于虚电路的建立。</p>
<p>在数据得以跨网络传输前，传输层需要确认多少数据能发往远端设备。这取决于端到端链路的速率和可靠性。如你有一条高速链路，而终端用户只有一条低速链路，数据仍然需要以较小数据块进行发送。</p>
<p>以下是三种控制数据流的方法：</p>
<ul>
<li>流控 flow control</li>
<li>窗口机制 windowing</li>
<li>通告机制 acknowledgements</li>
</ul>
<h4 id="流控"><a href="#流控" class="headerlink" title="流控"></a><strong>流控</strong></h4><p>如发往接收系统的信息多于它所能处理的量时，它将请求发送系统暂停一段时间。这一般发生在一段使用宽带而另一端使用拨号上网的时候。这个用于通知其它设备停止的包叫做源抑制消息（a source quench message）。</p>
<h4 id="窗口机制"><a href="#窗口机制" class="headerlink" title="窗口机制"></a><strong>窗口机制</strong></h4><p>窗口机制下，每个系统就能在收到应答（acknowledgement）前发送多少数据达成一致。”窗口”随着数据的传输时开时合，以维持一个持续的数据流。</p>
<h4 id="通告机制"><a href="#通告机制" class="headerlink" title="通告机制"></a><strong>通告机制</strong></h4><p>在收到一定数量的数据段后，接收端需要就这些数据段的安全抵达和顺序正确，通告发送端。</p>
<pre><code>这些都是在一个叫做三次握手（a three-way handshake）的过程中达成一致。你要发出一个包来建立会话。第一个包叫做同步(synchronise, SYN)包。远端设备以同步应答（a synchronise acknowledgement, SYN-ACK）包予以回应。第三步的应答包（acknowledgement, ACK）的发出标志着会话的建立。这都是通过 TCP 业务完成的。

传输层包含了好几个协议，其中最熟知的是传输控制协议（Tranmission Control Protocol, TCP）和用户数据报协议（User Datagram Protocol, UDP）, 它们都是 TCP/IP 协议包的组成部分。这个协议包因为是互联网所使用的标准而相当出名。TCP 是面向连接的协议。它使用了三次握手、窗口机制以及其它技巧来保证数据安全地到达其目的地。有许多协议都使用了 TCP， 比如 Telnet、HTTPS 以及 FTP（尽管 FTP 位于应用层，它确实使用了 TCP）。

UDP 是一个无连接协议（a connectionless protocol）。它在对数据包进行编号后就发往目的地了。它绝不会管这些数据包是否安全抵达，也绝不会在发送数据包前建立一条连接。在数据不是那么重要，应用开发者觉得信息总是可以在未能到达目的地时重新发送时，往往采用 UDP。

那么为什么要用到 UDP 呢？ TCP 协议本身会消耗许多网络的带宽，甚至在数据还没发送时，为建立其连接，也要往复发送很多流量。这都会耗去一些宝贵的时间和网络资源。UDP 数据包比起 TCP 包要小很多，在无需真正可靠连接时，它是是否有用的。使用到 UDP 的协议有 TFTP 等。
</code></pre>
<h3 id="第三层-–-网络层"><a href="#第三层-–-网络层" class="headerlink" title="第三层 – 网络层"></a><strong>第三层 – 网络层</strong></h3><pre><code>网络层接手来自传输层的数据段，将其拆分为叫做数据包的更小单位。许多网络工程师不管在 OSI 的哪层，都把数据叫做包，这也是可以的。但是，请记住，技术上说只有在网络层，才可以叫包。

网络层必须确定从一个网络到另一网络的最优路径；为此，路由器工作在该层。路由器在此采用逻辑寻址，而 TCP/IP 的寻址方式是 IP 寻址，稍后会讲到。
</code></pre>
<h3 id="第二层–数据链路层"><a href="#第二层–数据链路层" class="headerlink" title="第二层–数据链路层"></a><strong>第二层–数据链路层</strong></h3><pre><code>数据链路层将数据包拆分成帧这种更小的单位。二层交换机工作在这层，使用硬件地址，或是 MAC 地址，它们之所以能够更快地交换流量，是因为无需查看 IP 地址和路由表。广域网协议工作在第二层，包括 HDLC、ISDN 以及 PPP。以太网也是第二层的。

为了向其上下两层提供接口，数据链路层又分了两个子层，分别是逻辑链路控制子层（the Logical Link Control, LLC）, 以及介质访问控制子层（ the Media Access Control, MAC）。逻辑链路控制子层与网络层交互，介质访问控制子层与物理层交互。
</code></pre>
<h3 id="第一层–物理层"><a href="#第一层–物理层" class="headerlink" title="第一层–物理层"></a><strong>第一层–物理层</strong></h3><pre><code>在这层上，帧被转换为位，以将其放到线路上。这些位是由电脉冲构成，读作“开”“关”位，或是二进制的 1 和 0。集线器工作于此层，在这里你会找到线缆规格，比如 RJ45。
</code></pre>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2023/12/02/%E7%BD%91%E7%BB%9C%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9F%A5%E8%AF%86/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="问题与解决-访问百度自动跳转github" class="article article-type-问题与解决  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/2023/12/01/%E8%AE%BF%E9%97%AE%E7%99%BE%E5%BA%A6%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%ACgithub/" target="_blank">访问百度自动跳转github</a>
  
    </h1>
  


  
  
<a href="/2023/12/01/%E8%AE%BF%E9%97%AE%E7%99%BE%E5%BA%A6%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%ACgithub/" class="archive-article-date">
        <time datetime="2023-12-01T08:31:37.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-12-01</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p>使用steam++加速github后浏览百度居然自动跳转GitHub、</p>
<p>这一下子就想到了dns解析。localhost文件的修改，我清楚了解析记录，然后清楚浏览器cook缓存直接解决问题<br>这貌似跟里面的gm脚本有关系</p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2023/12/01/%E8%AE%BF%E9%97%AE%E7%99%BE%E5%BA%A6%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%ACgithub/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="问题与解决-解决Sourcetree推github不停弹登录窗Logon-failed-use-ctrl-c-to-cancel-basi" class="article article-type-问题与解决  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/2023/11/27/%E8%A7%A3%E5%86%B3Sourcetree%E6%8E%A8github%E4%B8%8D%E5%81%9C%E5%BC%B9%E7%99%BB%E5%BD%95%E7%AA%97Logon-failed-use-ctrl-c-to-cancel-basi/" target="_blank">解决Sourcetree推github不停弹登录窗Logon failed, use ctrl+c to cancel basi</a>
  
    </h1>
  


  
  
<a href="/2023/11/27/%E8%A7%A3%E5%86%B3Sourcetree%E6%8E%A8github%E4%B8%8D%E5%81%9C%E5%BC%B9%E7%99%BB%E5%BD%95%E7%AA%97Logon-failed-use-ctrl-c-to-cancel-basi/" class="archive-article-date">
        <time datetime="2023-11-26T23:49:11.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2023-11-27</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p>最近有一段时间没用 GitHub，新建了一个仓库，打开 Sourcetree → + → Clone → 填入git地址，顺利拉取了仓库分支。分支一个 → 提交 → 推送，忽然弹出了GitHub登录窗口，记得以前曾经弹过一次，忘记什么情况了，那就填写用户名、密码，login吧：</p>
<p>红色闪眼啊，报错啊！~<br>git -c diff.mnemonicprefix&#x3D;false -c core.quotepath&#x3D;false –no-optional-locks push -v –tags origin main:main<br>Logon failed, use ctrl+c to cancel basic credential prompt.</p>
<p>“Logon failed…” 大概是手快，密码输错了吧，再来一遍，什么？还是失败，估计是密码自己也记错了。赶紧上官网登录试一下，实在不行重置。。。咦？还是刚才的用户名、密码，官网顺利登录，没问题啊。回来 Sourcetree 再试一遍，错误照常。看来八成 Sourcetree 出毛病了。baidu 吧，哦，有人说到什么 Git 软件更新了，什么登录机制变了，不能再用登录框的方式登录了，更新后就不会出现登陆框了，会自动连接到 GitHub 官网验证。。。云云。嗯，和我的情况符合，赶紧点击文章中给的官方 Git 链接，下载了最新版本的 Git，安装。保险起见重启电脑，打开 Sourcetree，提交，哇，居然还是有弹窗啊，稳定情绪，说不定这次登录就可以了，输入用户名、密码 → login，报错依旧。看来这方法不行。继续baidu，又试了在仓库设置中修改 git 地址为 <a href="mailto:&#x75;&#x73;&#x65;&#x72;&#78;&#97;&#x6d;&#x65;&#64;&#x67;&#105;&#116;&#x68;&#117;&#98;&#x2e;&#x63;&#x6f;&#x6d;">&#x75;&#x73;&#x65;&#x72;&#78;&#97;&#x6d;&#x65;&#64;&#x67;&#105;&#116;&#x68;&#117;&#98;&#x2e;&#x63;&#x6f;&#x6d;</a>&#x2F;xxx&#x2F;xx.git 的格式，还是不行。是最后这个提示帮助了我，有网友说需要“使用OAuth进行身份验证”，翻了翻 Sourcetree 菜单，最后终于在 工具 → 选项 中找到答案。选项 → 验证 选项卡。看到现在的 gitHub 登录验证为 Basic ， 直接编辑用户，输入密码，好像无反应。新建一个吧，右上角“添加”，服务商: GitHub, 验证一定选择 OAuth，这时，下面的用户名会是禁用状态：</p>
<p>直接点击下面的按钮“刷新 OAuth 令牌”，奇迹出现了，自动跳转到浏览器打开了 GitHub 登录界面：</p>
<p>赶紧登录吧，登录后：</p>
<p>看到授权成功！再次返回 Sourcetree 界面，看到登录窗上已经显示绿色√ ，认证成功！</p>
<p>确定，这时可以看到验证窗口中多了一个账户，下面 “Git 已存密码”中也添加了一个Git用户，但是两个的验证方式是不同的，这点不太明白具体意思，有时间查一下。好了，接下来，赶紧推啊。祝你也 顺 利 推 送！</p>
<p>方案二也可以在GitHub个人用户里生成一个新的note和tokens，第一次输入自己的GitHub账号和密码，然后在第二次输入usernuserame和password的时候输入对应的note和tokens就好了。具体操作步骤可以参考博客<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46622106/article/details/111914231">https://blog.csdn.net/weixin_46622106/article/details/111914231</a></p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2023/11/27/%E8%A7%A3%E5%86%B3Sourcetree%E6%8E%A8github%E4%B8%8D%E5%81%9C%E5%BC%B9%E7%99%BB%E5%BD%95%E7%AA%97Logon-failed-use-ctrl-c-to-cancel-basi/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="逆向-深入理解dll注入" class="article article-type-逆向  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/2022/12/01/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3dll%E6%B3%A8%E5%85%A5/" target="_blank">深入理解dll注入</a>
  
    </h1>
  


  
  
<a href="/2022/12/01/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3dll%E6%B3%A8%E5%85%A5/" class="archive-article-date">
        <time datetime="2022-11-30T20:17:37.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-12-01</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p>DLL注入是指向运行中的其它进程强制插入特定的DLL文件。从技术细节来说，DLL注入命令其它进程自行调用LoadLibrary()API，加载用户指定的DLL文件。DLL注入与一般DLL加载的区别在于，加载的目标进程是其自身或其他进程。</p>
<p>从上图可以看到，test.dll已被强制插入进程(本来notepad并不会加载test.dll)。加载到某一进程中的test.dll与已经加载到某一进程中的dll一样，拥有访问notepad.exe进程内存的权限。</p>
<p>DLL被加载到进程后会自动运行DLLMain()函数，用户可以把想执行的代码放到DLLMain()函数，<br>每当加载DLL时，添加的代码就会得到执行。利用这种特性可以修复程序Bug以及添加新功能<br>DllMain 函数是DLL模块的默认 入口点。当Windows加载DLL模块时调用这一函数。<br>系统首先调用全局对象的 构造函数，然后调用 全局函数DLLMain。<br>DLLMain 函数不仅在将DLL链接加载到进程时被调用，在DLL模块与进程分离时（以及其它时候）也被调用。</p>
<p>BOOL APIENTRY DllMain( HANDLE hModule, DWORD ul_reason_for_call, LPVOID lpReserved)<br>{<br>　switch (ul_reason_for_call)<br>　{<br>　　case DLL_PROCESS_ATTACH:<br>      &#x2F;&#x2F;添加想要执行的代码<br>      &#x2F;&#x2F;当dll被进程加载时DLLMain被调用<br>　　　&#x2F;&#x2F;printf(“ process attach of dll”);<br>　　　break;<br>　　case DLL_THREAD_ATTACH:<br>      &#x2F;&#x2F;添加想要执行的代码<br>      &#x2F;&#x2F;当有线程被创建时，DLLMain被调用<br>　　　printf(“ thread attach of dll”);<br>　　　break;<br>　　case DLL_THREAD_DETACH:<br>      &#x2F;&#x2F;添加想要执行的代码<br>      &#x2F;&#x2F;当有线程结束时，DLLMain被调用<br>　　　printf(“ thread detach of dll”);<br>　　　break;<br>　　case DLL_PROCESS_DETACH:<br>      &#x2F;&#x2F;添加想要执行的代码<br>      &#x2F;&#x2F;当dll被进程卸载时，DLLMain被调用<br>　　　printf(“ process detach of dll”);<br>　　　break;<br>　}<br>　return TRUE;<br>}</p>
<p>一、DLL注入示例</p>
<p>使用LoadLibrary()API加载某个DLL时，该DLL中的DLLMain()函数会被调用执行。DLL注入的工作原理就是从外部促使目标进程调用LoadLibrary()API,所以会强制调用执行DLL的DLLMain函数。并且被注入的DLL拥有目标进程内存的访问权限，用户可以随意操作。</p>
<p>二、实现DLL注入的方法</p>
<p>1、创建远程线程(CreatRemoteThread)</p>
<p>2、使用注册表(AppInit_DLLs值)</p>
<p>3、消息钩取（SetWindowsHookEx()API）</p>
<p>三、创建远程线程(CreatRemoteThread)</p>
<p>3.1、效果示例</p>
<p>运行process explorer（或者火绒剑，任务管理器）获取notepad.exe进程的pid。</p>
<p>可以看见process explorer.exe的pid为2788。</p>
<p>运行InjectDll.exe将myhack.dll注入到notepad.exe进程当中。可以看到dll文件已经被注入到里面。</p>
<p>要想在process explorer中看见注入的dll文件，需要依次选择view-&gt;Lower Pane view-&gt;DLLS选项。</p>
<p>进行注入时需要注意：</p>
<p>1.LoadLibraryA 和 LoadLibraryW 不同字符表示<br>之前一直没有成功，没有使用L,但是使用了LoadLibraryW，导致加载dll失败，<br>如果不使用L，请用LoadLibraryA</p>
<p>2.注册的时候注意DLL完整路径，除非被注入程序和dll在同一个文件夹<br>InjectDll.exe 3480 D:\test\myhack.dll</p>
<p>同时可以看见文件内已经多了一个html文件，此文件是dll中所指定的文件。</p>
<p>3.2、分析示例源码</p>
<p>在DLLMmain()函数中可以看到，这个dll被加载(DLL_PROCESS_ATTACH)时,先输出一个字符串（”&lt;myhack.dll&gt; Injection!!!”），然后再创建线程调用函数（ThreadProc）。在ThreadProc函数中通过调用URLDownloadToFile来下载指定网站的index.html文件。前面提到过，向进程注入dll后会调用dll的DLLMain函数。所以当dll文件注入到exe进程后，会调用URLDownloadToFile下载文件。</p>
<p>&#x2F;&#x2F;myhack.cpp<br>#include “windows.h”<br>#include “tchar.h”</p>
<p>#pragma comment(lib, “urlmon.lib”)</p>
<p>#define DEF_URL       (L”<a target="_blank" rel="noopener" href="http://www.naver.com/index.html">http://www.naver.com/index.html</a>“)<br>#define DEF_FILE_NAME   (L”index.html”)</p>
<p>HMODULE g_hMod &#x3D; NULL;</p>
<p>DWORD WINAPI ThreadProc(LPVOID lParam)<br>{<br>    TCHAR szPath[_MAX_PATH] &#x3D; {0,};</p>
<pre><code>if( !GetModuleFileName( g_hMod, szPath, MAX_PATH ) )
    return FALSE;
 
TCHAR *p = _tcsrchr( szPath, &#39;\\&#39; );
if( !p )
    return FALSE;
//下载指定网站的index.html文件
_tcscpy_s(p+1, _MAX_PATH, DEF_FILE_NAME);

URLDownloadToFile(NULL, DEF_URL, szPath, 0, NULL); 

return 0;
</code></pre>
<p>}</p>
<p>BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)<br>{<br>    HANDLE hThread &#x3D; NULL;</p>
<pre><code>g_hMod = (HMODULE)hinstDLL;

switch( fdwReason )
&#123;
case DLL_PROCESS_ATTACH :  //加载时
    OutputDebugString(L&quot;&lt;myhack.dll&gt; Injection!!!&quot;); //输出调试字符串
    hThread = CreateThread(NULL, 0, ThreadProc, NULL, 0, NULL); //创建线程
    CloseHandle(hThread);
    break;
&#125;

return TRUE;
</code></pre>
<p>}</p>
<p>main函数的主要功能时检查输入程序的参数，然后调用InjectDLL函数。InjectDLL函数是用来进行dll注入的核心，其作用是使目标进程自行调用LoadLibrary这个api。</p>
<p>&#x2F;&#x2F;InjectDLL.cpp<br>#include “windows.h”<br>#include “tchar.h”</p>
<p>BOOL SetPrivilege(LPCTSTR lpszPrivilege, BOOL bEnablePrivilege)<br>{<br>    TOKEN_PRIVILEGES tp;<br>    HANDLE hToken;<br>    LUID luid;</p>
<pre><code>if( !OpenProcessToken(GetCurrentProcess(),
                      TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, 
                      &amp;hToken) )
&#123;
    _tprintf(L&quot;OpenProcessToken error: %u\n&quot;, GetLastError());
    return FALSE;
&#125;

if( !LookupPrivilegeValue(NULL,           // lookup privilege on local system
                          lpszPrivilege,  // privilege to lookup 
                          &amp;luid) )        // receives LUID of privilege
&#123;
    _tprintf(L&quot;LookupPrivilegeValue error: %u\n&quot;, GetLastError() ); 
    return FALSE; 
&#125;

tp.PrivilegeCount = 1;
tp.Privileges[0].Luid = luid;
if( bEnablePrivilege )
    tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
else
    tp.Privileges[0].Attributes = 0;

// Enable the privilege or disable all privileges.
if( !AdjustTokenPrivileges(hToken, 
                           FALSE, 
                           &amp;tp, 
                           sizeof(TOKEN_PRIVILEGES), 
                           (PTOKEN_PRIVILEGES) NULL, 
                           (PDWORD) NULL) )
&#123; 
    _tprintf(L&quot;AdjustTokenPrivileges error: %u\n&quot;, GetLastError() ); 
    return FALSE; 
&#125; 

if( GetLastError() == ERROR_NOT_ALL_ASSIGNED )
&#123;
    _tprintf(L&quot;The token does not have the specified privilege. \n&quot;);
    return FALSE;
&#125; 

return TRUE;
</code></pre>
<p>}</p>
<p>BOOL InjectDll(DWORD dwPID, LPCTSTR szDllPath)<br>{<br>    HANDLE hProcess &#x3D; NULL, hThread &#x3D; NULL;<br>    HMODULE hMod &#x3D; NULL;<br>    LPVOID pRemoteBuf &#x3D; NULL;<br>    DWORD dwBufSize &#x3D; (DWORD)(_tcslen(szDllPath) + 1) * sizeof(TCHAR);<br>    LPTHREAD_START_ROUTINE pThreadProc;</p>
<pre><code>// #1. 使用 dwPID 获取目标进程(notepad.exe)句柄（PROCESS_ALL_ACCESS权限），然后就可以用 hProcess 控制进程.
if ( !(hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwPID)) )
&#123;
    _tprintf(L&quot;OpenProcess(%d) failed!!! [%d]\n&quot;, dwPID, GetLastError());
    return FALSE;
&#125;

// #2. 在目标进程(notepad.exe) 内存中分配 szDllName 大小的内存，返回 pRemoteBuf 作为该缓冲区的地址.
pRemoteBuf = VirtualAllocEx(hProcess, NULL, dwBufSize, MEM_COMMIT, PAGE_READWRITE);

// #3. 将 myhack.dll 路径写入刚刚分配的缓冲区.
WriteProcessMemory(hProcess, pRemoteBuf, (LPVOID)szDllPath, dwBufSize, NULL);

// #4. 获取 LoadLibraryW() API 地址，kernel32.dll在每个进程中的加载地址相同（这个特性就是我们要利用的）.
hMod = GetModuleHandle(L&quot;kernel32.dll&quot;);
pThreadProc = (LPTHREAD_START_ROUTINE)GetProcAddress(hMod, &quot;LoadLibraryW&quot;);
 
// #5. 在 notepad.exe 中运行线程
hThread = CreateRemoteThread(hProcess, NULL, 0, pThreadProc, pRemoteBuf, 0, NULL); //CreateRemoteThread()驱使进程调用LoadLibrary()，进而加载指定的DLL文件
WaitForSingleObject(hThread, INFINITE);   

CloseHandle(hThread);
CloseHandle(hProcess);

return TRUE;
</code></pre>
<p>}</p>
<p>int _tmain(int argc, TCHAR *argv[])<br>{<br>    if( argc !&#x3D; 3)<br>    {<br>        _tprintf(L”USAGE : %s <pid> <dll_path>\n”, argv[0]);<br>        return 1;<br>    }</p>
<pre><code>// change privilege
if( !SetPrivilege(SE_DEBUG_NAME, TRUE) )
    return 1;

// inject dll
if( InjectDll((DWORD)_tstol(argv[1]), argv[2]) )
    _tprintf(L&quot;InjectDll(\&quot;%s\&quot;) success!!!\n&quot;, argv[2]);
else
    _tprintf(L&quot;InjectDll(\&quot;%s\&quot;) failed!!!\n&quot;, argv[2]);

return 0;
</code></pre>
<p>}</p>
<p>下面来详细分析一下injectDll函数。</p>
<p>调用 OpenProcess这个API，借助程序运行时以参数形势传递过来的dwPID值，获取exe进程的句柄（PROCESS_ALL_ACCESS）。得到PROCESS_ALL_ACCESS之后，就可以用获取的句柄控制对应进程。</p>
<p>&#x2F;&#x2F;获取目标的进程句柄<br>hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwPID)</p>
<p>需要把即将加载的dll文件的路径通知目标进程。因为任何内存空间都无法进行写入操作，所以先使用VirtualAllocEx() API在目标进程的内存空间中分配一块缓冲区，且指定的缓冲区大小为dll文件路径字符串的长度。</p>
<p>pRemoteBuf &#x3D; VirtualAllocEx(hProcess, NULL, dwBufSize, MEM_COMMIT, PAGE_READWRITE);</p>
<p>提示：<br>VirtualAllocEx()函数的返回值为分配所得缓冲区的地址。<br>该地址不是程序自身进程(Inject.exe)的内存地址，<br>而是hProcess句柄所指目标进程（notepad.exe）的内存地址。</p>
<p>使用WriteProcessMemory将DLL路径字符串（xxx\xxx\xxx.dll）写入到分配所得缓冲区地址。WriteProcessMemory所写的内存空间也是hProcess句柄所指的目标进程的内存空间。</p>
<p> WriteProcessMemory(hProcess, pRemoteBuf, (LPVOID)szDllPath, dwBufSize, NULL);</p>
<p> &#x2F;&#x2F;调用API<br> &#x2F;&#x2F;Windows操作系统提供了调试API，借助其可以访问其它进程的内存空间。<br> &#x2F;&#x2F;例如：VirtualAllocEx()、 WriteProcessMemory等<br>调用LoadLibrary前需要先获取其地址。LoadLibraryW()是LoadLibrary()的Unicode字符串版本。</p>
<p>我们的目标明明是获取加载到 notepad.exe 进程的kernel32.dll的 LoadLibraryW的起始地址，但代码却用来获取加载到 InjectDll.exe进程的kernel32.dll的 LoadLibraryW的起始地址。如果加载到 notepad.exe 进程中的kernel32.dl的地址与加载到 InjectDll.exe 进程中的kernel32.dll的地址相同，那么上面的代码就不会有什么问题。但是如果kernell32.d在每个进程中加载的地址都不同，那么上面的代码就错了，执行时会发生引用错误。</p>
<p>根据 Os 类型、语言、版本不同，kerne32.dll加载的地址也不网。并且 Vista &#x2F;7中应用了新的 ASLR 功能，每次启动时。系统 DLL 加载的地址都会改0。但是在系统运行期间它都会被映射（ Mapping ）到号进程的相同地址。</p>
<p>Windows 作系统中， DLL 首次进入内存称为“加载”( Loading )，以后其他进程需要使用相网 DLL 时不必再次加载，只要将加载过的 DLL 代码与资源映射一下即可，这种映射技术有利于提高肉存的使用效率。</p>
<p>像上面这样， OS 核心 DUL 会被加载到自身固有的地址， DLL 注人利用的就是 Windows Os 这一特性（该特性也可能会被恶意使用，成为 Windows 安全漏洞）。导人InjectDll.exe进程中LoadlibraryW地址与导人notepad.exe进程中的LoadLibraryWO地址是相同的。</p>
<p>&#x2F;&#x2F;在windows中，kernel32.dll在每个进程中的加载地址是相同的。<br>hMod &#x3D; GetModuleHandle(L”kernel32.dll”);<br>pThreadProc &#x3D; (LPTHREAD_START_ROUTINE)GetProcAddress(hMod, “LoadLibraryW”);</p>
<p>在目标进程中运行远程线程，pThreadProc是exe进程内存中LoadlibraryW的地址，pRemoteBuf是exe进程内存中dll字符串的地址。</p>
<p>hThread &#x3D; CreateRemoteThread(hProcess, NULL, 0, pThreadProc, pRemoteBuf, 0, NULL);</p>
<p>CreateRemoteThread用来在目标进程中执行其创建的线程，其函数原型如下：</p>
<p>除第一个参数 hProcess 外，其他参数与 CreateThread (）函数完全一样。 hProcess 参数是要执行线程的目标进程（或称“远程进程”、“宿主进程”）的句柄。 IpStartAddress 与 IpParameter 参数分别给出线程函数地址与线程参数地址。需要注意的是，这2个地址都应该在目标进程虚拟内存空间中（这样目标进程才能认识它们）。</p>
<p>HANDLE CreateRemoteThread(<br>  &#x2F;&#x2F; 进程句柄<br>  hProcess,<br>  &#x2F;&#x2F;  线程安全描述字，指向SECURITY_ATTRIBUTES结构的指针<br>  LPSECURITY_ATTRIBUTES lpThreadAttributes,<br>  SIZE_T dwStackSize,                       &#x2F;&#x2F;  线程栈大小，以字节表示<br>  LPTHREAD_START_ROUTINE lpStartAddress,    &#x2F;&#x2F; 指向在远程进程中执行的函数地址<br>  LPVOID lpParameter,                       &#x2F;&#x2F; 传入参数<br>  DWORD dwCreationFlags,                    &#x2F;&#x2F; 创建线程的其它标志<br>  LPDWORD lpThreadId                        &#x2F;&#x2F; 线程身份标志，如果为NULL,则不返回<br>);</p>
<p>HANDLE CreateThread(<br>  LPSECURITY_ATTRIBUTES   lpThreadAttributes,<br>  SIZE_T                  dwStackSize,<br>  LPTHREAD_START_ROUTINE  lpStartAddress,<br>  __drv_aliasesMem LPVOID lpParameter,<br>  DWORD                   dwCreationFlags,<br>  LPDWORD                 lpThreadId<br>);</p>
<p>查看ThreadProc与LoadLibrary。两函数都有一个4字节的参数，并返回一个4字节的值。也就是说，二者形态结构完全一样灵感即源于此。调用 CreateRemoteThread 时，只要将 LoadLibrary函数的地址传递给第四个参数 IpStartAddress ，把要注人的 DLL 的路径字符串地址传递给第五个参数 IpParameter 即可（必须是目标进程的虚拟内存空间中的地址）。由于前面已经做好了一切准备，现在调用该函数使目标进程加载指定的 DLL 文件就行了。</p>
<p>CreateRemoteThread （函数最主要的功能就是驱使目标进程调用LoadLibrary函数，进而加载指定的 DLL 文件。</p>
<p>&#x2F;&#x2F;调用 CreateRemoteThread 创建远程线程所需要的过程函数的标准形式为<br>DWORD WINAPI ThreadProc(<br>  <em>In</em> LPVOID lpParameter<br>);</p>
<p>&#x2F;&#x2F;Win32编程加载DLL的API为：<br>HMODULE WINAPI LoadLibrary(<br>  <em>In</em> LPCTSTR lpFileName<br>);</p>
<p>四、DLL卸载</p>
<p>DLL卸载（DLL Ejection）：将强制插入进程的DLL弹出的技术。</p>
<p>原理：驱使目标进程调用FreeLibrary() API。</p>
<p>提示：<br>FreeLibrary卸载dll的方法只适用于CreateRemoteThread注入</p>
<p>先注入dll到目标进程</p>
<p>注入成功后，卸载dll</p>
<p>分析一下EjectDll.exe</p>
<p>#include “windows.h”<br>#include “tlhelp32.h”<br>#include “tchar.h”</p>
<p>#define DEF_PROC_NAME  (L”notepad.exe”)<br>#define DEF_DLL_NAME   (L”myhack.dll”)</p>
<p>DWORD FindProcessID(LPCTSTR szProcessName)<br>{<br>    DWORD dwPID &#x3D; 0xFFFFFFFF;<br>    HANDLE hSnapShot &#x3D; INVALID_HANDLE_VALUE;<br>    PROCESSENTRY32 pe;</p>
<pre><code>// Get the snapshot of the system
pe.dwSize = sizeof( PROCESSENTRY32 );
hSnapShot = CreateToolhelp32Snapshot( TH32CS_SNAPALL, NULL );

// find process
Process32First(hSnapShot, &amp;pe);
do
&#123;
    if(!_tcsicmp(szProcessName, (LPCTSTR)pe.szExeFile))
    &#123;
        dwPID = pe.th32ProcessID;
        break;
    &#125;
&#125;
while(Process32Next(hSnapShot, &amp;pe));

CloseHandle(hSnapShot);

return dwPID;
</code></pre>
<p>}</p>
<p>BOOL SetPrivilege(LPCTSTR lpszPrivilege, BOOL bEnablePrivilege)<br>{<br>    TOKEN_PRIVILEGES tp;<br>    HANDLE hToken;<br>    LUID luid;</p>
<pre><code>if( !OpenProcessToken(GetCurrentProcess(),
                      TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, 
                      &amp;hToken) )
&#123;
    _tprintf(L&quot;OpenProcessToken error: %u\n&quot;, GetLastError());
    return FALSE;
&#125;

if( !LookupPrivilegeValue(NULL,           // lookup privilege on local system
                          lpszPrivilege,  // privilege to lookup 
                          &amp;luid) )        // receives LUID of privilege
&#123;
    _tprintf(L&quot;LookupPrivilegeValue error: %u\n&quot;, GetLastError() ); 
    return FALSE; 
&#125;

tp.PrivilegeCount = 1;
tp.Privileges[0].Luid = luid;
if( bEnablePrivilege )
    tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
else
    tp.Privileges[0].Attributes = 0;

// Enable the privilege or disable all privileges.
if( !AdjustTokenPrivileges(hToken, 
                           FALSE, 
                           &amp;tp, 
                           sizeof(TOKEN_PRIVILEGES), 
                           (PTOKEN_PRIVILEGES) NULL, 
                           (PDWORD) NULL) )
&#123; 
    _tprintf(L&quot;AdjustTokenPrivileges error: %u\n&quot;, GetLastError() ); 
    return FALSE; 
&#125; 

if( GetLastError() == ERROR_NOT_ALL_ASSIGNED )
&#123;
    _tprintf(L&quot;The token does not have the specified privilege. \n&quot;);
    return FALSE;
&#125; 

return TRUE;
</code></pre>
<p>}</p>
<p>BOOL EjectDll(DWORD dwPID, LPCTSTR szDllName)<br>{<br>    BOOL bMore &#x3D; FALSE, bFound &#x3D; FALSE;<br>    HANDLE hSnapshot, hProcess, hThread;<br>    HMODULE hModule &#x3D; NULL;<br>    MODULEENTRY32 me &#x3D; { sizeof(me) };<br>    LPTHREAD_START_ROUTINE pThreadProc;</p>
<pre><code>// dwPID = notepad 进程 ID
// 使用 TH32CS_SNAPMODULE 参数，获取加载到 notepad 进程的 DLL名称
hSnapshot = CreateToolhelp32Snapshot(TH32CS_SNAPMODULE, dwPID);

bMore = Module32First(hSnapshot, &amp;me);
for( ; bMore ; bMore = Module32Next(hSnapshot, &amp;me) )
&#123;
    if( !_tcsicmp((LPCTSTR)me.szModule, szDllName) || 
        !_tcsicmp((LPCTSTR)me.szExePath, szDllName) ) 
    &#123;
        bFound = TRUE;
        break;
    &#125;
&#125;

if( !bFound )
&#123;
    CloseHandle(hSnapshot);
    return FALSE;
&#125;

if ( !(hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwPID)) ) //使用进程ID来获取目标进程的进程句柄
&#123;
    _tprintf(L&quot;OpenProcess(%d) failed!!! [%d]\n&quot;, dwPID, GetLastError());
    return FALSE;
&#125;

//获取加载到EjectDll.exe进程的kernel32.FreeLibrary地址（这个地址在所有进程中是一样的）
hModule = GetModuleHandle(L&quot;kernel32.dll&quot;);
pThreadProc = (LPTHREAD_START_ROUTINE)GetProcAddress(hModule, &quot;FreeLibrary&quot;);
 
//在目标进程中运行线程，pThreadProc是FreeLibrary地址，me.modBaseAddr是要卸载的DLL的加载地址
hThread = CreateRemoteThread(hProcess, NULL, 0, 
                             pThreadProc, me.modBaseAddr, 
                             0, NULL);
WaitForSingleObject(hThread, INFINITE);   

CloseHandle(hThread);
CloseHandle(hProcess);
CloseHandle(hSnapshot);

return TRUE;
</code></pre>
<p>}</p>
<p>int _tmain(int argc, TCHAR* argv[])<br>{<br>    DWORD dwPID &#x3D; 0xFFFFFFFF;</p>
<pre><code>// find process
dwPID = FindProcessID(DEF_PROC_NAME);
if( dwPID == 0xFFFFFFFF )
&#123;
    _tprintf(L&quot;There is no &lt;%s&gt; process!\n&quot;, DEF_PROC_NAME);
    return 1;
&#125;

_tprintf(L&quot;PID of \&quot;%s\&quot; is %d\n&quot;, DEF_PROC_NAME, dwPID);

// change privilege
if( !SetPrivilege(SE_DEBUG_NAME, TRUE) )
    return 1;

// eject dll
if( EjectDll(dwPID, DEF_DLL_NAME) )
    _tprintf(L&quot;EjectDll(%d, \&quot;%s\&quot;) success!!!\n&quot;, dwPID, DEF_DLL_NAME);
else
    _tprintf(L&quot;EjectDll(%d, \&quot;%s\&quot;) failed!!!\n&quot;, dwPID, DEF_DLL_NAME);

return 0;
</code></pre>
<p>}</p>
<p>获取进程中加载的DLL信息。</p>
<p>hSnapshot &#x3D; CreateToolhelp32Snapshot(TH32CS_SNAPMODULE, dwPID);<br>&#x2F;&#x2F;使用 Create Toolhelp32Snapshot0 API 可以获取加载到进程的模块（ DLL ）信息。<br>&#x2F;&#x2F;将获取的 hSnapshot 句柄传递给Module32First(Module32NextO函数后，<br>&#x2F;&#x2F;即可设置与MODULEENTRY32结构体相关的模块信息.</p>
<p>获取目标进程的句柄。</p>
<p>hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwPID)<br>&#x2F;&#x2F;使用pid获取目标进程的进程句柄</p>
<p>获取FreeLibrary API地址</p>
<p>hModule &#x3D; GetModuleHandle(L”kernel32.dll”);<br> pThreadProc &#x3D; (LPTHREAD_START_ROUTINE)GetProcAddress(hModule, “FreeLibrary”);<br> &#x2F;&#x2F;若要驱使 notepad 进程自己调用 FreeLibrary API ，需要先得到 FreeLibrary的地址。<br> &#x2F;&#x2F;然而代码获取的不是加载到 notepad.exe 进程中的Kernel32!FreeLibrary 地址，<br>&#x2F;&#x2F; 而是加载到 EjectDl . exei 程中的Kernel32! FreeLibrary 地址。</p>
<p>在目标进程中运行线程</p>
<p>hThread &#x3D; CreateRemoteThread(hProcess, NULL, 0, pThreadProc, me.modBaseAddr, 0, NULL);<br>&#x2F;&#x2F;pThreadProc 参数是 FreeLibrary API 的地址,<br>&#x2F;&#x2F;me.modBaseAddr 参数是要卸载的 DLL 的加载地址。<br>&#x2F;&#x2F;将线程函数指定为 FreeLibrary 函数，并把 DLL 加载地址传递给线程参数，<br>&#x2F;&#x2F;就在目称世中成功调用了 FreeLibraryO ) API 。</p>
<p>五、AppInit_DLLss</p>
<p>计算机\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Windows</p>
<p>填入dll文件路径</p>
<p>修改LoadAppInit_DLLs</p>
<p>重启系统使修改生效，使用火绒剑，process explorer查看是否注入成功。可以看见已经被注注入成功了。并且是注入了所有加载了user32.dll的进程。但是由于此dll的目标是notepad.exe进程，所以只要当运行这个exe之后才会有所动作。</p>
<p>myhack2.dll的源码比较简单。主要目的为加载进程为notepad.exe的程序，然后隐藏并连接指定网站。</p>
<p>&#x2F;&#x2F; myhack2.cpp</p>
<p>#include “windows.h”<br>#include “tchar.h”</p>
<p>#define DEF_CMD  L”c:\Program Files\Internet Explorer\iexplore.exe”<br>#define DEF_ADDR L”<a target="_blank" rel="noopener" href="http://www.naver.com/">http://www.naver.com</a>“<br>#define DEF_DST_PROC L”notepad.exe”</p>
<p>BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)<br>{<br>    TCHAR szCmd[MAX_PATH]  &#x3D; {0,};<br>    TCHAR szPath[MAX_PATH] &#x3D; {0,};<br>    TCHAR *p &#x3D; NULL;<br>    STARTUPINFO si &#x3D; {0,};<br>    PROCESS_INFORMATION pi &#x3D; {0,};</p>
<pre><code>si.cb = sizeof(STARTUPINFO);
si.dwFlags = STARTF_USESHOWWINDOW;
si.wShowWindow = SW_HIDE;

switch( fdwReason )
&#123;
case DLL_PROCESS_ATTACH : 
    if( !GetModuleFileName( NULL, szPath, MAX_PATH ) )
        break;

    if( !(p = _tcsrchr(szPath, &#39;\\&#39;)) )
        break;

    if( _tcsicmp(p+1, DEF_DST_PROC) )
        break;

    wsprintf(szCmd, L&quot;%s %s&quot;, DEF_CMD, DEF_ADDR);
    if( !CreateProcess(NULL, (LPTSTR)(LPCTSTR)szCmd, 
                        NULL, NULL, FALSE, 
                        NORMAL_PRIORITY_CLASS, 
                        NULL, NULL, &amp;si, &amp;pi) )
        break;

    if( pi.hProcess != NULL )
        CloseHandle(pi.hProcess);

    break;
&#125;

return TRUE;
</code></pre>
<p>}</p>
<p>六、SetWindowsHooKEX（）</p>
<p>钩子过程（hook procedure）是系统调用的回调函数。</p>
<p>安装钩子时，钩子过程需要在DLL内部，该DLL的示例句柄（instance handle）即hMod。</p>
<p>线程ID如果为0，则钩子为“全局钩子”。</p>
<p>用SetWindowsHookEx()设置好钩子后，在某个进程中生成指定消息时，操作系统会将相关DLL文件强制注入相应进程。</p>
<p>HHOOK SetWindowsHookEx(</p>
<p>　　int idHook, &#x2F;&#x2F; 钩子的类型，即它处理的消息类型</p>
<p>　　HOOKPROC lpfn, &#x2F;&#x2F;钩子子程的地址指针。如果dwThreadId参数为0</p>
<p>　　&#x2F;&#x2F; 或是一个由别的进程创建的线程的标识，</p>
<p>　　&#x2F;&#x2F; lpfn必须指向DLL中的钩子子程。</p>
<p>　　&#x2F;&#x2F; 除此以外，lpfn可以指向当前进程的一段钩子子程代码。</p>
<p>　　&#x2F;&#x2F;钩子函数的入口地址，当钩子钩到任何消息后便调用这个函数。</p>
<p>　　HINSTANCE hMod,<br>    &#x2F;&#x2F;应用程序实例的句柄。标识包含lpfn所指的子程的DLL。</p>
<p>　　&#x2F;&#x2F; 如果dwThreadId 标识当前进程创建的一个线程，</p>
<p>　　&#x2F;&#x2F; 而且子程代码位于当前进程，hMod必须为NULL。</p>
<p>　　&#x2F;&#x2F; 可以很简单的设定其为本应用程序的实例句柄。</p>
<p>　　DWORD dwThreadId &#x2F;&#x2F;与安装的钩子子程相关联的线程的标识符。</p>
<p>　　&#x2F;&#x2F; 如果为0，钩子子程与所有的线程关联，即为全局钩子。</p>
<p>　　);</p>
<p>6.1、效果示意</p>
<p>首先运行HookMain.exe</p>
<p>再运行notepad.exe，之后再使用查看，发现dll文件已经被注入。</p>
<p>输入q，拆除钩子。拆除后，dll文件消失，可以正常输入。</p>
<p>6.2、分析源码</p>
<p>HookMain.exe主要过程为：首先加载KeyHook.dll文件，然后调用HookStart()函数开始钩取，用户输入”q”时，调用HookStop()函数终止钩取。</p>
<p>&#x2F;&#x2F;HookMain.exe</p>
<p>#include “stdio.h”<br>#include “conio.h”<br>#include “windows.h”</p>
<p>#define DEF_DLL_NAME        “KeyHook.dll”<br>#define DEF_HOOKSTART       “HookStart”<br>#define DEF_HOOKSTOP        “HookStop”</p>
<p>typedef void (*PFN_HOOKSTART)();<br>typedef void (*PFN_HOOKSTOP)();</p>
<p>void main()<br>{<br>    HMODULE         hDll &#x3D; NULL;<br>    PFN_HOOKSTART   HookStart &#x3D; NULL;<br>    PFN_HOOKSTOP    HookStop &#x3D; NULL;<br>    char            ch &#x3D; 0;</p>
<pre><code>// 加载KeyHook.dll
hDll = LoadLibraryA(DEF_DLL_NAME);
if( hDll == NULL )
&#123;
    printf(&quot;LoadLibrary(%s) failed!!! [%d]&quot;, DEF_DLL_NAME, GetLastError());
    return;
&#125;

// 获取导出函数地址
HookStart = (PFN_HOOKSTART)GetProcAddress(hDll, DEF_HOOKSTART);
HookStop = (PFN_HOOKSTOP)GetProcAddress(hDll, DEF_HOOKSTOP);

// 开始
HookStart();

// “q”退出
printf(&quot;press &#39;q&#39; to quit!\n&quot;);
while( _getch() != &#39;q&#39; )    ;

// 结束
HookStop();
 
// 卸载 KeyHook.dll 
FreeLibrary(hDll);
</code></pre>
<p>}</p>
<p>KeyHook.dll在调用HookStart()时，SetWindowsHookEx()函数就会将KeyboardProc()添加到键盘钩链。</p>
<p>安装好键盘“钩子”后，无论哪个进程，只要发生键盘输人事件， OS 就会强制将 KeyHook . dl 人相应进程。加载了 KeyHook.dll 的进程中，发生键盘事件时会首先调用执行KeyHookKeyboardProc 。</p>
<p>KeyboardProc 函数中发生键盘输入事件时，就会比较当前进程的名称与“ notepad.exe ”字符串，若相同，则返回1，终止 KeyboardProc（）函数，这意味着截获且删除消息。这样，键盘消息就不会传递到 notepad.exe 程序的消息队列。 安装好键盘“钩子”后，无论哪个进程，只要发生键盘输人事件， OS 就会强制将 KeyHook . dl 人相应进程。加载了 KcyHook . dll 的进程中，发生键盘事件时会首先调用执行 KeyHfookKeyboardProc 。</p>
<p>KeyboardProd 函数中发生键盘输人事件时，就会比较当前进程的名称与“ notepad . exe ”字符串，若相同，则返网1，终止 KcyboardProc （函数，这意味着截获且删除消息。这样，键盘消息就环会传透到 notapadexe 程序的消息队列。notepad.exe 未能接收到任何键盘消息，故无法输出。</p>
<p>除此之外（即当前进程名称非“ notepad . exe ”时），执行 return CallNextHookEx ( g_hHook , nCode , wParam, lParam)，消息会被传递到另一个应用程序或钩链的另一个“钩子”函数。</p>
<p>&#x2F;&#x2F; KeyHook.dll</p>
<p>#include “stdio.h”<br>#include “windows.h”</p>
<p>#define DEF_PROCESS_NAME       “notepad.exe”</p>
<p>HINSTANCE g_hInstance &#x3D; NULL;<br>HHOOK g_hHook &#x3D; NULL;<br>HWND g_hWnd &#x3D; NULL;</p>
<p>BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD dwReason, LPVOID lpvReserved)<br>{<br>    switch( dwReason )<br>    {<br>        case DLL_PROCESS_ATTACH:<br>            g_hInstance &#x3D; hinstDLL;<br>            break;</p>
<pre><code>    case DLL_PROCESS_DETACH:
        break; 
&#125;

return TRUE;
</code></pre>
<p>}</p>
<p>LRESULT CALLBACK KeyboardProc(int nCode, WPARAM wParam, LPARAM lParam)<br>{<br>    char szPath[MAX_PATH] &#x3D; {0,};<br>    char *p &#x3D; NULL;</p>
<pre><code>if( nCode &gt;= 0 )
&#123;
    // bit 31 : 0 =&gt; press, 1 =&gt; release
    if( !(lParam &amp; 0x80000000) ) //释放键盘按键时
    &#123;
        GetModuleFileNameA(NULL, szPath, MAX_PATH);
        p = strrchr(szPath, &#39;\\&#39;);

        // 比较当前进程名称，如果是 notepad.exe 则消息不会传给应用程序
        if( !_stricmp(p + 1, DEF_PROCESS_NAME) )
            return 1;
    &#125;
&#125;

//反之，调用 CallNextHookEx() 消息传给应用程序
return CallNextHookEx(g_hHook, nCode, wParam, lParam);
</code></pre>
<p>}</p>
<p>#ifdef __cplusplus<br>extern “C” {<br>#endif<br>    __declspec(dllexport) void HookStart()<br>{<br>        g_hHook &#x3D; SetWindowsHookEx(WH_KEYBOARD, KeyboardProc, g_hInstance, 0);<br>    }</p>
<pre><code>__declspec(dllexport) void HookStop()
</code></pre>
<p>{<br>        if( g_hHook )<br>        {<br>            UnhookWindowsHookEx(g_hHook);<br>            g_hHook &#x3D; NULL;<br>        }<br>    }<br>#ifdef __cplusplus<br>}<br>#endif</p>
<p>6.3、调试方法</p>
<p>先调试HookMain().exe，OD打开该程序。</p>
<p>查找核心代码</p>
<p>1、逐行跟踪调试<br>2、检索相关API<br>3、搜索相关字符串</p>
<p>由于之前打开过此程序，所以直接搜索”press ‘q’ to quit!\n”。</p>
<p>点击后跳转到该位置，在401000地址处下断点。然后运行到此处。</p>
<p>先在401006地址处调用LoadLibrary,然后由40104B地址处的CALL指令调用KeyHook.HookStart()函数。</p>
<p>F7跟踪进入。</p>
<p>图中的代码是被加载到HookMain.exe 进程中的 KeyHook.dll的HookStart()函数。</p>
<p>在100010EF地址处可以看到 CALL SetWindowsHookExW() 指令，其上方10010E8与100010ED地址处的2条 PUSH 指令用于把 SetWindowsHookExW() API 的第1、2两个参数压入栈。</p>
<p>Set WindowsHookExW() API 的第一个参数（ idHook）值为WH_KEYBOARD(2)，第二个参数( Ipfn ）值为10001020，该值即是钩子过程的地址。后面调试 KeyHook . dlI 时再仔细看该地址。HookMain.exe的main()函数（401000）的其余代码接收到用户输人的“ q ”命令后终止钩取。</p>
<p>调试KeyHook.dll</p>
<p>使用OD打开notepad.exe,F9运行</p>
<p>在OD中设置如下的选项</p>
<p>运行HookMain.exe</p>
<p>随后在notepad中随意输入一个字母，此时dll被加载到10000000处</p>
<p>根据系统环境不同，有时不会先显示 KeyHook.dll，而是先加載其他 DLL 库。</p>
<p>此时按（F9）运行键，直到KeyHook.dll加载完成。</p>
<p>有些系统无法正常运行该功能，此时使用OllyDbg2.0即可保证运行顺畅。</p>
<p>点击dll跳转到KeyHook.dll的EP地址处。并且由于之前在调试HookMain.exe时候已经知道钩子的地址是10001020，所以直接在此处下断点。</p>
<p>下好断点好，再重新运行一下程序。然后在记事本当中尝试输入数据，记事本无接收数据的意向，并且OD已经跳转到断点处。</p>
<p>1、OD运行notepad.exe<br>2、开启Break on new module(中断于新模块)选项<br>3、运行HookMain.exe<br>4、进行键盘输入，触发键盘消息事件<br>5、dll被注入<br>6、OD中设置钩子进程（KeyboardProc）断点</p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2022/12/01/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3dll%E6%B3%A8%E5%85%A5/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="逆向-植物大战僵尸修改器制作" class="article article-type-逆向  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/2022/11/18/%E6%A4%8D%E7%89%A9%E5%A4%A7%E6%88%98%E5%83%B5%E5%B0%B8%E4%BF%AE%E6%94%B9%E5%99%A8%E5%88%B6%E4%BD%9C/" target="_blank">植物大战僵尸修改器制作</a>
  
    </h1>
  


  
  
<a href="/2022/11/18/%E6%A4%8D%E7%89%A9%E5%A4%A7%E6%88%98%E5%83%B5%E5%B0%B8%E4%BF%AE%E6%94%B9%E5%99%A8%E5%88%B6%E4%BD%9C/" class="archive-article-date">
        <time datetime="2022-11-17T16:01:03.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-11-18</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p>基址偏移表<br>部分参考: 公布我所找到的所有基址及各种功能实现方法</p>
<p>基址 0x00355E0C</p>
<p>阳光 +868 +5578</p>
<p>金钱 +950 +50</p>
<p>花肥 +950 +220</p>
<p>巧克力 +950 +250</p>
<p>树肥 +950 +258</p>
<p>树高 +950 +11C</p>
<p>杀虫剂 +950 +224</p>
<p>卡槽数 +868 +15C +24</p>
<p>卡槽栏 +868 +15C +5C 此后每个植物栏相隔0x50</p>
<p>植物当前冷却值 +868 +15C +4C 此后每个植物冷却相隔0x50</p>
<p>植物冷却值上限 +868 +15C +50 此后每个植物冷却上限相隔0x50</p>
<p>植物当前数量 +868 +D4</p>
<p>植物种植函数EBP +868</p>
<p>僵尸当前数量 +868 +B8</p>
<p>僵尸种植函数EBP +868 +178</p>
<p>常规项目<br>根据变量的变化使用CE寻找,找到之后再通过指针扫描寻找可用的基址</p>
<p>阳光 内存实际值&#x3D;游戏显示值</p>
<p>智慧树高度 内存实际值&#x3D;游戏显示值</p>
<p>金钱 内存实际值&#x3D;游戏显示值&#x2F;10</p>
<p>花肥,杀虫剂,巧克力,树肥  内存实际值&#x3D;游戏显示值+1000</p>
<p>关键函数和变量</p>
<p> 复制代码 隐藏代码<br>enum Type {<br>    Sunlight, Money, TreeHeight, Chocolate, TreeFood, FlowerFood, Insecticide<br>};</p>
<p>&#x2F;&#x2F;定义映射表用于保存各项偏移值<br>unsigned int offsetTable[10] &#x3D; { 0x5578,0x50,0x11c,0x250,0x258,0x220,0x224 };</p>
<p>&#x2F;&#x2F;获取某些项目的值<br>unsigned int getSomething(HANDLE handle, DWORD BaseAddr,unsigned int type) {<br>    unsigned int num &#x3D; 0;<br>    DWORD addr &#x3D; BaseAddr + 0x00355E0C;<br>    ReadProcessMemory(handle, addr, &amp;addr, sizeof(DWORD), NULL);<br>    if (type &#x3D;&#x3D; Sunlight)<br>        addr +&#x3D; 0x868;<br>    else<br>        addr +&#x3D; 0x950;<br>    ReadProcessMemory(handle, (LPVOID)addr, &amp;addr, sizeof(DWORD), NULL);<br>    addr +&#x3D; offsetTable[type];<br>    ReadProcessMemory(handle, (LPVOID)addr, &amp;num, sizeof(DWORD), 0);<br>    return num;<br>}</p>
<p>&#x2F;&#x2F;设置某些项目的值<br>void setSomething(HANDLE handle, DWORD BaseAddr,unsigned int type, unsigned int num) {<br>    DWORD addr &#x3D; BaseAddr + 0x00355E0C;<br>    ReadProcessMemory(handle, addr, &amp;addr, sizeof(DWORD), NULL);<br>    if (type &#x3D;&#x3D; Sunlight)<br>        addr +&#x3D; 0x868;<br>    else<br>        addr +&#x3D; 0x950;<br>    ReadProcessMemory(handle, (LPVOID)addr, &amp;addr, sizeof(DWORD), NULL);<br>    addr +&#x3D; offsetTable[type];<br>    WriteProcessMemory(handle, (LPVOID)addr, &amp;num, sizeof(DWORD), 0);<br>}<br>卡槽植物<br>十个卡槽,每个卡槽对应一个植物,可以在坚果保龄球2中根据卡槽1(最左边的卡槽)的坚果变化来找到卡槽的地址,之后再寻找基址</p>
<p>具体方法: 初值未知,如果卡槽1的植物和新的卡槽1(原卡槽2)的植物相同,则扫不变的值,否则扫变化的值</p>
<p>卡槽之间的偏移可以通过浏览卡槽1内存区域看出,为0x50</p>
<p>坚果植物卡槽编号:</p>
<p>普通坚果 3</p>
<p>爆炸坚果 49</p>
<p>巨型坚果 50</p>
<p>设置卡槽植物函数</p>
<p> 复制代码 隐藏代码<br>&#x2F;&#x2F;设置卡槽植物<br>BOOL SetPlantCard(HANDLE hProcess,DWORD BaseAddr,DWORD nCard,DWORD plantType) {<br>    DWORD cardAddr &#x3D; BaseAddr + 0x355E0C;<br>    ReadProcessMemory(hProcess, cardAddr, &amp;cardAddr, sizeof(DWORD), NULL);<br>    cardAddr +&#x3D; 0x868;<br>    ReadProcessMemory(hProcess, cardAddr, &amp;cardAddr, sizeof(DWORD), NULL);<br>    cardAddr +&#x3D; 0x15C;<br>    ReadProcessMemory(hProcess, cardAddr, &amp;cardAddr, sizeof(DWORD), NULL);<br>    cardAddr +&#x3D; 0x5C+nCard*0x50;&#x2F;&#x2F;卡槽偏移<br>    return WriteProcessMemory(hProcess, cardAddr, &amp;plantType, sizeof(DWORD), NULL);<br>}<br>种植无冷却<br>具体方法: 仅针对一个卡槽,初始值未知,种植后持续变化,冷却完毕后不变,反复扫描并查找基址,查看对应内存区域再对照植物编号可以发现卡槽间的偏移为0x50</p>
<p>冷却特点: 可种植状态冷却值为0,种植后冷却值持续增长,到达冷却上限后,冷却值清零,植物重新可种植</p>
<p>注意: 直接将冷却值置0会导致无法种植</p>
<p>修改方法:</p>
<p>修改冷却结束后恢复的速度,将inc指令修改为mov一个较大值 这个<br>直接跳转到冷却值和冷却上限比较成功的函数<br>以方法2为例</p>
<p>7E 16 对应汇编指令为  jle   0x18</p>
<p>修改为jmp $+2 即  eb 00  (相对当前指令2字节后的指令)</p>
<p>直接执行冷却值达到冷却上限后的函数(冷却值清零,植物冷却完毕可种植)</p>
<p>附上汇编代码转换网站</p>
<p>关键代码</p>
<p> 复制代码 隐藏代码<br>&#x2F;&#x2F;修改进程代码区代码 参数: 进程句柄 修改代码起始地址 硬编码指针 代码字节数<br>BOOL WriteProcessCodeMemory(HANDLE hProcess, LPVOID lpStartAddress, LPCVOID lpBuffer, SIZE_T nSize) {<br>    DWORD dwOldProtect;<br>    &#x2F;&#x2F;取消页保护<br>    if (!VirtualProtectEx(hProcess, lpStartAddress, nSize, PAGE_EXECUTE_READWRITE, &amp;dwOldProtect)) {<br>        return FALSE;<br>    }<br>    BOOL bResult &#x3D; WriteProcessMemory(hProcess, lpStartAddress, lpBuffer, nSize, NULL);&#x2F;&#x2F;写入代码<br>    VirtualProtectEx(hProcess, lpStartAddress, nSize, dwOldProtect, &amp;dwOldProtect);&#x2F;&#x2F;开启页保护<br>    return bResult;<br>}</p>
<p>&#x2F;&#x2F;无限冷却<br>BOOL Uncooled(HANDLE hProcess, DWORD BaseAddr) {<br>    unsigned char code[2] &#x3D; { 0xeb,0x00 };<br>    return WriteProcessCodeMemory(hProcess, BaseAddr + 0x9ce02, code, 2);&#x2F;&#x2F;jle 0x18修改为jmp $+2<br>}</p>
<p>&#x2F;&#x2F;恢复冷却<br>BOOL RecoveryCooling(HANDLE hProcess, DWORD BaseAddr) {<br>    unsigned char OriginalCode[2] &#x3D; { 0x7E ,0x16 };&#x2F;&#x2F;jmp $+2恢复为jle 0x18<br>    return WriteProcessCodeMemory(hProcess, BaseAddr + 0x9ce02, OriginalCode, 2);<br>}<br>无限阳光<br>前文已经给出了阳光的地址 基址为0x355E0C 偏移+868 +5578</p>
<p>查找对阳光修改的代码即可</p>
<p>阳光减少代码</p>
<p>阳光增加代码</p>
<p>基本过程:</p>
<p>设置阳光值为9999</p>
<p>修改阳光减少代码使得种植物不消耗阳光</p>
<p>修改阳光增加代码使得阳光不变化(防止阳光过多导致溢出)</p>
<p> 复制代码 隐藏代码<br>&#x2F;&#x2F;修改进程代码区代码 参数: 进程句柄 修改代码起始地址 硬编码指针 代码字节数<br>BOOL WriteProcessCodeMemory(HANDLE hProcess, LPVOID lpStartAddress, LPCVOID lpBuffer, SIZE_T nSize) {<br>    DWORD dwOldProtect;<br>    &#x2F;&#x2F;取消页保护<br>    if (!VirtualProtectEx(hProcess, lpStartAddress, nSize, PAGE_EXECUTE_READWRITE, &amp;dwOldProtect)) {<br>        return FALSE;<br>    }<br>    BOOL bResult &#x3D; WriteProcessMemory(hProcess, lpStartAddress, lpBuffer, nSize, NULL);&#x2F;&#x2F;写入代码<br>    VirtualProtectEx(hProcess, lpStartAddress, nSize, dwOldProtect, &amp;dwOldProtect);&#x2F;&#x2F;开启页保护<br>    return bResult;<br>}<br>&#x2F;&#x2F;无限阳光,锁定阳光为9999<br>BOOL UnlimitedSun(HANDLE hProcess, DWORD BaseAddr) {<br>    unsigned char Code[3] &#x3D; { 0x29,0xdb,0 };&#x2F;&#x2F;cmp ebx,eax 修改为sub ebx,ebx   and ecx,0x32修改为and ecx,0<br>    BOOL flag;<br>    flag &#x3D; setSomething(hProcess, BaseAddr, Sunlight, 9999);&#x2F;&#x2F;修改阳光<br>    flag &amp;&#x3D; WriteProcessCodeMemory(hProcess, BaseAddr + 0x27690, Code, 2);&#x2F;&#x2F;修改阳光减少代码<br>    flag &amp;&#x3D; WriteProcessCodeMemory(hProcess, BaseAddr + 0x3C0AB, &amp;Code[2], 1);&#x2F;&#x2F;修改阳光增加代码<br>    return flag;<br>}</p>
<p>&#x2F;&#x2F;恢复阳光消耗<br>BOOL RecoverySunConsume(HANDLE hProcess, DWORD BaseAddr) {<br>    unsigned char OriginalCode[3] &#x3D; { 0x3B,0xD8,0x32 };&#x2F;&#x2F;sub ebx,ebx恢复为cmp ebx,eax and ecx,0恢复为and ecx,0x32<br>    BOOL flag &#x3D; WriteProcessCodeMemory(hProcess, BaseAddr + 0x27690, OriginalCode, 2);&#x2F;&#x2F;恢复阳光减少代码<br>    flag &amp;&#x3D; WriteProcessCodeMemory(hProcess, BaseAddr + 0x3C0AB, &amp;OriginalCode[2], 1);&#x2F;&#x2F;恢复阳光增加代码<br>    return flag;<br>}<br>浓雾透视<br>基本原理<br>具体方法: 在生存模式浓雾进行,初值未知,通过在雾区种植和铲除路灯花引起的变化来判断,最终可以发现是4字节数据,数值代表雾的浓度,255代表浓雾,0代表没雾,再查找修改雾值的代码</p>
<p>寻找浓雾地址</p>
<p>浓雾修改代码</p>
<p>mov [ecx],edx这行代码修改了雾值,可以改为mov [ecx],0</p>
<p>注意硬编码为0xc7,0x01,0x00,0x00,0x00,0x00 由于较长无法直接修改代码,所以这里选择使用hook技术</p>
<p>HOOK<br>hook的基本过程</p>
<p>读取并保存目的地址原始代码<br>申请空间(PVZ游戏进程空间)用于存储原始代码 hook代码 jmp返回代码<br>向申请的空间中写入原始代码 hook代码 jmp返回代码<br>修改目的地址的代码为jmp HookCode<br>返回HookCode首地址 用于解除hook<br>值得一提的是jmp指令后跟的偏移值是以jmp的下一条指令首地址计算</p>
<p>jmp指令偏移值&#x3D;目的地址-(jmp指令首地址+5)  这里的5是jmp指令本身的长度 +5便是下一条指令</p>
<p>offset&#x3D;desAddr-(jmpAddr+5)</p>
<p> 复制代码 隐藏代码<br>&#x2F;&#x2F;修改进程代码区代码 参数: 进程句柄 修改代码起始地址 硬编码指针 代码字节数<br>BOOL WriteProcessCodeMemory(HANDLE hProcess, LPVOID lpStartAddress, LPCVOID lpBuffer, SIZE_T nSize) {<br>    DWORD dwOldProtect;<br>    &#x2F;&#x2F;取消页保护<br>    if (!VirtualProtectEx(hProcess, lpStartAddress, nSize, PAGE_EXECUTE_READWRITE, &amp;dwOldProtect)) {<br>        return FALSE;<br>    }<br>    BOOL bResult &#x3D; WriteProcessMemory(hProcess, lpStartAddress, lpBuffer, nSize, NULL);&#x2F;&#x2F;写入代码<br>    VirtualProtectEx(hProcess, lpStartAddress, nSize, dwOldProtect, &amp;dwOldProtect);&#x2F;&#x2F;开启页保护<br>    return bResult;<br>}</p>
<p>&#x2F;&#x2F;hook指定地址,申请新空间保存原始代码并写入hookcode,返回申请空间的地址<br>LPVOID SetHook(HANDLE hProcess, LPVOID desAddr, LPCVOID hookCode, SIZE_T hookCodeSize, SIZE_T origCodeSize) {<br>    BYTE origCode[10] &#x3D; { 0 }, jmpCode[5] &#x3D; { 0xE9,0,0,0,0 };<br>    &#x2F;&#x2F;1. 读取并保存原始代码<br>    if (!ReadProcessMemory(hProcess, desAddr, origCode, origCodeSize, NULL))<br>        return NULL;</p>
<pre><code>//2. 申请空间用于存储原始代码,hook代码,jmp返回代码
LPVOID allocAddr = VirtualAllocEx(hProcess, NULL, hookCodeSize + origCodeSize + 5, MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);
if (!allocAddr)
    return NULL;

//3. 向申请空间写入原始代码,hook代码,jmp返回代码  jmp xxx 偏移为目的地址-jmp下一条指令地址
*(DWORD*)(jmpCode + 1) = (DWORD)desAddr + 5 - ((DWORD)allocAddr + hookCodeSize + origCodeSize + 5);//hook返回地址的偏移
if (!WriteProcessCodeMemory(hProcess, allocAddr, origCode, origCodeSize)                      //写入原始代码
    || !WriteProcessCodeMemory(hProcess, (DWORD)allocAddr + origCodeSize, hookCode, hookCodeSize)//写入hook代码
    || !WriteProcessCodeMemory(hProcess, (DWORD)allocAddr + origCodeSize + hookCodeSize, jmpCode, 5))//写入jmpcode
&#123;
    VirtualFreeEx(hProcess, allocAddr, 0, MEM_RELEASE);//写入失败则释放空间
    return NULL;
&#125;

//4. 修改目的地址处的代码  jmp xxx偏移 原始代码后才是需要执行的hook代码
*(DWORD*)(jmpCode + 1) = ((DWORD)allocAddr + origCodeSize) - ((DWORD)desAddr + 5);
WriteProcessCodeMemory(hProcess, desAddr, jmpCode, 5);//在源地址处写入跳转代码
if (origCodeSize &gt; 5)//原始代码长度大于5时nop多余字节
&#123;
    BYTE nopCode[5] = &#123; 0x90,0x90,0x90,0x90,0x90 &#125;;
    if (!WriteProcessCodeMemory(hProcess, (DWORD)desAddr + 5, nopCode, origCodeSize - 5))
    &#123;
        VirtualFreeEx(hProcess, allocAddr, 0, MEM_RELEASE);//写入nopcode失败则释放空间并返回
        return NULL;
    &#125;
&#125;

//5. hook成功则返回hookCode所在地址
return allocAddr;
</code></pre>
<p>}</p>
<p>&#x2F;&#x2F;取消hook指定地址,写回原始代码并释放申请空间<br>BOOL UnHook(HANDLE hProcess, LPVOID desAddr, SIZE_T origCodeSize, LPVOID allocAddr) {<br>    BYTE origCode[10] &#x3D; { 0 };<br>    &#x2F;&#x2F;1. 从申请空间中读出原始代码<br>    if (!ReadProcessMemory(hProcess, allocAddr, origCode, origCodeSize, NULL))<br>        return FALSE;<br>    &#x2F;&#x2F;2. 将原始代码写回目的地址<br>    if (!WriteProcessCodeMemory(hProcess, desAddr, origCode, origCodeSize))<br>        return FALSE;<br>    &#x2F;&#x2F;3. 释放申请空间<br>    if (!VirtualFreeEx(hProcess, allocAddr, 0, MEM_RELEASE))<br>        return FALSE;<br>    return TRUE;<br>}<br>除雾代码<br> 复制代码 隐藏代码<br>&#x2F;&#x2F;除雾 注意保留hook代码首地址<br>LPVOID DeFogByHook(HANDLE hProcess, LPVOID BaseAddr) {</p>
<pre><code>unsigned char hookCode[9] = &#123;
    0xc7,0x01,0x00,0x00,0x00,0x00,  //mov [ecx],0
    0x83,0xc1,0x04                  //add ecx,0x4
&#125;;
//写入hook代码进行hook
return SetHook(hProcess, (DWORD)BaseAddr + 0x26173, hookCode, sizeof(hookCode), 5);
</code></pre>
<p>}</p>
<p>&#x2F;&#x2F;恢复雾<br>BOOL RecoveryFogByUnHook(HANDLE hProcess, LPVOID BaseAddr, LPVOID allocAddr) {<br>    return UnHook(hProcess, (DWORD)BaseAddr + 0x26173, 5, allocAddr);<br>}<br>hook前 指令为mov [ecx],edx add ecx,04</p>
<p>hook后 指令被修改为jmp</p>
<p>hookcode 新分配空间前5个字节正是原始代码 之后是hook代码和jmp返回代码</p>
<p>种植植物<br>基本原理<br>程序是执行种植植物的函数后再执行增加植物数量的功能</p>
<p>首先查找草坪上的植物数量,初值0,随着种植个数增加 基址0x355E0C 偏移+868 +D4</p>
<p>再查找是什么修改了植物数量,下断点之后再种植一个植物</p>
<p>断下后查看调用堆栈中的返回地址,即可找到种植函数</p>
<p>![9.1 找到种植call函数](9.1 找到种植call函数.png)</p>
<p>这个功能最初使用远程线程注入dll来实现,注入dll虽然比较简单但是却并不通用,在此仅做介绍,比较推荐使用远程代码注入的方式实现</p>
<p>远程线程注入dll函数<br>远程线程是当前进程在目标进程中创建一个线程并执行特定代码(这段代码必须在目标进程中而不是当前进程中)</p>
<p>注入dll是因为dll在被进程或线程加载时执行dll的DllMain函数,通过这一特点我们可以实现一些特殊功能</p>
<p>优点: 便于实现</p>
<p>缺点: dll注入容易被检测到</p>
<p>基本过程:</p>
<p>打开进程获取进程句柄<br>在目标进程中申请空间用于存储dll路径名<br>将dll路径名写入申请的空间中<br>创建远程线程,执行LoadLibrary函数(加载dll)<br>目标进程加载dll后自动执行dll的DllMain函数<br> 复制代码 隐藏代码<br>&#x2F;&#x2F;创建远程线程方式向指定进程注入dll<br>BOOL InjectDllByRemoteThread(DWORD desProcId,WCHAR* dllPath) {<br>    &#x2F;&#x2F;打开进程获取进程句柄<br>    HANDLE hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, desProcId);<br>    if (!hProcess)<br>        return FALSE;</p>
<pre><code>//申请空间
DWORD pathSize = (wcslen(dllPath) + 1) * 2; 
LPVOID newMemAddr = VirtualAllocEx(hProcess, 0, pathSize, MEM_COMMIT, PAGE_READWRITE);
if (!newMemAddr)
    return FALSE;

//写入dll路径
if (!WriteProcessMemory(hProcess, newMemAddr, dllPath, pathSize, NULL))
&#123;
    VirtualFreeEx(hProcess, newMemAddr, 0, MEM_RELEASE);
    return FALSE;
&#125;

//创建远程线程
HANDLE hThread = CreateRemoteThread(hProcess, NULL, 0, (LPTHREAD_START_ROUTINE)LoadLibraryW, newMemAddr, 0, NULL);
if (!hThread)
&#123;
    VirtualFreeEx(hProcess, newMemAddr, 0, MEM_RELEASE);
    return FALSE;
&#125;

WaitForSingleObject(hThread, INFINITE);//等待线程信号,保证成功注入

//回收资源
VirtualFreeEx(hProcess, newMemAddr, 0, MEM_RELEASE);
CloseHandle(hThread);
CloseHandle(hProcess);

//返回成功
return TRUE;
</code></pre>
<p>}<br>远程线程卸载dll函数<br>很多教程只给出了如何注入dll,没有演示如何卸载</p>
<p>如果只注入不卸载会导致下次再注入时不会执行特定函数(由于dll已经被加载过) 不方便实时调试更新dll等问题</p>
<p>基本过程:</p>
<p>在目标进程申请内存,将需要卸载的dll模块名称写入该内存<br>通过枚举模块来查找指定模块<br>成功查找到dll模块则创建远程线程执行FreeLibrary函数卸载dll<br> 复制代码 隐藏代码<br>BOOL UnLoadDllByRemoteThread(DWORD dwProcessId, LPCWSTR lpDllName)<br>{<br>    HANDLE hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwProcessId);<br>    if (hProcess &#x3D;&#x3D; NULL)<br>        return FALSE;</p>
<pre><code>// 在目标进程中申请一块内存，并将需要卸载的DLL模块的名称写入该内存
LPVOID lpRemoteDllName = VirtualAllocEx(hProcess, NULL, (wcslen(lpDllName) + 1) * sizeof(WCHAR), MEM_COMMIT | MEM_RESERVE, PAGE_READWRITE);
if (lpRemoteDllName == NULL)
&#123;
    CloseHandle(hProcess);
    return FALSE;
&#125;
if (!WriteProcessMemory(hProcess, lpRemoteDllName, lpDllName, (wcslen(lpDllName) + 1) * sizeof(WCHAR), NULL))
&#123;
    VirtualFreeEx(hProcess, lpRemoteDllName, 0, MEM_RELEASE);
    CloseHandle(hProcess);
    return FALSE;
&#125;

//查找dll模块
HMODULE hModules[1024],DesModule=NULL;
DWORD dwSize = 0;
if (!EnumProcessModules(hProcess, hModules, sizeof(hModules), &amp;dwSize))
&#123;
    VirtualFreeEx(hProcess, lpRemoteDllName, 0, MEM_RELEASE);
    CloseHandle(hProcess);
    return FALSE;
&#125;

// 遍历模块列表，查找需要卸载的DLL模块
for (DWORD i = 0; i &lt; (dwSize / sizeof(HMODULE)); i++)
&#123;
    WCHAR szModuleName[MAX_PATH] = &#123; 0 &#125;;
    if (GetModuleFileNameExW(hProcess, hModules[i], szModuleName, MAX_PATH) &gt; 0)
    &#123;
        // 获取模块句柄
        if (wcsicmp(szModuleName, lpDllName) == 0)
        &#123;
            DesModule = hModules[i];
        &#125;
    &#125;
&#125;
//没有查找到模块
if (!DesModule) &#123;
    VirtualFreeEx(hProcess, lpRemoteDllName, 0, MEM_RELEASE);
    CloseHandle(hProcess);
    return FALSE;
&#125;
// 在目标进程中创建远程线程，执行FreeLibrary函数
HANDLE hThread = CreateRemoteThread(hProcess, NULL, 0, (LPTHREAD_START_ROUTINE)FreeLibrary, DesModule, 0, NULL);
if (hThread == NULL)
&#123;
    VirtualFreeEx(hProcess, lpRemoteDllName, 0, MEM_RELEASE);
    CloseHandle(hProcess);
    return FALSE;
&#125;

// 等待线程执行完成
WaitForSingleObject(hThread, INFINITE);

// 关闭句柄
CloseHandle(hThread);
VirtualFreeEx(hProcess, lpRemoteDllName, 0, MEM_RELEASE);
CloseHandle(hProcess);

return TRUE;
</code></pre>
<p>}<br>关键dll函数<br>这里使用了三种方法</p>
<p>注意: 不要将代码写入switch(reason)之外,否则可能会导致多次执行</p>
<p> 复制代码 隐藏代码<br>#include&lt;windows.h&gt;<br>#include&lt;stdio.h&gt;</p>
<p>&#x2F;&#x2F;调用函数<br>BOOL GrowPlant(DWORD BaseAddr, DWORD x, DWORD y, DWORD TypePlant) {<br>    LPVOID PlantFunc &#x3D; BaseAddr + 0x18D70;<br>    __asm {<br>        pushad<br>        push -1         &#x2F;&#x2F;-1<br>        push TypePlant   &#x2F;&#x2F;植物类型<br>        mov eax, y       &#x2F;&#x2F;y<br>        push x           &#x2F;&#x2F;x<br>        mov ecx, BaseAddr<br>        mov ecx, [ecx+0x355E0C]<br>        mov ecx, [ecx + 0x868]<br>        push ecx                &#x2F;&#x2F;植物种植ebp<br>        call PlantFunc<br>        popad<br>    }<br>    return TRUE;<br>}</p>
<p>BOOL WINAPI DllMain(HMODULE hInstance, DWORD fdwReason, LPVOID lpReserved) {<br>    DWORD BaseAddr &#x3D; GetModuleHandle(NULL);<br>    DWORD pid &#x3D; GetCurrentProcessId();<br>    HANDLE hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid);<br>    LPVOID PlantFunc &#x3D; BaseAddr + 0x18D70;<br>    DWORD ebpAddr &#x3D; BaseAddr+0x355E0C,num&#x3D;0;<br>    ReadProcessMemory(hProcess, ebpAddr, &amp;ebpAddr, sizeof(DWORD), NULL);<br>    ebpAddr +&#x3D; 0x868;<br>    ReadProcessMemory(hProcess, ebpAddr, &amp;ebpAddr, sizeof(DWORD), NULL);&#x2F;&#x2F;必须使用带hProcess参数的才能正确读取到地址,NULL不可以<br>    DWORD x &#x3D; 1, y &#x3D; 1, TypePlant &#x3D; 16;</p>
<pre><code>//注意不要写到switch外,否则可能会一次种多株植物,猜测是dll被多个线程加载导致的
switch (fdwReason)
&#123;
case DLL_PROCESS_ATTACH:    //当进程加载dll模块时执行
    //MessageBoxW(0, L&quot;ProcessAttach!&quot;, L&quot;window2&quot;, 0);
    //1.直接通过使用ReadProcessMemory函数读取内存获取ebp参数
    __asm &#123;
        pushad
        push - 1         //-1
        push TypePlant   //植物类型
        mov eax, y       //y
        push x           //x
        push  ebpAddr    //ebp
        call PlantFunc   
        popad
    &#125;

    //2.通过利用寄存器获取ebp(推荐)
    x = 3, y = 2, TypePlant = 18;
    __asm &#123;
        pushad
        push - 1         //-1
        push TypePlant   //植物类型
        mov eax, y       //y
        push x           //x
        mov ecx, BaseAddr
        mov ecx, [ecx+0x355E0C]
        mov ecx, [ecx + 0x868]
        push ecx
        call PlantFunc
        popad
    &#125;
   //3. 通过调用函数(推荐)     
    GrowPlant(BaseAddr,7,3,23);         

    break;
//case DLL_THREAD_ATTACH:        
//    printf(&quot;ThreadAttach!\n&quot;);
//    break;
//case DLL_THREAD_DETACH:       
//  if (lpReserved == NULL)
//    &#123;
//        FreeLibrary(hInstance);
//    &#125;
    break;
case DLL_PROCESS_DETACH:        //当进程卸载dll模块时执行
    MessageBoxW(0, L&quot;ProcessDeTachDll!&quot;, L&quot;window2&quot;, 0);
    break;
&#125;
return TRUE; 
</code></pre>
<p>}<br>执行结果</p>
<p>失败代码<br>这是写dll函数时遇到的问题 如果直接用 mov ecx,[BaseAddr+0x355E0C]会导致代码执行失败,推测是这条指令访存过慢所以无效</p>
<p>建议mov ecx,BaseAddr之后通过对寄存器操作达到目的</p>
<p> 复制代码 隐藏代码<br>__asm {<br>        pushad<br>        push - 1         &#x2F;&#x2F;-1<br>        push TypePlant   &#x2F;&#x2F;植物类型<br>        mov eax, y       &#x2F;&#x2F;y<br>        push x           &#x2F;&#x2F;x<br>        mov ecx,[BaseAddr+ 0x355E0C]&#x2F;&#x2F;这样不行,推测是访存过慢<br>        mov ecx,[ecx+0x868]<br>        mov num, ecx<br>        push ecx<br>        call PlantFunc<br>        popad<br>    }<br>远程线程代码注入(推荐)<br>和远程线程dll注入类似,CreateRemoteThread函数要求的函数原型是</p>
<p> 复制代码 隐藏代码<br>DWORD WINAPI ThreadProc(<br>  <em>In</em> LPVOID lpParameter&#x2F;&#x2F;使用CreateThread函数传递的参数 该参数是一个指向其他数据的指针,当然也可以强转为其他类型直接使用<br>);<br>基本过程:</p>
<p>打开进程<br>定义注入代码(函数)<br>在目标进程中申请空间并写入注入代码<br>创建远程线程执行注入代码(函数)<br>执行完毕释放空间<br> 复制代码 隐藏代码<br>&#x2F;&#x2F;以创建远程线程方式种植植物<br>BOOL GrowPlantByInjectCode(DWORD dwProcessId,DWORD BaseAddr,DWORD x,DWORD y,DWORD PlantType)<br>{<br>    BOOL bSuccess &#x3D; FALSE;<br>    &#x2F;&#x2F;1. 打开进程<br>    HANDLE hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwProcessId);<br>    if (hProcess !&#x3D; NULL)<br>    {<br>        &#x2F;&#x2F;2. 定义注入代码(函数)</p>
<pre><code>    BYTE InjectCode[50] = &#123;                     //汇编指令              //修正点偏移
        0x55,                                   //0 push ebp
        0x89, 0xE5,                             //1 mov ebp,esp
        0x60,                                   //3 pushad                
        0x68, 0xFF, 0xFF, 0xFF, 0xFF,           //4 push -1           
        0x68, 0x00, 0x00, 0x00, 0x00,           //9 push PlantType        //10     
        0xB8, 0x00, 0x00, 0x00, 0x00,           //14 mov eax,y             //15
        0x68, 0x00, 0x00, 0x00, 0x00,           //19 push x                //20
        0xB9, 0x00, 0x00, 0x00, 0x00,           //24 mov ecx,BaseAddr      //25
        0x8B, 0x89, 0x0C, 0x5E, 0x35, 0x00,     //29 mov ecx,[ecx+0x355E0C]
        0x8B, 0x89, 0x68, 0x08, 0x00, 0x00,     //35 mov ecx,[ecx+0x868]
        0x51,                                   //41 push ecx
        0xE8, 0x00, 0x00, 0x00, 0x00,           //42 call PlantFunc        //43     //被调方平栈
        0x61,                                   //47 popad
        0xC9,                                   //48 leave
        0xC3                                    //49 ret
    &#125;;

    //3. 申请空间用于存储代码
    DWORD  dwCodeSize = 50, desFunc = BaseAddr + 0x18D70;
    LPVOID lpRemoteCodeMem = VirtualAllocEx(hProcess, NULL, dwCodeSize, MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);

    //4. 修正参数
    *(DWORD*)&amp;InjectCode[10] = PlantType;
    *(DWORD*)&amp;InjectCode[15] = y;
    *(DWORD*)&amp;InjectCode[20] = x;
    *(DWORD*)&amp;InjectCode[25] = BaseAddr;
    *(DWORD*)&amp;InjectCode[43] = desFunc-((DWORD)lpRemoteCodeMem+42+5) ;
    //call指令与jmp类似,相对于当前指令的下一条指令计算偏移,offset=des-(source+5),减去call自身长度5

    if (lpRemoteCodeMem != NULL)
    &#123;
        SIZE_T dwBytesWritten = 0;
        //5. 注入代码
        if (WriteProcessMemory(hProcess, lpRemoteCodeMem, InjectCode, dwCodeSize, &amp;dwBytesWritten) &amp;&amp;
            dwBytesWritten == dwCodeSize)
        &#123;
            //6. 创建远程线程执行代码
            HANDLE hThread = CreateRemoteThread(hProcess, NULL, 0, (LPTHREAD_START_ROUTINE)lpRemoteCodeMem,NULL, 0, NULL);
            if (hThread != NULL)
            &#123;
                //7. 等待线程信号
                WaitForSingleObject(hThread, INFINITE);
                CloseHandle(hThread);
                bSuccess = TRUE;
            &#125;
        &#125;
        //8. 执行完后释放空间
        VirtualFreeEx(hProcess, lpRemoteCodeMem, 0, MEM_RELEASE);
    &#125;
    CloseHandle(hProcess);
&#125;

return bSuccess;
</code></pre>
<p>}<br>种植僵尸<br>基本原理<br>与种植植物思路类似</p>
<p>首先在头脑风暴中通过种植僵尸来找到僵尸数量地址</p>
<p>然后找到僵尸数量增加代码</p>
<p>再通过查看调用堆栈和参数找到种植僵尸call</p>
<p>参数应该也是x y type ebp (注意没有-1)</p>
<p>僵尸种植函数的x值在一个call上方,这个call是个switch结构,没有参数,所以x值也没被修改</p>
<p>种植僵尸函数–dll注入版<br> 复制代码 隐藏代码<br>BOOL GrowZombie(DWORD BaseAddr, DWORD x, DWORD y, DWORD ZombieType) {<br>    LPVOID PlantZombieFunc &#x3D; BaseAddr + 0x35390;<br>    __asm {<br>        pushad<br>        push x<br>        push ZombieType<br>        mov eax,y<br>        mov ecx,BaseAddr<br>        mov ecx,[ecx+0x355E0C]<br>        mov ecx,[ecx+0x868]<br>        mov ecx,[ecx+0x178]    &#x2F;&#x2F;ebp<br>        call PlantZombieFunc<br>        popad<br>    }<br>    return TRUE;<br>}<br>远程代码注入版<br> 复制代码 隐藏代码<br>&#x2F;&#x2F;以创建远程线程方式种植僵尸<br>BOOL GrowZombieByRemoteThread(DWORD dwProcessId,DWORD BaseAddr, DWORD x, DWORD y, DWORD ZombieType) {</p>
<pre><code>BOOL bSuccess = FALSE;
//1. 打开进程
HANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwProcessId);
if (hProcess != NULL)
&#123;
    //2. 定义注入代码(函数)

    BYTE InjectCode[50] = &#123;
        0x55,                                       //0 push ebp
        0x89, 0xE5,                                 //1 mov ebp,esp
        0x60,                                       //3 pushad
        0x68, 0x00, 0x00, 0x00, 0x00,               //4 push x
        0x68, 0x00, 0x00, 0x00, 0x00,               //9 push ZombieType
        0xB8, 0x00, 0x00, 0x00, 0x00,               //14 mov eax,y
        0xB9, 0x00, 0x00, 0x00, 0x00,               //19 mov ecx,BaseAddr
        0x8B, 0x89, 0x0C, 0x5E, 0x35, 0x00,         //24 mov ecx,[ecx+0x355E0C]
        0x8B, 0x89, 0x68, 0x08, 0x00, 0x00,         //30 mov ecx,[ecx+0x868]
        0x8B, 0x89, 0x78, 0x01, 0x00, 0x00,         //36 mov ecx,[ecx+0x178]
        0xE8, 0x00, 0x00, 0x00, 0x00,               //42 call PlantZombieFunc
        0x61,                                       //47 popad
        0xC9,                                       //48 leave 
        0xC3                                        //49 ret
    &#125;;

    //3. 申请空间用于存储代码
    DWORD  dwCodeSize = 50, desFunc = BaseAddr + 0x35390; //种植僵尸函数
    LPVOID lpRemoteCodeMem = VirtualAllocEx(hProcess, NULL, dwCodeSize, MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);

    //4. 修正参数
    *(DWORD*)&amp;InjectCode[5] = x;
    *(DWORD*)&amp;InjectCode[10] = ZombieType;
    *(DWORD*)&amp;InjectCode[15] = y;
    *(DWORD*)&amp;InjectCode[20] = BaseAddr;
    *(DWORD*)&amp;InjectCode[43] = desFunc - ((DWORD)lpRemoteCodeMem + 42 + 5);//call指令与jmp类似,相对于当前指令的下一条指令计算偏移,要减去call长度5

    if (lpRemoteCodeMem != NULL)
    &#123;
        SIZE_T dwBytesWritten = 0;
        //5. 注入代码
        if (WriteProcessMemory(hProcess, lpRemoteCodeMem, InjectCode, dwCodeSize, &amp;dwBytesWritten) &amp;&amp;
            dwBytesWritten == dwCodeSize)
        &#123;
            //6. 创建远程线程执行代码
            HANDLE hThread = CreateRemoteThread(hProcess, NULL, 0, (LPTHREAD_START_ROUTINE)lpRemoteCodeMem, NULL, 0, NULL);
            if (hThread != NULL)
            &#123;
                //7. 等待线程信号
                WaitForSingleObject(hThread, INFINITE);
                CloseHandle(hThread);
                bSuccess = TRUE;
            &#125;
        &#125;
        //8. 执行完后释放空间
        VirtualFreeEx(hProcess, lpRemoteCodeMem, 0, MEM_RELEASE);
    &#125;
    CloseHandle(hProcess);
&#125;

return bSuccess;
</code></pre>
<p>}<br>完整代码<br> 复制代码 隐藏代码<br>#include&lt;stdio.h&gt;<br>#include&lt;windows.h&gt;<br>#include &lt;tlhelp32.h&gt;<br>#include &lt;string.h&gt;<br>#include &lt;shlwapi.h&gt;<br>#include &lt;psapi.h&gt;</p>
<p>enum Type {<br>    Sunlight, Money, TreeHeight, Chocolate, TreeFood, FlowerFood, Insecticide<br>};<br>unsigned int offsetTable[10] &#x3D; { 0x5578,0x50,0x11c,0x250,0x258,0x220,0x224 };</p>
<p>&#x2F;&#x2F; 根据进程名获取进程ID<br>DWORD GetProcessIdByName(const wchar_t* processName) {</p>
<pre><code>HANDLE snapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0);// 创建一个进程快照
if (snapshot == INVALID_HANDLE_VALUE) &#123;
    return 0;// 如果创建失败，返回 0
&#125;

// 定义一个 PROCESSENTRY32 结构体，用于存储进程信息
PROCESSENTRY32 processEntry = &#123; 0 &#125;;
processEntry.dwSize = sizeof(PROCESSENTRY32);   //必须初始化,否则调用Process32First会失败
if (!Process32First(snapshot, &amp;processEntry)) &#123;
    CloseHandle(snapshot);
    return 0;// 如果获取第一个进程信息失败，关闭进程快照句柄并返回 0
&#125;

// 遍历进程列表
do &#123;
    wchar_t currentProcessName[MAX_PATH];                           // 获取当前进程的名称
    wcscpy_s(currentProcessName, MAX_PATH, processEntry.szExeFile); //szExeFile存储了进程对应可执行文件的名称
    if (wcscmp(currentProcessName, processName) == 0) &#123;
        CloseHandle(snapshot);                                  // 如果当前进程名称和指定的进程名称相同，返回进程 ID
        return processEntry.th32ProcessID;
    &#125;
&#125; while (Process32Next(snapshot, &amp;processEntry));               //获取快照中下一个进程的信息

// 如果遍历完整个进程列表都没有找到指定进程，关闭进程快照句柄并返回 0
CloseHandle(snapshot);
return 0;
</code></pre>
<p>}</p>
<p>&#x2F;&#x2F;根据进程模块名获取基址<br>LPVOID GetModuleBaseAddress(DWORD processId, LPCWSTR moduleName) {<br>    LPVOID lpBaseAddress &#x3D; NULL;</p>
<pre><code>HANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, processId); // 打开进程句柄
if (hProcess != NULL) &#123;
    // 枚举进程中的所有模块
    HMODULE hMods[1024];
    DWORD cbNeeded;
    if (EnumProcessModules(hProcess, hMods, sizeof(hMods), &amp;cbNeeded)) &#123;
        DWORD dwModuleCount = cbNeeded / sizeof(HMODULE);// 计算模块数量
        // 获取指定模块的信息
        for (DWORD i = 0; i &lt; dwModuleCount; i++) &#123;
            TCHAR szModName[MAX_PATH];
            //获取指定模块的完整路径名
            if (GetModuleFileNameEx(hProcess, hMods[i], szModName, MAX_PATH)) &#123;//函数成功返回字符串长度,注意第四个参数的单位为字符而非字节
                if (wcsstr(szModName, moduleName)) &#123;//查找模块名,若成功则返回子串第一次出现的指针
                    MODULEINFO modInfo = &#123; 0 &#125;;
                    if (GetModuleInformation(hProcess, hMods[i], &amp;modInfo, sizeof(MODULEINFO))) &#123;//获取模块信息并保存到modInfo中
                        lpBaseAddress = modInfo.lpBaseOfDll;//模块基地址
                        break;
                    &#125;
                &#125;
            &#125;
        &#125;
    &#125;
    CloseHandle(hProcess); // 关闭进程句柄
&#125;

return lpBaseAddress;
</code></pre>
<p>}</p>
<p>&#x2F;&#x2F;修改进程代码区代码 参数: 进程句柄 修改代码起始地址 硬编码指针 代码字节数<br>BOOL WriteProcessCodeMemory(HANDLE hProcess, LPVOID lpStartAddress, LPCVOID lpBuffer, SIZE_T nSize) {<br>    DWORD dwOldProtect;<br>    &#x2F;&#x2F;取消页保护<br>    if (!VirtualProtectEx(hProcess, lpStartAddress, nSize, PAGE_EXECUTE_READWRITE, &amp;dwOldProtect)) {<br>        return FALSE;<br>    }<br>    BOOL bResult &#x3D; WriteProcessMemory(hProcess, lpStartAddress, lpBuffer, nSize, NULL);&#x2F;&#x2F;写入代码<br>    VirtualProtectEx(hProcess, lpStartAddress, nSize, dwOldProtect, &amp;dwOldProtect);&#x2F;&#x2F;开启页保护<br>    return bResult;<br>}</p>
<p>&#x2F;&#x2F;hook指定地址,申请新空间保存原始代码并写入hookcode,返回申请空间的地址<br>LPVOID SetHook(HANDLE hProcess, LPVOID desAddr, LPCVOID hookCode, SIZE_T hookCodeSize, SIZE_T origCodeSize) {<br>    BYTE origCode[10] &#x3D; { 0 }, jmpCode[5] &#x3D; { 0xE9,0,0,0,0 };<br>    &#x2F;&#x2F;1. 读取并保存原始代码<br>    if (!ReadProcessMemory(hProcess, desAddr, origCode, origCodeSize, NULL))<br>        return NULL;</p>
<pre><code>//2. 申请空间用于存储原始代码,hook代码,jmp返回代码
LPVOID allocAddr = VirtualAllocEx(hProcess, NULL, hookCodeSize + origCodeSize + 5, MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);
if (!allocAddr)
    return NULL;

//3. 向申请空间写入原始代码,hook代码,jmp返回代码  jmp xxx 偏移为目的地址-jmp下一条指令地址
*(DWORD*)(jmpCode + 1) = (DWORD)desAddr + 5 - ((DWORD)allocAddr + hookCodeSize + origCodeSize + 5);//hook返回地址的偏移
if (!WriteProcessCodeMemory(hProcess, allocAddr, origCode, origCodeSize)                      //写入原始代码
    || !WriteProcessCodeMemory(hProcess, (DWORD)allocAddr + origCodeSize, hookCode, hookCodeSize)//写入hook代码
    || !WriteProcessCodeMemory(hProcess, (DWORD)allocAddr + origCodeSize + hookCodeSize, jmpCode, 5))//写入jmpcode
&#123;
    VirtualFreeEx(hProcess, allocAddr, 0, MEM_RELEASE);//写入失败则释放空间
    return NULL;
&#125;

//4. 修改目的地址处的代码  jmp xxx偏移 原始代码后才是需要执行的hook代码
*(DWORD*)(jmpCode + 1) = ((DWORD)allocAddr + origCodeSize) - ((DWORD)desAddr + 5);
WriteProcessCodeMemory(hProcess, desAddr, jmpCode, 5);//在源地址处写入跳转代码
if (origCodeSize &gt; 5)//原始代码长度大于5时nop多余字节
&#123;
    BYTE nopCode[5] = &#123; 0x90,0x90,0x90,0x90,0x90 &#125;;
    if (!WriteProcessCodeMemory(hProcess, (DWORD)desAddr + 5, nopCode, origCodeSize - 5))
    &#123;
        VirtualFreeEx(hProcess, allocAddr, 0, MEM_RELEASE);//写入nopcode失败则释放空间并返回
        return NULL;
    &#125;
&#125;

//5. hook成功则返回hookCode所在地址
return allocAddr;
</code></pre>
<p>}</p>
<p>&#x2F;&#x2F;取消hook指定地址,写回原始代码并释放申请空间<br>BOOL UnHook(HANDLE hProcess, LPVOID desAddr, SIZE_T origCodeSize, LPVOID allocAddr) {<br>    BYTE origCode[10] &#x3D; { 0 };<br>    &#x2F;&#x2F;1. 从申请空间中读出原始代码<br>    if (!ReadProcessMemory(hProcess, allocAddr, origCode, origCodeSize, NULL))<br>        return FALSE;<br>    &#x2F;&#x2F;2. 将原始代码写回目的地址<br>    if (!WriteProcessCodeMemory(hProcess, desAddr, origCode, origCodeSize))<br>        return FALSE;<br>    &#x2F;&#x2F;3. 释放申请空间<br>    if (!VirtualFreeEx(hProcess, allocAddr, 0, MEM_RELEASE))<br>        return FALSE;<br>    return TRUE;<br>}</p>
<p>&#x2F;&#x2F;获取某些项目的值<br>unsigned int getSomething(HANDLE handle, DWORD BaseAddr, unsigned int type) {<br>    unsigned int num &#x3D; 0;<br>    DWORD addr &#x3D; BaseAddr + 0x00355E0C;<br>    ReadProcessMemory(handle, (LPVOID)addr, &amp;addr, sizeof(DWORD), NULL);<br>    if (type &#x3D;&#x3D; Sunlight)<br>        addr +&#x3D; 0x868;<br>    else<br>        addr +&#x3D; 0x950;<br>    ReadProcessMemory(handle, (LPVOID)addr, &amp;addr, sizeof(DWORD), NULL);<br>    addr +&#x3D; offsetTable[type];<br>    ReadProcessMemory(handle, (LPVOID)addr, &amp;num, sizeof(DWORD), 0);<br>    return num;<br>}</p>
<p>&#x2F;&#x2F;设置某些项目的值<br>BOOL setSomething(HANDLE handle, DWORD BaseAddr, unsigned int type, unsigned int num) {<br>    DWORD addr &#x3D; BaseAddr + 0x00355E0C;<br>    ReadProcessMemory(handle, addr, &amp;addr, sizeof(DWORD), NULL);<br>    if (type &#x3D;&#x3D; Sunlight)<br>        addr +&#x3D; 0x868;<br>    else<br>        addr +&#x3D; 0x950;<br>    ReadProcessMemory(handle, (LPVOID)addr, &amp;addr, sizeof(DWORD), NULL);<br>    addr +&#x3D; offsetTable[type];<br>    return WriteProcessMemory(handle, (LPVOID)addr, &amp;num, sizeof(DWORD), 0);<br>}</p>
<p>&#x2F;&#x2F;无限冷却<br>BOOL Uncooled(HANDLE hProcess, DWORD BaseAddr) {<br>    unsigned char code[2] &#x3D; { 0xeb,0x00 };<br>    return WriteProcessCodeMemory(hProcess, BaseAddr + 0x9ce02, code, 2);&#x2F;&#x2F;jle 0x18修改为jmp $+2<br>}</p>
<p>&#x2F;&#x2F;恢复冷却<br>BOOL RecoveryCooling(HANDLE hProcess, DWORD BaseAddr) {<br>    unsigned char OriginalCode[2] &#x3D; { 0x7E ,0x16 };&#x2F;&#x2F;jmp $+2修改为jle 0x18<br>    return WriteProcessCodeMemory(hProcess, BaseAddr + 0x9ce02, OriginalCode, 2);<br>}</p>
<p>&#x2F;&#x2F;无限阳光,锁定阳光为9999<br>BOOL UnlimitedSun(HANDLE hProcess, DWORD BaseAddr) {<br>    unsigned char Code[3] &#x3D; { 0x29,0xdb,0 };&#x2F;&#x2F;cmp ebx,eax 修改为sub ebx,ebx   and ecx,0x32修改为and ecx,0<br>    BOOL flag;<br>    flag &#x3D; setSomething(hProcess, BaseAddr, Sunlight, 9999);&#x2F;&#x2F;修改阳光<br>    flag &amp;&#x3D; WriteProcessCodeMemory(hProcess, BaseAddr + 0x27690, Code, 2);&#x2F;&#x2F;修改阳光减少代码<br>    flag &amp;&#x3D; WriteProcessCodeMemory(hProcess, BaseAddr + 0x3C0AB, &amp;Code[2], 1);&#x2F;&#x2F;修改阳光增加代码<br>    return flag;<br>}</p>
<p>&#x2F;&#x2F;恢复阳光消耗<br>BOOL RecoverySunConsume(HANDLE hProcess, DWORD BaseAddr) {<br>    unsigned char OriginalCode[3] &#x3D; { 0x3B,0xD8,0x32 };&#x2F;&#x2F;sub ebx,ebx恢复为cmp ebx,eax and ecx,0恢复为and ecx,0x32<br>    BOOL flag &#x3D; WriteProcessCodeMemory(hProcess, BaseAddr + 0x27690, OriginalCode, 2);&#x2F;&#x2F;恢复阳光减少代码<br>    flag &amp;&#x3D; WriteProcessCodeMemory(hProcess, BaseAddr + 0x3C0AB, &amp;OriginalCode[2], 1);&#x2F;&#x2F;恢复阳光增加代码<br>    return flag;<br>}</p>
<p>&#x2F;&#x2F;除雾<br>LPVOID DeFogByHook(HANDLE hProcess, LPVOID BaseAddr) {</p>
<pre><code>unsigned char hookCode[9] = &#123;
    0xc7,0x01,0x00,0x00,0x00,0x00,  //mov [ecx],0
    0x83,0xc1,0x04                  //add ecx,0x4
&#125;;
//写hook代码进行hook
return SetHook(hProcess, (DWORD)BaseAddr + 0x26173, hookCode, sizeof(hookCode), 5);
</code></pre>
<p>}</p>
<p>&#x2F;&#x2F;恢复雾<br>BOOL RecoveryFogByUnHook(HANDLE hProcess, LPVOID BaseAddr, LPVOID allocAddr) {<br>    return UnHook(hProcess, (DWORD)BaseAddr + 0x26173, 5, allocAddr);<br>}</p>
<p>&#x2F;&#x2F;创建远程线程向指定进程注入dll<br>BOOL InjectDllByRemoteThread(DWORD desProcId,WCHAR* dllPath) {<br>    &#x2F;&#x2F;打开进程获取进程句柄<br>    HANDLE hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, desProcId);<br>    if (!hProcess)<br>        return FALSE;</p>
<pre><code>//申请空间
DWORD pathSize = (wcslen(dllPath) + 1) * 2; 
LPVOID newMemAddr = VirtualAllocEx(hProcess, 0, pathSize, MEM_COMMIT, PAGE_READWRITE);
if (!newMemAddr)
    return FALSE;

//写入dll路径
if (!WriteProcessMemory(hProcess, newMemAddr, dllPath, pathSize, NULL))
&#123;
    VirtualFreeEx(hProcess, newMemAddr, 0, MEM_RELEASE);
    return FALSE;
&#125;

//创建远程线程
HANDLE hThread = CreateRemoteThread(hProcess, NULL, 0, (LPTHREAD_START_ROUTINE)LoadLibraryW, newMemAddr, 0, NULL);
if (!hThread)
&#123;
    VirtualFreeEx(hProcess, newMemAddr, 0, MEM_RELEASE);
    return FALSE;
&#125;

WaitForSingleObject(hThread, INFINITE);//等待线程信号,保证成功注入

//回收资源
VirtualFreeEx(hProcess, newMemAddr, 0, MEM_RELEASE);
CloseHandle(hThread);
CloseHandle(hProcess);

//返回成功
return TRUE;
</code></pre>
<p>}</p>
<p>&#x2F;&#x2F;创建远程线程释放指定进程dll<br>BOOL UnLoadDllByRemoteThread(DWORD dwProcessId, LPCWSTR lpDllName)<br>{<br>    HANDLE hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwProcessId);<br>    if (hProcess &#x3D;&#x3D; NULL)<br>        return FALSE;</p>
<pre><code>// 在目标进程中申请一块内存，并将需要卸载的DLL模块的名称写入该内存
LPVOID lpRemoteDllName = VirtualAllocEx(hProcess, NULL, (wcslen(lpDllName) + 1) * sizeof(WCHAR), MEM_COMMIT | MEM_RESERVE, PAGE_READWRITE);
if (lpRemoteDllName == NULL)
&#123;
    CloseHandle(hProcess);
    return FALSE;
&#125;
if (!WriteProcessMemory(hProcess, lpRemoteDllName, lpDllName, (wcslen(lpDllName) + 1) * sizeof(WCHAR), NULL))
&#123;
    VirtualFreeEx(hProcess, lpRemoteDllName, 0, MEM_RELEASE);
    CloseHandle(hProcess);
    return FALSE;
&#125;

//查找dll模块
HMODULE hModules[1024],DesModule=NULL;
DWORD dwSize = 0;
if (!EnumProcessModules(hProcess, hModules, sizeof(hModules), &amp;dwSize))
&#123;
    VirtualFreeEx(hProcess, lpRemoteDllName, 0, MEM_RELEASE);
    CloseHandle(hProcess);
    return FALSE;
&#125;

// 遍历模块列表，查找需要卸载的DLL模块
for (DWORD i = 0; i &lt; (dwSize / sizeof(HMODULE)); i++)
&#123;
    WCHAR szModuleName[MAX_PATH] = &#123; 0 &#125;;
    if (GetModuleFileNameExW(hProcess, hModules[i], szModuleName, MAX_PATH) &gt; 0)
    &#123;
        // 获取模块句柄
        if (wcsicmp(szModuleName, lpDllName) == 0)
        &#123;
            DesModule = hModules[i];
        &#125;
    &#125;
&#125;
//没有查找到模块
if (!DesModule) &#123;
    VirtualFreeEx(hProcess, lpRemoteDllName, 0, MEM_RELEASE);
    CloseHandle(hProcess);
    return FALSE;
&#125;
// 在目标进程中创建远程线程，执行FreeLibrary函数
HANDLE hThread = CreateRemoteThread(hProcess, NULL, 0, (LPTHREAD_START_ROUTINE)FreeLibrary, DesModule, 0, NULL);
if (hThread == NULL)
&#123;
    VirtualFreeEx(hProcess, lpRemoteDllName, 0, MEM_RELEASE);
    CloseHandle(hProcess);
    return FALSE;
&#125;

// 等待线程执行完成
WaitForSingleObject(hThread, INFINITE);

// 关闭句柄
CloseHandle(hThread);
VirtualFreeEx(hProcess, lpRemoteDllName, 0, MEM_RELEASE);
CloseHandle(hProcess);

return TRUE;
</code></pre>
<p>}</p>
<p>&#x2F;&#x2F;以创建远程线程方式种植植物<br>BOOL GrowPlantByInjectCode(DWORD dwProcessId,DWORD BaseAddr,DWORD x,DWORD y,DWORD PlantType)<br>{<br>    BOOL bSuccess &#x3D; FALSE;<br>    &#x2F;&#x2F;1. 打开进程<br>    HANDLE hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwProcessId);<br>    if (hProcess !&#x3D; NULL)<br>    {<br>        &#x2F;&#x2F;2. 定义注入代码(函数)</p>
<pre><code>    BYTE InjectCode[50] = &#123;                     //汇编指令              //修正点偏移
        0x55,                                   //0 push ebp
        0x89, 0xE5,                             //1 mov ebp,esp
        0x60,                                   //3 pushad                
        0x68, 0xFF, 0xFF, 0xFF, 0xFF,           //4 push -1           
        0x68, 0x00, 0x00, 0x00, 0x00,           //9 push PlantType        //10     
        0xB8, 0x00, 0x00, 0x00, 0x00,           //14 mov eax,y             //15
        0x68, 0x00, 0x00, 0x00, 0x00,           //19 push x                //20
        0xB9, 0x00, 0x00, 0x00, 0x00,           //24 mov ecx,BaseAddr      //25
        0x8B, 0x89, 0x0C, 0x5E, 0x35, 0x00,     //29 mov ecx,[ecx+0x355E0C]
        0x8B, 0x89, 0x68, 0x08, 0x00, 0x00,     //35 mov ecx,[ecx+0x868]
        0x51,                                   //41 push ecx
        0xE8, 0x00, 0x00, 0x00, 0x00,           //42 call PlantFunc        //43     //被调方平栈
        0x61,                                   //47 popad
        0xC9,                                   //48 leave
        0xC3                                    //49 ret
    &#125;;

    //3. 申请空间用于存储代码
    DWORD  dwCodeSize = 50, desFunc = BaseAddr + 0x18D70;
    LPVOID lpRemoteCodeMem = VirtualAllocEx(hProcess, NULL, dwCodeSize, MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);

    //4. 修正参数
    *(DWORD*)&amp;InjectCode[10] = PlantType;
    *(DWORD*)&amp;InjectCode[15] = y;
    *(DWORD*)&amp;InjectCode[20] = x;
    *(DWORD*)&amp;InjectCode[25] = BaseAddr;
    *(DWORD*)&amp;InjectCode[43] = desFunc-((DWORD)lpRemoteCodeMem+42+5) ;
    //call指令与jmp类似,相对于当前指令的下一条指令计算偏移,offset=des-(source+5),减去call自身长度5

    if (lpRemoteCodeMem != NULL)
    &#123;
        SIZE_T dwBytesWritten = 0;
        //5. 注入代码
        if (WriteProcessMemory(hProcess, lpRemoteCodeMem, InjectCode, dwCodeSize, &amp;dwBytesWritten) &amp;&amp;
            dwBytesWritten == dwCodeSize)
        &#123;
            //6. 创建远程线程执行代码
            HANDLE hThread = CreateRemoteThread(hProcess, NULL, 0, (LPTHREAD_START_ROUTINE)lpRemoteCodeMem,NULL, 0, NULL);
            if (hThread != NULL)
            &#123;
                //7. 等待线程信号
                WaitForSingleObject(hThread, INFINITE);
                CloseHandle(hThread);
                bSuccess = TRUE;
            &#125;
        &#125;
        //8. 执行完后释放空间
        VirtualFreeEx(hProcess, lpRemoteCodeMem, 0, MEM_RELEASE);
    &#125;
    CloseHandle(hProcess);
&#125;

return bSuccess;
</code></pre>
<p>}</p>
<p>&#x2F;&#x2F;以创建远程线程方式种植僵尸<br>BOOL GrowZombieByInjectCode(DWORD dwProcessId,DWORD BaseAddr, DWORD x, DWORD y, DWORD ZombieType) {</p>
<pre><code>BOOL bSuccess = FALSE;
//1. 打开进程
HANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwProcessId);
if (hProcess != NULL)
&#123;
    //2. 定义注入代码(函数)

    BYTE InjectCode[50] = &#123;
        0x55,                                       //0 push ebp
        0x89, 0xE5,                                 //1 mov ebp,esp
        0x60,                                       //3 pushad
        0x68, 0x00, 0x00, 0x00, 0x00,               //4 push x
        0x68, 0x00, 0x00, 0x00, 0x00,               //9 push ZombieType
        0xB8, 0x00, 0x00, 0x00, 0x00,               //14 mov eax,y
        0xB9, 0x00, 0x00, 0x00, 0x00,               //19 mov ecx,BaseAddr
        0x8B, 0x89, 0x0C, 0x5E, 0x35, 0x00,         //24 mov ecx,[ecx+0x355E0C]
        0x8B, 0x89, 0x68, 0x08, 0x00, 0x00,         //30 mov ecx,[ecx+0x868]
        0x8B, 0x89, 0x78, 0x01, 0x00, 0x00,         //36 mov ecx,[ecx+0x178]
        0xE8, 0x00, 0x00, 0x00, 0x00,               //42 call PlantZombieFunc
        0x61,                                       //47 popad
        0xC9,                                       //48 leave 
        0xC3                                        //49 ret
    &#125;;

    //3. 申请空间用于存储代码
    DWORD  dwCodeSize = 50, desFunc = BaseAddr + 0x35390; //种植僵尸函数
    LPVOID lpRemoteCodeMem = VirtualAllocEx(hProcess, NULL, dwCodeSize, MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);

    //4. 修正参数
    *(DWORD*)&amp;InjectCode[5] = x;
    *(DWORD*)&amp;InjectCode[10] = ZombieType;
    *(DWORD*)&amp;InjectCode[15] = y;
    *(DWORD*)&amp;InjectCode[20] = BaseAddr;
    *(DWORD*)&amp;InjectCode[43] = desFunc - ((DWORD)lpRemoteCodeMem + 42 + 5);//call指令与jmp类似,相对于当前指令的下一条指令计算偏移,要减去call长度5

    if (lpRemoteCodeMem != NULL)
    &#123;
        SIZE_T dwBytesWritten = 0;
        //5. 注入代码
        if (WriteProcessMemory(hProcess, lpRemoteCodeMem, InjectCode, dwCodeSize, &amp;dwBytesWritten) &amp;&amp;
            dwBytesWritten == dwCodeSize)
        &#123;
            //6. 创建远程线程执行代码
            HANDLE hThread = CreateRemoteThread(hProcess, NULL, 0, (LPTHREAD_START_ROUTINE)lpRemoteCodeMem, NULL, 0, NULL);
            if (hThread != NULL)
            &#123;
                //7. 等待线程信号
                WaitForSingleObject(hThread, INFINITE);
                CloseHandle(hThread);
                bSuccess = TRUE;
            &#125;
        &#125;
        //8. 执行完后释放空间
        VirtualFreeEx(hProcess, lpRemoteCodeMem, 0, MEM_RELEASE);
    &#125;
    CloseHandle(hProcess);
&#125;

return bSuccess;
</code></pre>
<p>}</p>
<p>&#x2F;&#x2F;设置卡槽植物<br>BOOL SetPlantCard(HANDLE hProcess,DWORD BaseAddr,DWORD nCard,DWORD plantType) {<br>    DWORD cardAddr &#x3D; BaseAddr + 0x355E0C;<br>    ReadProcessMemory(hProcess, cardAddr, &amp;cardAddr, sizeof(DWORD), NULL);<br>    cardAddr +&#x3D; 0x868;<br>    ReadProcessMemory(hProcess, cardAddr, &amp;cardAddr, sizeof(DWORD), NULL);<br>    cardAddr +&#x3D; 0x15C;<br>    ReadProcessMemory(hProcess, cardAddr, &amp;cardAddr, sizeof(DWORD), NULL);<br>    cardAddr +&#x3D; 0x5C+nCard*0x50;&#x2F;&#x2F;卡槽偏移<br>    return WriteProcessMemory(hProcess, cardAddr, &amp;plantType, sizeof(DWORD), NULL);<br>}</p>
<p>&#x2F;&#x2F;选择菜单<br>void choiceMenu(HANDLE hProcess,DWORD Pid, LPVOID BaseAddr) {<br>    DWORD choice &#x3D; 0;<br>    unsigned int num &#x3D; 0;<br>    DWORD fogAddr &#x3D; 0;<br>    unsigned int x, y, Type;<br>   while(1) {<br>        system(“cls”);<br>        printf(“\t\t\t\tWelcome to PVZ Modifier!\n”);<br>        printf(“\t\t\t\t\t0.退出\n”);<br>        printf(“\t\t\t\t\t1.修改阳光数\n”);<br>        printf(“\t\t\t\t\t2.修改金钱数\n”);<br>        printf(“\t\t\t\t\t3.修改智慧树高\n”);<br>        printf(“\t\t\t\t\t4.修改巧克力数\n”);<br>        printf(“\t\t\t\t\t5.修改树肥\n”);<br>        printf(“\t\t\t\t\t6.修改花肥\n”);<br>        printf(“\t\t\t\t\t7.修改杀虫剂\n”);<br>        printf(“\t\t\t\t\t8.无限冷却\n”);<br>        printf(“\t\t\t\t\t9.恢复冷却\n”);<br>        printf(“\t\t\t\t\t10.无限阳光\n”);<br>        printf(“\t\t\t\t\t11.恢复阳光消耗\n”);<br>        printf(“\t\t\t\t\t12.除雾\n”);<br>        printf(“\t\t\t\t\t13.恢复雾\n”);<br>        printf(“\t\t\t\t\t14.种植植物\n”);<br>        printf(“\t\t\t\t\t15.生成僵尸\n”);</p>
<pre><code>    printf(&quot;\t\t\t\tPlease choose your option:[ ]\b\b&quot;);
    scanf(&quot;%d&quot;, &amp;choice);

    switch(choice)&#123;
    case 0:
        return;
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
    case 6:
    case 7:
        printf(&quot;\t\t\t\tPlease input Num:&quot;);
        scanf(&quot;%d&quot;, &amp;num);
        setSomething(hProcess, BaseAddr, choice - 1, num);
        break;
    case 8:
        Uncooled(hProcess, BaseAddr);
        break;
    case 9:
        RecoveryCooling(hProcess, BaseAddr);
        break;
    case 10:
        UnlimitedSun(hProcess,BaseAddr);
        break;
    case 11:
        RecoverySunConsume(hProcess, BaseAddr);
        break;
    case 12:
        fogAddr=(DWORD)DeFogByHook(hProcess, BaseAddr);
        break;
    case 13:
        RecoveryFogByUnHook(hProcess, BaseAddr,fogAddr );
        break;
    case 14:
        printf(&quot;请输入X Y PlantType: &quot;);
        scanf(&quot;%d%d%d&quot;, &amp;x, &amp;y, &amp;Type);
        GrowPlantByInjectCode(Pid, BaseAddr,x,y,Type );
        break;
    case 15:
        printf(&quot;请输入X Y ZombieType: &quot;);
        scanf(&quot;%d%d%d&quot;, &amp;x, &amp;y, &amp;Type);
        GrowZombieByInjectCode(Pid, BaseAddr, x, y, Type);
        break;
    &#125;
&#125;
</code></pre>
<p>}</p>
<p>int main() {</p>
<pre><code>    //获取进程pid
DWORD Pid = GetProcessIdByName(L&quot;PlantsVsZombies.exe&quot;);
    //打开进程,获取进程句柄
    HANDLE hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE,Pid);
//获取进程基址
DWORD BaseAddr=GetModuleBaseAddress(Pid, L&quot;PlantsVsZombies.exe&quot;);

choiceMenu(hProcess, Pid, BaseAddr);

//dll注入
//InjectDllByRemoteThread(Pid, L&quot;E:\\MyProject\\vsProjects\\Project1\\Debug\\DllPlant3.dll&quot;);
//int op = 1;
//printf(&quot;输入0卸载dll:&quot;);
//scanf(&quot;%d&quot;, &amp;op);
//if(op==0)
//    UnLoadDllByRemoteThread(Pid, L&quot;E:\\MyProject\\vsProjects\\Project1\\Debug\\DllPlant3.dll&quot;);//加载完dll之后释放掉

CloseHandle(hProcess);
return 0;
</code></pre>
<p>}<br>DLL代码</p>
<p> 复制代码 隐藏代码<br>#include&lt;windows.h&gt;<br>#include&lt;stdio.h&gt;</p>
<p>&#x2F;&#x2F;调用函数<br>BOOL GrowPlant(DWORD BaseAddr, DWORD x, DWORD y, DWORD TypePlant) {<br>    LPVOID PlantFunc &#x3D; BaseAddr + 0x18D70;<br>    __asm {<br>        pushad<br>        push -1         &#x2F;&#x2F;-1<br>        push TypePlant   &#x2F;&#x2F;植物类型<br>        mov eax, y       &#x2F;&#x2F;y<br>        push x           &#x2F;&#x2F;x<br>        mov ecx, BaseAddr<br>        mov ecx, [ecx+0x355E0C]<br>        mov ecx, [ecx + 0x868]<br>        push ecx<br>        call PlantFunc<br>        popad<br>    }<br>    return TRUE;<br>}</p>
<p>BOOL GrowZombie(DWORD BaseAddr, DWORD x, DWORD y, DWORD ZombieType) {<br>    LPVOID PlantZombieFunc &#x3D; BaseAddr + 0x35390;<br>    __asm {<br>        pushad<br>        push x<br>        push ZombieType<br>        mov eax,y<br>        mov ecx,BaseAddr<br>        mov ecx,[ecx+0x355E0C]<br>        mov ecx,[ecx+0x868]<br>        mov ecx,[ecx+0x178]    &#x2F;&#x2F;ebp<br>        call PlantZombieFunc<br>        popad<br>    }<br>    return TRUE;<br>}</p>
<p>BOOL WINAPI DllMain(HMODULE hInstance, DWORD fdwReason, LPVOID lpReserved) {<br>    DWORD BaseAddr &#x3D; GetModuleHandle(NULL);<br>    DWORD pid &#x3D; GetCurrentProcessId();<br>    HANDLE hProcess &#x3D; OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid);</p>
<pre><code>switch (fdwReason)
&#123;
case DLL_PROCESS_ATTACH:    
    MessageBoxW(0, L&quot;ProcessAttachDll!&quot;, L&quot;window2&quot;, 0);

    GrowPlant(BaseAddr,5,3,23);        
    GrowZombie(BaseAddr, 6, 2, 23);

    break;
</code></pre>
<p>   &#x2F;* case DLL_THREAD_ATTACH:<br>        printf(“ThreadAttach!\n”);<br>        break;<br>    case DLL_THREAD_DETACH:<br>        if (lpReserved &#x3D;&#x3D; NULL)<br>        {<br>            FreeLibrary(hInstance);<br>        }<br>        break;*&#x2F;<br>    case DLL_PROCESS_DETACH:<br>        MessageBoxW(0, L”ProcessDeTachDll!”, L”window2”, 0);<br>        break;<br>    }<br>    return TRUE;<br>}</p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2022/11/18/%E6%A4%8D%E7%89%A9%E5%A4%A7%E6%88%98%E5%83%B5%E5%B0%B8%E4%BF%AE%E6%94%B9%E5%99%A8%E5%88%B6%E4%BD%9C/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="网络工程师-ospf详解" class="article article-type-网络工程师  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/2022/11/16/ospf%E8%AF%A6%E8%A7%A3/" target="_blank">ospf</a>
  
    </h1>
  


  
  
<a href="/2022/11/16/ospf%E8%AF%A6%E8%A7%A3/" class="archive-article-date">
        <time datetime="2022-11-15T16:01:03.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-11-16</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p>开放最短路径优先<br>Open Shortest Path First</p>
<p>开放最短路径优先，是一个开放标准的链路状态路由协议（an open-standard Link State routing protocol）。所有链路状态路由协议都是对链路状态进行通告。当链路状态路由器开始在某条网络链路上运作时，逻辑网络的相关信息就被添加到路由器的本地链路状态数据库(Link State Database, LSDB)中。该本地路由器此时在其运作链路上，发出Hello数据包，以确定出是否有其它链路状态路由器也在其各自接口上运行着链路状态路由协议。OSPF直接运行在 IP 协议上，使用 IP 下编号为89号的协议。</p>
<p>OSPF概述及基础知识<br>OSPF Overview and Fundamentals</p>
<p>人们为 OSPF 撰写了多个请求评议（Requests for Comments, RFCs)。在本小节，将通过一些 OSPF 有关的最常见的几个 RFCs ，来了解一下 OSPF 的历史。 OSPF 工作组成立于1987年，自成立以后，该工作组发布了为数众多的 RFCs 。下面列出了 OSPF 有关的一些最常见的 RFCs 。</p>
<p>RFC 1131 – OSPF规格，OSPF Specification<br>RFC 1584 – OSPF的多播扩展, Multicast Extensions to OSPF<br>RFC 1587 – OSPF的 NSSA 选项，the OSPF NSSA Option<br>RFC 1850 – OSPF版本2的管理信息库，OSPF Version 2 Management Informaiton Base<br>RFC 2328 – OSPF版本2<br>RFC 2740 – OSPF版本3<br>RFC 1131对 OSPF 的第一次迭代（the first iteration of OSPF）进行了说明, 而应用在明确该协议是否工作的早期测试中。</p>
<p>RFC 1584为 OSPF 提供了对 IP 多播流量的支持扩展。这通常被称为多播 OSPF （Multicast OSPF, MOSPF）。但该标准不常用到，而最重要的是思科不支持该标准。</p>
<p>RFC 1587 对一种 OSPF 的次末梢区域（Not-So-Stubby Area, NSSA）的运作方式进行了说明。 NSSA 允许通过一台自治系统边界路由器（an Autonomous System Boundary Router, ASBR）, 采用一条 NSSA 的外部LSA, 实现外部路由知识的注入（the injection of external routing knowledge）。在本模块的稍后会对不同的 NSSAs 进行说明。</p>
<p>RFC 1850实现了使用简单网络管理协议（Simple Network Management Protocol, SNMP）对 OSPF 的网络管理。在网络管理系统中， SNMP 用于监测接入网络设备中需要留心的一些情况。本标准的应用超出了 CCNA 考试要求范围，不会在本书中进行说明。</p>
<p>RFC 2328详细陈述了 OSPF 版本2的最新更新，而 OSPF 版本2正是现今在用的默认版本。 OSPF 版本2最初是在RFC 1247中进行说明的，该 RFC 解决了 OSPF 版本1初次发布中发现的一系列问题，并对该协议进行了修正，实现了未来修改不致产生出向后兼容问题。正因为如此， OSPF 版本2与版本1是不兼容的。</p>
<p>最后，RFC 2740说明了为支持 IPv6 而对 OSPF 做出的修改（也就是版本3）。应假定本模块中所有对 OSPF 一词的使用，都是指的 OSPF 版本2。</p>
<p>链路状态基础<br>Link State Fundamentals</p>
<p>当对某条特定链路(也就是接口）开启链路状态路由协议时，与那个网络有关的信息就被加入到本地 LSDB 中。该本地路由器此时就往其运作的各链路上发送Hello数据包，以确定有否其它链路状态路由器也在接口上运行着。Hello数据包用于邻居发现，并在邻居路由器之间维护邻接关系。本模块稍后部分会详细说明这些消息。</p>
<p>在找到一台邻居路由器后， 假定两台路由器在同一子网且位于同一区域，同时诸如认证方法及计时器等其它参数都是一致的（ identical ），那么本地路由器就尝试建立一个邻接关系（ adjacency ）。此邻接关系令到两台路由器将摘要的 LSDB 信息通告给对方。这种信息交换，交换的并非真实的详细数据库信息，而是数据的摘要。</p>
<p>各台路由器参照其本地 LSDB ，对收到的摘要信息做出评估，以确保其有着最新信息。如邻接关系的一侧认识到它需要一个更新，路由器就从邻接路由器请求新信息。而来自邻居路由器的更新就包含了 LSDB 中的具体数据。此交换过程持续到两台路由器都拥有同样的 LSDB 。 OSPF 用到不同类型的报文，以交换数据库信息，从而确保所有路由器都有着网络的统一视图。这些不同的数据包类型将在本模块稍后进行详细说明。</p>
<p>紧接着数据库的交换， SPF 算法就运行起来，创建出到某个区域或网络主干中所有主机的最短路径树, SPF算法将执行运算的路由器，作为该树的根（Following the database exchange, the SPF algorithm runs and creates a shortest path tree to all hosts in an area or in the network backbone, with the router that is performing the calculation at the root of that tree）。在第 10 天中，对 SPF 算法进行了简要介绍。</p>
<p>OSPF基础<br>OSPF Fundamentals</p>
<p>与 EIGRP 能够支持多个网络层协议不同， OSPF 只能支持 IP ，也就是 IPv4 和 IPv6 。和 EIGRP 相同的是， OSPF 支持 VLSM 、认证及在诸如以太网这样的多路访问（Multi-Access networks）网络上，于发送和接收更新时，利用 IP 多播技术（IP Multicast）。</p>
<p>OSPF是一种层次化的路由协议，将网络以逻辑方式，分为称作区域的众多子域。这种逻辑分段方法，用于限制链路状态通告在 OSPF 域中扩散的范围（OSPF is a hierarchical routing protocol that logically divides the network into subdomains referred to as areas. This logical segmentation is used to limit the scope of Link State Advertisements(LSAs) flooding throughout the OSPF domain）。 LSAs 是由运行 OSPF 的路由器发出的特殊类型数据包。在区域内和区域间用到不同类型的 LSAs 。通过限制一些类型的 LSAs 在区域间传播， OSPF 的层次化实现有效地减少了 OSPF 网络中路由协议流量的数量。</p>
<p>注意： OSPF的这些 LSAs 会在第 39 天详细说明。</p>
<p>在多区域 OSPF 网络中，必须指定一个区域作为骨干区域, 或者叫Area 0。OSPF骨干就是此 OSPF 网络的逻辑中心。其它非骨干区域都必须物理连接到骨干。但因为在非骨干区域和骨干区域之间有着一条物理连接，并非总是可能或可行的，所以 OSPF 标准允许使用到骨干的虚拟连接。这些虚拟连接也就是常说的虚拟链路，但此概念是不包括在当前的 CCNA 大纲中的（In a multi-area OSPF network, one area must be designated as the backbone area, or Area 0. The OSPF backbone is the logical centre of the OSPF network. All other non-backbone areas must be connected physically to the backbone. However, because it is not always possible or feasible to have a physical connection between a non-backbone area and the backbone, the OSPF standart allows the use of virtual connections to the backbone. These virtual connections are known as virtual links, but this concept is not included in the current CCNA syllabus）。</p>
<p>位处各区域中的路由器，都存储着其所在区域的详细拓扑信息。而在各区域中，一台或多台的路由器，又被作为区域边界路由器（Area Border Routers, ABRs），区域边界路由器通过在不同区域之间通告汇总路由信息，而促进区域间的路由（facilitate inter-area routing by advertising summarised routing informaiton between the differenct areas）。本功能实现 OSPF 网络中的以下几个目标。</p>
<p>在 OSPF 域层面减小 LSAs 的扩散范围, Reduces the scope of LSAs flooding throughout the OSPF domain<br>在区域之间隐藏详细拓扑信息, Hides detailed topology informaiton between areas<br>OSPF域中端到端连通性的实现, Allows for end-to-end connectivity within the OSPF domain<br>在 OSPF 域内部创建逻辑边界, Creates logical boundaries within the OSPF domain<br>注意： 尽管 ICND1 大纲仅涉及到单区域 OSPF （single-area OSPF）, 但为把大部分理论纳入讨论背景，有必要说一下多区域 OSPF （multi-area OSPF）。</p>
<p>OSPF骨干区域从 ABRs 接收到汇总路由信息。该路由信息被散布到 OSPF 网络中的所有其它非骨干区域。在网络拓扑发生变化时，变化信息就被散布到整个的 OSPF 域，令到所有区域中的所有路由器都有着网络的统一视图（The OSPF backbone area receives summarised routing informaiton from the ABRs. The routing informaiton is disseminated to all other non-backbone areas within the OSPF network. When a change to the network topology occurs, this informaiton is disseminated throughout the entire OSPF domain, allowing all routers in all areas to have a consistent view of the network）。下图12.1演示的网络拓扑，就是一个多区域 OSPF 部署的示例。</p>
<p>一个多区域 OSPF 网络</p>
<p>图12.1 – 一个多区域 OSPF 网络</p>
<p>图12.1演示了一个基本的多区域 OSPF 网络。1、2号区域连接到0号区域，也就是 OSPF 骨干上。1号区域中，路由器R1、R2和R3交换着区域内（intra-area）路由信息，并维护着那个区域的详细拓扑。R3作为 ABR ，生成一条区域间汇总路由（an inter-area summary route）, 并将该路由通告给 OSPF 骨干。</p>
<p>R4，也就是2号区域的 ABR ，从0号区域接收到R3通告出的汇总信息，并将其扩散到其邻接区域。这样做就令到R5和R6知悉位处其本地区域外、但仍在 OSPF 域内的那些路由了。同样概念也适用于2号区域内的路由信息（R4, the ABR for Area 2, receives the summary informaiton from Area 0 and floods it into its adjacent area. This allows routers R5 and R6 to know of the routes that reside outside of their local area but within the OSPF domain. The same concept would also be applicable to the routing informaiton within Area 2）。</p>
<p>总的来讲， ABRs 都维护着所有其各自连接区域的 LSDB 信息。而各个区域中的所有路由器，都有着属于其特定区域的详细拓扑信息。这些路由器交换着区域内的路由信息。 ABRs 则将所连接区域的汇总信息通告给其它 OSPF 区域，以实现域内各子域（区域）间的路由（In summation, the ABRs maintain LSDB informaiton for all the areas in which they are connected. All routers within each area have detailed topology informaiton pertaining to that specific area. These routers exchange intra-area routing informaiton. The ABRs advertise summary informaiton from each of their connected areas to other OSPF areas, allowing inter-area routing within the domain）。</p>
<p>注意： 本书后面会详细说明OSPF ABRs及其它 OSPF 路由器类型。</p>
<p>组网类型<br>Network Types</p>
<p>对不同传输介质， OSPF 采用不同默认组网类型，有下面这些:</p>
<p>非广播组网（在多点非广播多路复用传输介质上，也就是 FR 和ATM, 默认采用此种组网类型， Non-Broadcast，default on Multipoint Non-Broadcast Multi-Access(FR and ATM)）<br>点对点组网（在 HDLC 、 PPP 、 FR 及 ATM 的 P2P 子接口，以及 ISDN 介质上，默认采用此种组网类型， Point-to-Point，default on HDLC, PPP, P2P subinterface on FR and ATM, and ISDN）<br>广播组网（在以太网和令牌环介质上，默认采用此种组网类型， Broadcast，default on Ethernet and Token Ring）<br>点对多点组网（Point-to-Multipoint）<br>环回组网（默认在环回接口上采用此种组网类型， Loopback，default on Loopback interfaces）<br>非广播网络是指那些没有原生的广播或多播流量支持的网络类型。非广播类型网络的最常见实例就是帧中继网络。非广播类型网络需要额外配置，以实现广播和多播支持。在这种网络上， OSPF 选举出一台指定路由器(a Designate Router, DR), 及&#x2F;或一台备用指定路由器（a Backup Designated Router, BDR）。在本书后面会对这两台路由器进行说明。</p>
<p>思科 IOS 软件中，非广播类型网络上开启了 OSPF 的路由器，默认每30秒发出Hello数据包。若4个Hello间隔，也就是120秒中都没有收到Hello数据包，那么该邻居路由器就被认为是“死了”。下面的输出演示了在一个帧中继串行接口上show ip ospf interface命令的输出。</p>
<p>R2#show ip ospf interface Serial0&#x2F;0<br>Serial0&#x2F;0 is up, line protocol is up<br>    Internet Address 150.1.1.2&#x2F;24, Area 0<br>    Process ID 2, Router ID 2.2.2.2, Network Type NON_BROADCAST, Cost: 64<br>    Transmit Delay is 1 sec, State DR, Priority 1<br>    Designated Router (ID) 2.2.2.2, Interface address 150.1.1.2<br>    Backup Designated Router (ID) 1.1.1.1, Interface address 150.1.1.1<br>    Timer intervals configured, Hello 30, Dead 120, Wait 120, Retransmit 5<br>        oob-resync timeout 120<br>        Hello due in 00:00:00<br>    Supports Link-local Signaling (LLS)<br>    Index 2&#x2F;2, flood queue length 0<br>    Next 0x0(0)&#x2F;0x0(0)<br>    Last flood scan length is 2, maximum is 2<br>    Last flood scan time is 0 msec, maximum is 0 msec<br>    Neighbor Count is 1, Adjacent neighbor count is 1<br>        Adjacent with neighbor 1.1.1.1 (Backup Designated Router)<br>    Suppress Hello for 0 neighbor(s)<br>一条点对点连接, 简单来说就是一条两个端点之间的连接。 P2P 连接的实例，包括采用 HDLC 及 PPP 封装的物理 WAN 接口，以及 FR 和 ATM 的点对点子接口。OSPF点对点组网类型中，不会选举出 DR 和BDR。在 P2P 类型网络上， OSPF 每10秒发出Hello数据包。在这些网络上，”死亡“间隔是Hello间隔的4倍，也就是40秒（A Point-to-Point(P2P) connection is simply a connection between two endpoints only. Examples of P2P connections include physical WAN interfaces using HDLC and PPP encapsulation, and Frame Relay(FR) and Asynchronous Transfer Mode(ATM) Point-to-Point subinterfaces. No DR or BDR is elected on OSPF Point-to-Point network types. By default, OSPF sends Hello packets out every 10 seconds on P2P network types. The “dead” interval on these network types is four times the Hello interval, which is 40 seconds）。下面的输出演示了在一条 P2P 链路上的show ip ospf interface命令的输出。</p>
<p>R2#show ip ospf interface Serial0&#x2F;0<br>Serial0&#x2F;0 is up, line protocol is up<br>    Internet Address 150.1.1.2&#x2F;24, Area 0<br>    Process ID 2, Router ID 2.2.2.2, Network Type POINT_TO_POINT, Cost: 64<br>    Transmit Delay is 1 sec, State POINT_TO_POINT<br>    Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5<br>        oob-resync timeout 40<br>        Hello due in 00:00:03<br>    Supports Link-local Signaling (LLS)<br>    Index 2&#x2F;2, flood queue length 0<br>    Next 0x0(0)&#x2F;0x0(0)<br>    Last flood scan length is 1, maximum is 1<br>    Last flood scan time is 0 msec, maximum is 0 msec<br>    Neighbor Count is 1, Adjacent neighbor count is 1<br>        Adjacent with neighbor 1.1.1.1<br>    Suppress Hello for 0 neighbor(s)<br>广播类型网络，是指那些原生支持广播和多播流量的网络，最常见例子就是以太网。就如同在非广播网络中一样， OSPF 也会在广播网络上选举一台 DR 及&#x2F;或 BDR 。默认情况下， OSPF 每隔10秒发出Hello数据包，而如在4倍 Hello 间隔中没有收到Hello数据包，就宣告邻居”死亡“。下面的输出演示了在一个FastEthernet接口上show ip ospf interface命令的输出。</p>
<p>R2#show ip ospf interface FastEthernet0&#x2F;0<br>FastEthernet0&#x2F;0 is up, line protocol is up<br>    Internet Address 192.168.1.2&#x2F;24, Area 0<br>    Process ID 2, Router ID 2.2.2.2, Network Type BROADCAST, Cost: 64<br>    Transmit Delay is 1 sec, State BDR, Priority 1<br>    Designated Router (ID) 192.168.1.3, Interface address 192.168.1.3<br>    Backup Designated Router (ID) 2.2.2.2, Interface address 192.168.1.2<br>    Timer intervals configured, Hello 10, Dead 40, Wait 40, Retransmit 5<br>        oob-resync timeout 40<br>        Hello due in 00:00:04<br>    Supports Link-local Signaling (LLS)<br>    Index 1&#x2F;1, flood queue length 0<br>    Next 0x0(0)&#x2F;0x0(0)<br>    Last flood scan length is 1, maximum is 1<br>    Last flood scan time is 0 msec, maximum is 0 msec<br>    Neighbor Count is 1, Adjacent neighbor count is 1<br>        Adjacent with neighbor 192.168.1.3 (Designated Router)<br>    Suppress Hello for 0 neighbor(s)<br>点对多点是一种非默认 OSPF 组网类型。也就是说，此种组网类型必须使用接口配置命令ip ospf network point-to-point-multicast [non-broadcast]手动进行配置。默认情况下，该命令默认应用于一个广播型点对多点类型网络的。此默认组网类型允许 OSPF 采用多播数据包来动态地发现其邻居路由器。此外在广播型点对多点网络类型上，不进行DR&#x2F;BDR选举（Point-to-Multipoint is a non-default OSPF network type. In other words, this network type must be configured manually using the ip ospf network point-to-multipoint [non-broadcast] interface configuration command. By default, this command defaults to a Broadcast Point-to-Multipoint network type. This default network type allows OSPF to use Multicast packets to discover its neighbour routers. In addition, there is no DR&#x2F;BDR election held on Broadcast Point-to-Multipoint network types）。</p>
<p>关键字[non-broadcast]将点对多点网络配置为非广播点对多点网络。这样做就要求静态的 OSPF 邻居配置，因为此时 OSPF 不会使用多播来动态地发现其邻居路由器。此外，这种网络类型不要求为指定网段进行 DR 及&#x2F;或 BDR 选举。此种组网的主要用途，即允许分配邻居开销到邻居路由器，而非使用指定给接口的开销，作为那些自所有邻居处收到的路由的开销（The [non-broadcast] keyword configures the Point-to-Multipoint network type as a Non-Broadcast Point-to-Multipoint network. This requires static OSPF neighbour configuration, as OSPF will not use Multicast to discover dynamically its neighbour routers. Additionally, this network type does not require the election of a DR and&#x2F;or a BDR router for the designated segment. The primary use of this network type is to allow neighbor costs to be assigned to neighbors instead of using the interface-assigned cost for routes received from all neighbors）。</p>
<p>点对多点组网类型，典型地用于部分全通辐射状非广播多路访问网络。不过此种组网类型也可指定给诸如广播多路访问网络（比如以太网）等的其它类型网络（The Point-to-Multipoint network type is typically used in partial-mesh hub-and-spoke Non-Broadcast Multi-Access(NBMA) networks. However, this network type can also be specified for other networks, such as Broadcast Multi-Access networks(e.g., Ethernet)）。默认情况下，在点对多点网络上， OSPF 每30秒发出一个Hello数据包。默认死亡间隔是Hello间隔的4倍，也就是120秒。</p>
<p>下面的输出演示了在一个经手动配置为点对多点网络的帧中继串行接口上的show ip ospf interface命令的输出。</p>
<p>R2#show ip ospf interface Serial0&#x2F;0<br>Serial0&#x2F;0 is up, line protocol is up<br>    Internet Address 150.1.1.2&#x2F;24, Area 0<br>    Process ID 2, Router ID 2.2.2.2, Network Type POINT_TO_MULTIPOINT, Cost: 64<br>    Transmit Delay is 1 sec, State POINT_TO_MULTIPOINT<br>    Timer intervals configured, Hello 30, Dead 120, Wait 120, Retransmit 5<br>        oob-resync timeout 120<br>        Hello due in 00:00:04<br>    Supports Link-local Signaling (LLS)<br>    Index 2&#x2F;2, flood queue length 0<br>    Next 0x0(0)&#x2F;0x0(0)<br>    Last flood scan length is 1, maximum is 2<br>    Last flood scan time is 0 msec, maximum is 0 msec<br>    Neighbor Count is 1, Adjacent neighbor count is 1<br>        Adjacent with neighbor 1.1.1.1<br>    Suppress Hello for 0 neighbor(s)<br>OSPF要求链路上两台路由器组网类型一致（一致的意思是两台路由器要么都进行选举要么都不进行选举）的主要原因在于计时器的数值。就像上面各个输出中演示的那样，不同组网类型采用了不同Hello数据包发送及死亡计时器间隔。为成功建立一个 OSPF 邻接关系，在两台路由器上这些数值必须匹配。</p>
<p>思科 IOS 软件允许通过使用接口配置命令ip ospf hello-interval &lt;1-65535&gt;及ip ospf dead-interval [&lt;1-65535&gt;|minimal]，对默认OSPF Hello数据包及死亡计时器进行修改。ip ospf hell0-interval &lt;1-65535&gt;命令用于指定Hello间隔的秒数。在执行该命令后，软件会自动将死亡间隔配置为所配置的Hello包间隔的4倍。比如，假定某台路由器做了如下配置。</p>
<p>R2(config)#interface Serial0&#x2F;0<br>R2(config-if)#ip ospf hello-interval 1<br>R2(config-if)#exit<br>通过在上面的R2上将Hello数据包间隔设置为1, 思科 IOS 软件就会自动的将默认死亡计时器调整为Hello间隔的4倍，就是4秒。下面的输出对此进行了演示。</p>
<p>R2#show ip ospf interface Serial0&#x2F;0<br>Serial0&#x2F;0 is up, line protocol is up<br>    Internet Address 10.0.2.4&#x2F;24, Area 2<br>    Process ID 4, Router ID 4.4.4.4, Network Type POINT_TO_POINT, Cost: 64<br>    Transmit Delay is 1 sec, State POINT_TO_POINT<br>    Timer intervals configured, Hello 1, Dead 4, Wait 4, Retransmit 5<br>        oob-resync timeout 40<br>        Hello due in 00:00:00<br>…<br>[Truncated Output]<br>配置OSPF<br>OSPF Configuration</p>
<p>本节对 OSPF 配置基础进行说明。</p>
<p>在思科 IOS 软件中开启OSPF<br>Enabling OSPF in Cisco IOS Software</p>
<p>在思科 IOS 软件中，通过使用全局配置命令router ospf [process id]开启 OSPF 。关键字[process id]是本地有效的(locally sinificant)，邻接关系的建立无需网络中所有路由器的进程号一致。运用本地有效的进程号，允许在同一台路由器上配置多个 OSPF 实例。</p>
<p>OSPF进程号是一个1与65535之间的整数。每个 OSPF 进程都维护着其独立链路状态数据库（ LSDB ）；但是，所有路由都放进的是同一 IP 路由表。也就是说，对配置在路由器上的各个单独 OSPF 进程，并没有各自唯一的 IP 路由表。</p>
<p>在思科 IOS 软件早期版本中，如路由器上没有至少一个的接口配置了有效 IP 地址且处于up&#x2F;up状态，就无法开启 OSPF 。此限制在当前版本思科 IOS 软件中去除了。假如路由器没有接口配置了有效 IP 地址且处于up&#x2F;up状态，那么思科 IOS 将创建出一个接近数据库（a Proximity Database, PDB）并允许创建出进程。但是，要记住除非选定路由器 ID ，该进程就是非活动的进程，而路由器 ID 的选定，可通过下面两种方式完成。</p>
<p>在某个接口上配置一个有效 IP 地址，并将该接口开启<br>使用命令router-id为该路由器手动配置一个 ID （见下）<br>作为一个例子，看看下面的所有接口都关闭的路由器。</p>
<p>R3#show ip interface brief<br>Interface		IP-Address	OK?	Method	Status					Protocol<br>FastEthernet0&#x2F;0	unassigned	YES	manual	administratively down	down<br>Serial0&#x2F;0		unassigned	YES	NVRAM	administratively down	down<br>Serial0&#x2F;1		unassigned	YES	unset	administratively down	down<br>接着，使用全局配置命令router ospf [process id]在该路由器上开启了 OSPF ， 如下面输出所示。</p>
<p>R3(config)#router ospf 1<br>R3(config-router)#exit<br>基于此配置，思科 IOS 软件分配给该进程一个默认0.0.0.0的路由器 ID ，如下面show ip protocols命令的输出所示。</p>
<p>R3#show ip protocols<br>Routing Protocol is “ospf 1”<br>    Outgoing update filter list for all interfaces is not set<br>    Incoming update filter list for all interfaces is not set<br>    Router ID 0.0.0.0<br>    Number of areas in this router is 0. 0 normal 0 stub 0 nssa<br>    Maximum path: 4<br>    Routing for Networks:<br>Reference bandwidth unit is 100 mbps<br>    Routing Information Sources:<br>      Gateway	Distance	Last Update<br>    Distance: (default is 110)<br>但是，命令show ip ospf [process id]揭示出该进程实际上并不是活动的，且表明需要配置一个路由器 ID ， 其输出如下面所示。</p>
<p>R3#show ip ospf 1<br>%OSPF: Router process 1 is not running, please configure a router-id<br>开启接口或网络的 OSPF 路由<br>Enabling OSPF Routing for Interfaces or Networks</p>
<p>在开启 OSPF 后，就可以执行两个操作，来为路由器上一个或更多的网络或接口开启 OSPF 路由。这两个操作如下。</p>
<p>使用路由器配置命令(router configuration command)[network] [wildcard] area [area id]<br>使用接口配置命令ip ospf [process id] area [area id]<br>与 EIGRP 不同， OSPF 强制使用反掩码且必须配置反掩码; 但与在 EIGRP 中的情况一样，反掩码提供了同样的功能，也就是匹配指定范围中的接口（unlike EIGRP, the wildcard is mandatory in OSPF and must be configured; however, as is the case with EIGRP, it serves the same function in that it matches interfaces within the range specified）。比如，语句network 10.0.0.0 0.255.255.255 area 0，就会对10.0.0.1&#x2F;30、10.5.5.1&#x2F;24, 甚至10.10.10.1&#x2F;25这样的 IP 地址和子网掩码组合的接口，开启 OSPF 路由。基于该 OSPF 网络配置，这些接口都会被分配到 0 号区域。</p>
<p>注意： OSPF反掩码可以与传统子网掩码同样格式敲入，比如network 10.0.0.0 255.0.0.0 area 0。在这种情况下，思科 IOS 软件就会将子网掩码翻转，将得到的反掩码输入到运行配置（the running configuration）。另外要记住OSPF也支持使用全 1s 和全 0s 反掩码，来对某个指定接口开启OSPF。这样的配置在某个特定接口上开启 OSPF ，但路由器通告配置在该接口自身的实际子网掩码（this configuration enables OSPF on a paricular interface but the router advertises the actual subnet mask configured on the interface itself）。</p>
<p>在执行了network [network] [wildcast] area [area id]命令后，路由器就在与指定网络和反掩码组合匹配的那些接口上发出Hello数据包，来尝试发现邻居路由器。接着在 OSPF 数据库交换期间，将连接子网通告给一台或更多的邻居路由器，最终，它们将所有子网信息都被加入到这些 OSPF 路由器的 OSPF 链路状态数据库（OSPF LSDB）中。</p>
<p>在命令network [network] [wildcard] area [area id]之后，路由器又对最具体条目做出匹配，以决定将接口要分配给的区域。作为实例，想想下面这些 OSPF 网络语句。</p>
<p>第一条网络配置语句：network 10.0.0.0 0.255.255.255 area 0<br>第二条：network 10.1.0.0 0.0.255.255 area 1<br>第三条：network 10.1.1.0 0.0.0.255 area 2<br>第四条：network 10.1.1.1 0.0.0.0 area 3<br>第五条：network 0.0.0.0 0.0.0.0 area 4<br>按照路由器上的此种配置，同时路由器上又配置了如下表12.1中展示的这些环回接口。</p>
<p>接口	IP地址&#x2F;掩码<br><code>Loopback 0</code>	<code>10.0.0.1/32</code><br><code>Loopback 1</code>	<code>10.0.1.1/32</code><br><code>Loopback 2</code>	<code>10.1.0.1/32</code><br><code>Loopback 3</code>	<code>10.1.1.1/32</code><br><code>Loopback 4</code>	<code>10.2.0.1/32</code><br>就像前面指出的那样，在执行了network [network] [wildcard] area [area id]命令后，路由器匹配最具体的网络条目（最小的网络），来决定该接口应分配到的区域。对于在路由器上的网络配置语句及已配置的接口，命令show ip ospf interface brief会显示出这些接口都分配给了以下 OSPF 区域。</p>
<p>R1#show ip ospf interface brief<br>Interface	PID	Area	IP Address&#x2F;Mask	Cost	State	Nbrs F&#x2F;C<br>Lo4			1	0		10.2.0.1&#x2F;32		1		LOOP	0&#x2F;0<br>Lo1			1	0		10.0.1.1&#x2F;32		1		LOOP	0&#x2F;0<br>Lo0			1	0 		10.0.0.1&#x2F;32 	1 		LOOP	0&#x2F;0<br>Lo2 		1 	1 		10.1.0.1&#x2F;32 	1 		LOOP	0&#x2F;0<br>Lo3 		1 	3 		10.1.1.1&#x2F;32 	1 		LOOP	0&#x2F;0<br>注意： 在运行配置（the running configuration）中，无需考虑网络语句敲入顺序，路由器的show running-config输出中最具体的网络条目，始终列在前面。</p>
<p>接口配置命令ip ospf [process id] area [area id]令到无需使用路由器配置命令network [network] [wildcard] area [area id]。该命令对某个指定接口开启 OSPF 路由，同时将该接口分配给指定 OSPF 区域。这两个命令完成同样的基本功能，且可互换使用。</p>
<p>此外，比如有两台路由器是背靠背连接（connected back-to-back），一台使用接口配置命令ip ospf [process id] area [area id]进行了配置，而其邻居路由器使用路由器配置命令network [network] [wildcard] area [area id]进行了配置，假设两个区域 IDs 相同，那么两台路由器将成功建立 OSPF 邻接关系。</p>
<p>OSPF区域<br>OSPF Areas</p>
<p>OSPF区域号既可以配置为一个0到4294967295之间的整数，也可使用点分十进制表示法（也就是采用 IP 地址格式）。与 OSPF 进程号不同，为建立邻接关系， OSPF 区域号必须匹配。最常见 OSPF 区域配置类型为使用一个整数来指定 OSPF 区域。确保对支持的两种区域配置方式都要熟悉。</p>
<p>OSPF路由器ID<br>OSPF Router ID</p>
<p>为令到 OSPF 在某个网络上运行起来，所有路由器都必须有个唯一身份编号（a unique identifying number），且在 OSPF 环境下要用到路由器 ID 。</p>
<p>在决定 OSPF 路由器 ID 时，思科 IOS 选用所配置环回接口中最高的 IP 地址。如未曾配置环回接口，软件就会使用所有配置的物理接口中最高的 IP 地址，来作为 0SPF 路由器 ID 。思科 IOS 软件同样允许管理员使用路由器配置命令router-id [address], 来手动指定路由器 ID 。</p>
<p>环回接口极为有用，特别是在测试当中，因为它们无需硬件且是逻辑的，因此绝不会宕掉。</p>
<p>在下面的路由器上，给Loopback0配置了 IP 地址1.1.1.1&#x2F;32, 给F0&#x2F;0配置了2.2.2.2&#x2F;24。接着在路由器上给所有接口配置了 OSPF 。</p>
<p>Router(config-if)#router ospf 1<br>Router(config-router)#net 0.0.0.0 255.255.255.255 area 0<br>Router(config-router)#end<br>Router#<br>%SYS-5-CONFIG_I: Configured from console by console<br>Router#show ip protocols<br>Routing Protocol is “ospf 1”<br>    Outgoing update filter list for all interfaces is not set<br>    Incoming update filter list for all interfaces is not set<br>    Router ID 1.1.1.1<br>    Number of areas in this router is 1. 1 normal 0 stub 0 nssa<br>    Maximum path: 4<br>    Routing for Networks:<br>        0.0.0.0 255.255.255.255 area 0<br>    Routing Information Sources:<br>    Gateway 	Distance	Last Update<br>    1.1.1.1 	     110	00:00:14<br>    Distance: (default is 110)<br>但又想要将路由器 ID 硬编码（hard code）为10.10.10.1。那么可通过再配置一个使用该 IP 地址的环回接口，或简单地将这个 IP 地址加在 OSPF 路由器 ID 处。为令到改变生效，必须重启路由器或在路由器上清除该IP OSPF进程（清除现有数据库）。</p>
<p>Router#conf t<br>Enter configuration commands, one per line.<br>End with CNTL&#x2F;Z.<br>Router(config)#router ospf 1<br>Router(config-router)#router-id 10.10.10.1<br>Router(config-router)#Reload or use “clear ip ospf process” command, for this to take effect<br>Router(config-router)#end<br>Router#<br>%SYS-5-CONFIG_I: Configured from console by console<br>Router#clear ip ospf process<br>Reset ALL OSPF processes? [no]: yes<br>Router#show ip prot<br>Routing Protocol is “ospf 1”<br>    Outgoing update filter list for all interfaces is not set<br>    Incoming update filter list for all interfaces is not set<br>    Router ID 10.10.10.1<br>    Number of areas in this router is 1. 1 normal 0 stub 0 nssa<br>    Maximum path: 4<br>    Routing for Networks:<br>        0.0.0.0 255.255.255.255 area 0<br>    Routing Information Sources:<br>    Gateway 	Distance	Last Update<br>    1.1.1.1 	     110	00:03:15<br>Distance: (default is 110)<br>到第39天，DR和 BDR 选举时，就将看到这个路由器 ID 有着特别的重要性。</p>
<p>OSPF被动接口<br>OSPF Passive Interfaces</p>
<p>被动接口可被描述成在其上没有路由更新发出的接口。在思科 IOS 软件中，通过使用路由器配置命令passive-interface [name], 将某接口配置为被动接口。如路由器上有多个接口需要配置为被动接口，就应使用<strong>passive-interface default这个路由器配置命令</strong>。此命令将路由器上那些位处所配置网络范围内的所有接口，都配置为被动模式。而那些需要允许在其上形成邻接关系或邻居关系的接口，就应使用路由器配置命令no passive-interface [name]对其进行配置。</p>
<p>被动接口配置在 OSPF 和 EIGRP 中的工作方式是一样的，也就是一旦某接口被标记为被动接口，经由该接口形成的所有邻居关系都会被拆除，同时 再也不会通过该接口发送或接收Hello数据包了。不过，根据路由器上所配置的网络配置语句，该接口仍然会继续受通告。</p>
<p>Router(config)#router ospf 10<br>Router(config-router)#passive-interface f0&#x2F;0<br>Router#show ip ospf int f0&#x2F;0<br>FastEthernet0&#x2F;0 is up, line protocol is up<br>    Internet address is 192.168.1.1&#x2F;24, Area 0<br>    Process ID 10,Router ID 172.16.1.1,Network Type BROADCAST, Cost: 1<br>    Transmit Delay is 1 sec, State WAITING, Priority 1<br>    No designated router on this network<br>    No backup designated router on this network<br>    Timer intervals configured,Hello 10, Dead 40, Wait 40,Retransmit 5<br>        No Hellos (Passive interface)<br>第 12 天问题<br>What protocol does OSPF use?<br>How does OSPF determine whether other Link State routers are operating on the interfaces as well?<br>When a _______ routing protocol is enabled for a particular link, information associated with that network is added to the local Link State Database (LSDB).<br>OSPF utilises IP Multicast when sending and receiving updates on Multi-Access networks, such as Ethernet. True or false?<br>OSPF is a hierarchical routing protocol that logically divides the network into subdomains referred to as _______.<br>Name at least 4 OSPF network types.<br>Name the command used to enter OSPF configuration mode.<br>When determining the OSPF router ID, Cisco IOS selects the lowest IP address of the configured Loopback interfaces. True or false?<br>What command can you use to assign an interface to OSPF Area 2 (interface level command)?<br>_______ can be described as interfaces over which no routing updates are sent.<br>##第 12 天答案</p>
<p>IP number 89.<br>By sending Hello packets.<br>Link State.<br>True.<br>Areas.<br>Non-Broadcast, Point-to-Point, Broadcast, Point-to-Multipoint, Point-to-Multipoint Non-Broadcast, and Loopback.<br>The router ospf <id> command.<br>False.<br>The ip ospf <id> area 2<br>Passive.<br>##第 12 天实验</p>
<p>###OSPF基础实验</p>
<p>沿用第10天的实验场景（两台直接连接的路由器，各自其上的环回接口），但取代配置 RIP 及对物理和环回接口进行通告的是，使用OSPF 0号区域实现（but instead of configuring RIP and advertising the physical and Loopback interfaces, do this using OSPF Area 0）。</p>
<p>分配一个 IPv4 地址给直接连接的接口（10.10.10.1&#x2F;24及10.10.10.2&#x2F;24）<br>运用ping操作，测试直接连通性<br>分别在两台路由器上配置一个环回接口，并自两个不同范围为其分配上地址（11.11.11.1&#x2F;32及12.12.12.2&#x2F;32）<br>配置上标准OSPF 1号进程，并在0号区域中通告所有本地网络。同时为两台设备配置一个路由器 ID 。<br>R1:</p>
<p>router ospf 1<br>router-id 1.1.1.1<br>network 10.10.10.0 0.0.0.255 area 0<br>network 11.11.11.1 0.0.0.0 area 0<br>R2:</p>
<p>router ospf 1<br>router-id 2.2.2.2<br>network 10.10.10.0 0.0.0.255 area 0<br>network 12.12.12.2 0.0.0.0 area 0<br>自R1向R2的环回接口执行 ping 操作，以测试连通性<br>执行一条show ip route命令，来验证有通过 OSPF 接收到路由<br>执行一条show ip protocols命令，来验证有配置 OSPF 且在设备上是活动的<br>坚持特定于 OSPF 的接口参数：show ip ospf interface及show ip ospf interface brief<br>在两台路由器上（直接连接接口）修改 OSPF 的 Hello 包和死亡计时器：ip ospf hello及ip ospf dead<br>执行一下show ip ospf 1命令，看看路由进程参数<br>重复该实验，但这次使用ip ospf 1 area 0 interface specific命令，而不是在router OSPF 下的network命令，对各个网络进行通告。</p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2022/11/16/ospf%E8%AF%A6%E8%A7%A3/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="网络工程师-静态路由" class="article article-type-网络工程师  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/2022/11/14/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/" target="_blank">静态路由</a>
  
    </h1>
  


  
  
<a href="/2022/11/14/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/" class="archive-article-date">
        <time datetime="2022-11-13T16:01:03.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-11-14</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p>静态路由配置<br>Configuring Static Routes</p>
<p>配置一条静态路由（见下图11.1）需要以下这些命令。</p>
<p>network address&#x2F;prefix mask<br>address or exit interface<br>distance (optional)<br>这里是一个这些命令使用的实例。</p>
<p>RouterA(config)#ip route network prefix mask {address | interface} [distance]</p>
<p>静态路由示例网络</p>
<p><img src="https://ccna60d.xfoss.com/images/1101.png"><br>图11.1 – 静态路由示例网络</p>
<p>要加入上面网络的一条静态路由，就要在左边的路由器上写出下面这行配置。</p>
<p>Router(config)#ip route 192.168.1.0 255.255.255.0 172.16.1.2<br>对静态路由，需要指定在前往目的地址的路途上，路由器需要去往的下一跳 IP 地址，或者也可以指定一个出去的接口。通常不需要知道下一跳地址，因为那就是 ISP ，或者 IP 地址会随时变化（见下图11.2）。如果是这样，就要使用出去的接口。</p>
<p>不总是知道下一跳地址的情形</p>
<p><img src="https://ccna60d.xfoss.com/images/1102.png"><br>图11.2 – 不总是知道下一跳地址的情形</p>
<p>Router(config)#ip route 192.168.1.0 255.255.255.0 s0&#x2F;0<br>上面的命令行告诉路由器将目的为192.168.1.10网络的流量，从串行接口发出。而下面的命令则是告诉路由器将所有网络的所有流量，都从串行接口发出。</p>
<p>Router(config)#ip route 0.0.0.0 0.0.0.0 s0&#x2F;0<br>上面的路由实际上就是一条默认路由（a default route）。默认路由用于引导那些未在路由表中显式列出的目的网络的数据包。</p>
<p>静态 IPv6 路由的配置<br>Configuring Static IPv6 Routes</p>
<p>静态 IPv6 路由的配置，与静态 IPv4 路由的配置遵循同样的逻辑。在思科 IOS 软件中，全局配置命令ipv6 route [ipv6-prefix&#x2F;prefix-length] [next-hop-address | interface] [distance &lt;1-254&gt; | multicast | tag | unicast]用于配置静态 IPv6 路由。当中的一些关键字是熟悉的，因为它们也适用于 IPv4 静态路由，而[multicast]关键字则是 IPv6 所独有的，用于配置一条 IPv6 静态多播路由(an IPv6 static Multicast route)。如用到此关键字，该路由就不会进到单薄路由表（the Unicast routing table），同时也绝不会用于转发单播流量。为确保该路由绝不会安装到单播路由信息库（the Unicast RIB）, 思科 IOS 软件将该条路由<strong>（静态多播路由）的管理距离设置为255</strong>。</p>
<p>相反，[unicast]关键字则是用于配置一条 IPv6 静态单播路由。如用到此关键字，该条路由就绝不会进入到多播路由表（the Multicast routing table）, 并仅被用于转发单播流量。而既没用到[multicast]关键字，也没用到[unicast]关键字时，默认情况下，该条路由机会用于单播数据包的转发，也会用于多播数据包的转发。</p>
<p>以下的配置示例，演示了如何来配置3条静态 IPv6 路由。第一条路由，到子网3FFF:1234:ABCD:0001::&#x2F;64, 会将流量从FastEthernet0&#x2F;0转发出去。此路由仅用于单播流量的转发。第二条路由，到子网3FFF:1234:ABCD:0002::&#x2F;64, 会将到那个子网的数据包从Serial0&#x2F;0，使用下一跳路由器的数据链路层地址，作为 IPv6 的下一跳地址转发出去。本条路由仅会用于多播流量。最后，同样配置了一条指向Serial0&#x2F;1作为出口接口的默认路由。此默认路由将会通过Serial0&#x2F;1, 使用下一跳路由器的本地链路地址作为 IPv6 下一跳地址，转发那些到未知 IPv6 目的地址的数据包。这些路由如下面所示。</p>
<p>R1(config)#ipv6 route 3FFF:1234:ABCD:0001::&#x2F;64 Fa0&#x2F;0 unicast<br>R1(config)#ipv6 route 3FFF:1234:ABCD:0002::&#x2F;64 Se0&#x2F;0 FE80::2222 multicast<br>R1(config)#ipv6 route ::&#x2F;0 Serial0&#x2F;1 FE80::3333<br>依此配置，命令show ipv6 route可用于验证在本地路由器上应用的静态路由配置，如下所示。</p>
<p>R1#show ipv6 route static<br>IPv6 Routing Table - 13 entries<br>Codes: 	C - Connected, L - Local, S - Static, R - RIP, B - BGP<br>        U - Per-user static route<br>        I1 - ISIS L1, I2 - ISIS L2, IA - ISIS inter area, IS - ISIS summary<br>        O - OSPF intra, OI - OSPF inter, OE1 - OSPF ext 1, OE2 - OSPF ext 2<br>        ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2<br>S	::&#x2F;0 [1&#x2F;0]<br>     via FE80::3333, Serial0&#x2F;1<br>S	3FFF:1234:ABCD:1::&#x2F;64 [1&#x2F;0]<br>     via ::, FastEthernet0&#x2F;0<br>S	3FFF:1234:ABCD:2::&#x2F;64 [1&#x2F;0]<br>     via FE80::2222, Serial0&#x2F;0<br>除了使用show ipv6 route命令外，命令show ipv6 static [prefix] [detail]也可一用来对所有或仅是某条特定静态路由的细节信息进行查看。下面输出演示了如何使用这个命令。</p>
<p>R1#show ipv6 static 3FFF:1234:ABCD:1::&#x2F;64 detail<br>IPv6 static routes<br>Code: * - installed in RIB</p>
<ul>
<li>3FFF:1234:ABCD:1::&#x2F;64 via interface FastEthernet0&#x2F;0, distance 1<br>静态路由排错<br>Troubleshooting Satic Routes</li>
</ul>
<p>排错总会涉及到某个配置问题（如果不是接口宕掉的话）。如流量没有到达目的地，就可以使用命令traceroute测试该路由。</p>
<p>注意 – 今天内容很少，所以请前往第 12 天吧，因为那将是个非常充实的主题。</p>
<p>第 11 天问题<br>Name the three parameters needed to configure a static route.<br>What is the command used to configure a static route?<br>What is the command used to configure a default static route?<br>What is the command used to configure an IPv6 static route?<br>What is the command used to view IPv6 static routes?<br>第 11 天答案<br>Network address, subnet mask (prefix length), and next-hop address or exit interface.<br>The ip route command.<br>The ip route 0.0.0.0 0.0.0.0 command.<br>The ipv6 route command.<br>The show ipv6 route static command.<br>第 11 天实验<br>静态路由实验<br>Static Routes Lab</p>
<p>拓扑图</p>
<p>静态路由实验拓扑图</p>
<p>实验目的</p>
<p>学习如何以下一跳地址和出口接口方式，将静态路由指定给一台路由器。</p>
<p>实验步骤</p>
<p>按照上面的拓扑图分配 IP 地址。Router A可以是192.168.1.1&#x2F;30, Router B可以是.2。</p>
<p>通过串行链路进行ping操作，以确保该链路是工作的。</p>
<p>在Router A上指定一条静态路由，将到10.1.1.0&#x2F;10网络的所有流量，从串行接口发送出去。当然要使用你自己的串行端口编号；不要只是拷贝我的配置，你的接口有不同编号！</p>
<p>RouterA(config)#ip route 10.0.0.0 255.192.0.0 Serial0&#x2F;1&#x2F;0<br>RouterA(config)#exit<br>RouterA#ping 10.1.1.1<br>Type escape sequence to abort.<br>Sending 5, 100-byte ICMP Echos to 10.1.1.1, timeout is 2 seconds:<br>!!!!!<br>Success rate is 100 percent (5&#x2F;5), round-trip min&#x2F;avg&#x2F;max &#x3D; 18&#x2F;28&#x2F;32 ms<br>RouterA#<br>RouterA#show ip route<br>Codes: 	C - Connected, S - Static, I - IGRP, R - RIP, M - Mobile, B - BGP<br>        D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area<br>        N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2<br>        E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP<br>        i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area<br>        * - Candidate default, U - Per-user static route, o - ODR<br>        P - Periodic downloaded static route<br>Gateway of last resort is not set<br>      10.0.0.0&#x2F;10 is subnetted, 1 subnets<br>S		  10.0.0.0 is directly connected, Serial0&#x2F;1&#x2F;0<br>      172.16.0.0&#x2F;24 is subnetted, 1 subnets<br>C		  172.16.1.0 is directly connected, Loopback0<br>      192.168.1.0&#x2F;30 is subnetted, 1 subnets<br>C		  192.168.1.0 is directly connected, Serial0&#x2F;1&#x2F;0<br>RouterA#<br>RouterA#show ip route 10.1.1.1<br>Routing entry for 10.0.0.0&#x2F;10<br>Known via “ static ”, distance 1, metric 0 (connected)<br>  Routing Descriptor Blocks:</p>
<ul>
<li>directly connected, via Serial0&#x2F;1&#x2F;0<br>Route metric is 0, traffic share count is 1</li>
</ul>
<p>RouterA#<br>在Router B上配置一条静态路由，将到172.16.1.0&#x2F;24网络的所有流量，发到下一跳地址192.168.1.1。</p>
<p>RouterB(config)#ip route 172.16.1.0 255.255.255.0 192.168.1.1<br>RouterB(config)#exit<br>RouterB#ping 172.16.1.1<br>Type escape sequence to abort.<br>Sending 5, 100-byte ICMP Echos to 172.16.1.1, timeout is 2 seconds:<br>!!!!!<br>RouterB#show ip route 172.16.1.1<br>Routing entry for 172.16.1.0&#x2F;24<br>Known via “ static ”, distance 1, metric 0<br>  Routing Descriptor Blocks:</p>
<ul>
<li>192.168.1.1<br>  Route metric is 0, traffic share count is 1<br>RouterB#</li>
</ul>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2022/11/14/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="linux-linux运维常用命令" class="article article-type-linux  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/2022/11/11/linux%E8%BF%90%E7%BB%B4%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" target="_blank">linux运维常用命令</a>
  
    </h1>
  


  
  
<a href="/2022/11/11/linux%E8%BF%90%E7%BB%B4%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="archive-article-date">
        <time datetime="2022-11-10T16:01:03.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-11-11</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p>1、文件、目录操作命令（18个）<br>ls 即list：列出目录的内容及其内容属性信息。<br>主要参数：<br>-a：显示隐藏文件 -l：是以更详细的列表形式显示-S：</p>
<p>drwxr-xr-x (也可以用二进制表示 111 101 101 –&gt; 755)</p>
<p>d：标识节点类型(d：文件夹 -：文件 l:链接)</p>
<p>r：可读 w：可写 x：可执行</p>
<p>第一组rwx： ## 表示这个文件的拥有者对它的权限：可读可写可执行</p>
<p>第二组r-x： ## 表示这个文件的所属组用户对它的权限：可读，不可写，可执行</p>
<p>第三组r-x： ## 表示这个文件的其他用户(相对于上面两类用户)对它的权限：可读，不可写，可执行<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>以下命令参数只截取部分，不全；</p>
<p>eg1：</p>
<p>ls -F 查看目录中的文件</p>
<p>ls *[0-9]* 显示包含数字的文件名和目录名</p>
<p>ls &#x2F;tmp | pr -T5 -W$COLUMNS 将终端划分成5栏显示<br>1<br>2<br>3<br>4<br>5<br>cd 即change directory：从当前工作目录切换到指定的工作目录<br>cd -  &#x2F;&#x2F;返回上次所在的目录<br>1<br>cp 全拼为copy，功能为复制文件或目录。<br>eg1： 复制目录及其下隐藏文件到目标——&gt;2种方法：<br>1）方法一：</p>
<p>cp -rf  <code>ls -A1 --color=never</code> 目标目录<br>1<br>其中：–color&#x3D;never选项是为了关闭ls的彩色显示，一般都是打开的，如果打开了，会包含彩色显示的转义字符，cp命令会提示找不到文件。-1选项，让ls一行只显示一个文件或目录名，仅是为看着舒服，这里加不加都不影响。如果已经将非隐藏的文件或目录复制过去了，仅想复制隐藏的文件和目录，执行以下命令：</p>
<p>cp -urf <code>ls -A1 --color=never</code> 目标目录<br>1<br>其中：-u参数，只会复制目标目录下不存在的文件；或者目标目录下存在，但当前目录下更新的文件。<br>2）方法二：</p>
<p>cp -rf <code>ls -d .[^.]* --color=never</code> 目标目录<br>1<br>其中：-d 不展开目录显示，.[^.]*匹配当前目录下以.开头的文件和目录。</p>
<p>tree 显示文件和目录由根目录开始的树形结构<br>lstree 显示文件和目录由根目录开始的树形结构<br>tree -d  &#x2F;&#x2F;树状显示目录<br>1<br>2<br>find 查找，用于查找目录及目录下文件。<br>语法：find [path…] [expression_list]</p>
<p>【工作原理】</p>
<p>其中，expression分为三种：options、test、action。对于多个表达式，find是从左向右处理的，所以表达式的前后顺序不同会造成不同的搜索性能差距。find命令默认递归遍历所指定的目录树，针对每个文件依次执行find命令中的表达式，表达式首先根据逻辑运算符进行结合，然后依次从左至右对表达式求值。</p>
<p>find首先对整个命令行进行语法解析，并应用给定的options，然后定位到搜索路径path下开始对路径下的文件或子目录进行表达式评估或测试，评估或测试的过程是按照表达式的顺序从左向右进行的(此处不考虑操作符的影响)，如果最终表达式的表达式评估为true，则输出(默认)该文件的全路径名。</p>
<p>对于find来说，一个非常重要的概念：find的搜索机制是根据表达式返回的true&#x2F;false决定的，每搜索一次都判断一次是否能确定最终评估结果为true，只有评估的最终结果为true才算是找到，并切入到下一个搜索点。<br>eg1：find &#x2F;tmp -type f -name “*.log” -exec ls ‘{}’ ; -print，##该find中给定了两个test，两个action，它们之间从前向后按顺序进行评估</p>
<p>表达式优先级如下：</p>
<p>其中，-regex：这个参数和 -name 有类似的作用，都是通过文件的名字进行匹配，但是二者的不同的点是：</p>
<p>1）-name 只是对文件的名称做匹配，而-regex 是对文件的路径做匹配;-regex不是匹配文件名，而是匹配完整的文件名（包括路径）。例如，当前目录下有一个文件”abar9”，如果你用”ab.*9”来匹配，将查找不到任何结果，正确的方法是使用”.*ab.9”或者”.&#x2F;ab.*9”来匹配。<br>2） 在需要用正则表达式的时候，-regex 会比 -name方便很多， -name 是不支持正则表达式的，name 选项只支持通配符 * ? []，正则表达式有不同的标准，所以在find命令中可以通过 -regextype 来指定采用的正则表达式规范 , 从而让 -regex 按照指定的正则表达式规范工作，默认是 emacs 规范；另外有posix-awk, posix-basic, posix-egrep and posix-extended四种，可在man中获取得到。</p>
<p>用法：find dir -regextype “type” -regex “pattern”</p>
<p>示例：find . -regextype grep -regex “.*&#x2F;[0-9]{4}$” | head &#x2F;&#x2F;查找文件名称是4个数字构成的文件，然后取结果的前10行，其中-regex 采用的是 和 grep 命令相同的正则表达式规范；-regex 表达式忽略了文件的路径“.&#x2F;”,需在启后指定路径。</p>
<p>如果用name： find . -name “[0-9][0-9][0-9][0-9]” | head</p>
<p>-name 选项：按照文件名模式来匹配文件，若匹配则返回true，否则返回false。最好用引号将文件名模式引起来，防止shell自己解析要匹配的字符串。（可以用单引号也可以用双引号，单引号和双引号在shell环境中的区别，后者内不全是普通字符，前者特殊字符会被shell识别）-name对大小写字母敏感，如果想匹配时不考虑大小写可以使用-iname测试项.</p>
<p>find . -name “[A-Za-b]*” -print &#x2F;&#x2F;当前目录及子目录中查找文件名以一个大写字母开头或者以小写a或b开头的文件</p>
<p>find . -name “[^A-Z][a-z][0-9][0-9].txt” -print &#x2F;&#x2F;当前目录查找文件名不以大写字母开头，之后跟一个小写字母，再之后是两个数字，最后是.txt的文件;注意,此处的模式匹配并不符合正则表达式。</p>
<p>find . -size +0c -wholename “<em>e</em>[0-9]*” -o ! &#x2F;( -name “.” -o -name “<em>phone” &#x2F;) -prune -name “</em>.c” -user xixi -o -name “*phone” &#x2F;&#x2F;-prune是一个动作项，它表示当文件是一个目录文件时，不进入此目录进行搜索。-prune经常和-path或-wholename一起使用，以避开某个目录，常见的形式是：</p>
<p>find PATH (-path &lt;don’t want this path #1&gt; -o -path &lt;don’t want this path #2&gt;) -prune -o -path <global expression for what I do want> &#x2F;&#x2F;注意:如果同时使用-depth设置项，那么-prune将被find命令忽略。</p>
<p>find . -maxdepth 1 -name *.jpg -print -exec convert “{}” -resize 80x60 “thumbs&#x2F;{}” ; #批量调整当前目录中的文件大小并将它们发送到指定的缩略图目录</p>
<p>find &#x2F; -user user1 搜索属于用户 ‘user1’ 的文件和目录<br>find &#x2F;usr&#x2F;bin -type f -atime +100 搜索在过去100天内未被使用过的执行文件<br>find &#x2F;usr&#x2F;bin -type f -mtime -10 搜索在10天内被创建或者修改过的文件<br>find &#x2F; -name \*.rpm -exec chmod 755 ‘{}’ ; 搜索以 ‘.rpm’ 结尾的文件并定义其权限<br>find &#x2F; -xdev -name *.rpm 搜索以 ‘.rpm’ 结尾的文件，忽略光驱、捷盘等可移动设备</p>
<p>更多参考：参考1；参考2</p>
<p>locate *.ps 寻找以 ‘.ps’ 结尾的文件 - 先运行 ‘updatedb’ 命令<br>whereis halt 显示一个二进制文件、源码或man的位置<br>which halt 显示一个二进制文件或可执行文件的完整路径</p>
<p>vim&#x2F;vi 文本编辑器：<br>1）常用快捷键：(在一般模式下使用)：</p>
<p>a ：在光标后一位开始插入</p>
<p>A 在该行的最后插入</p>
<p>I 在该行的最前面插入</p>
<p>gg 直接跳到文件的首行</p>
<p>G 直接跳到文件的末行</p>
<p>dd 删除一行；3dd 删除3行；yy 复制一行；3yy 复制3行；p 粘贴；u：即undo撤销操作；</p>
<p>v ：进入字符选择模式，选择完成后，按y复制，按p粘贴</p>
<p>ctrl+v 进入块选择模式，选择完成后，按y复制，按p粘贴</p>
<p>shift+v 进入行选择模式，选择完成后，按y复制，按p粘贴</p>
<p>2）查找并替换</p>
<p>1 显示行号 :set nu</p>
<p>2 隐藏行号：:set nonu</p>
<p>3 查找关键字 :&#x2F;you ## 效果：查找文件中出现的you，并定位到第一个找到的地方，按n可以定位到下一个匹配位置(按N定位到上一个)</p>
<p>4 替换操作 ：s&#x2F;sad&#x2F;bbb 查找光标所在行的第一个sad，替换为bbb</p>
<p>:%s&#x2F;sad&#x2F;bbb 查找文件中所有sad，替换为bbb</p>
<p>其他：<br>mkdir 全拼为make directories，其功能是创建目录。-p：创建多级目录；<br>mv 全拼为move，其功能是移动或重命名文件。<br>pwd 全拼为print working directory，功能是显示当前工作目录的绝对路径。<br>rename 用于重新命名文件。<br>rm 全拼为remove，其功能是删除一个或多个文件或目录。<br>rmdir 全拼为remove empty directories，功能是删除空目录。<br>touch 创建个空文件，改变已有文件的时间戳属性。<br>tree 功能是以树形结构显示目录下的内容。<br>basename 显示文件名或着目录名。<br>dirname 显示文件或着目录路径。<br>chattr 改变文件扩展属性。<br>lsattr 查看文件扩展属性。<br>file 显示文件类型。<br>md5sum 计算和校验文件的MD5值。<br>rmdir dir1 删除一个叫做 ‘dir1’ 的目录’<br>rm -rf dir1 删除一个叫做 ‘dir1’ 的目录并同时删除其内容<br>rm -rf dir1 dir2 同时删除两个目录及它们的内容<br>ln -s file1 lnk1 创建一个指向文件或目录的软链接<br>ln file1 lnk1 创建一个指向文件或目录的物理链接<br>touch -t 0712250000 file1 修改一个文件或目录的时间戳 (格式：YYMMDDhhmm)<br>file file1 文件类型查看<br>iconv -l 列出已知的编码</p>
<p>2、查看文件、内容处理命令（21个）<br>at 全拼为concatenate，功能是用于连接多个文件并且打印到屏幕输出或重定向到指定文件中。<br>tac tac是cat的反向拼写，因此命令的功能为反向显示文件内容。<br>more 分页显示文件内容。<br>less 分页显示文件内容，more命令的相反用法。</p>
<p>head 显示文件内容头部。<br>head -10 install.log 查看文件头部的10行</p>
<p>tail 显示文件内容尾部。<br>tail <strong>-10</strong> install.log 查看文件尾部的10行</p>
<p>tail <strong>+10</strong> install.log 查看文件 10–&gt;末行</p>
<p>tail -f install.log 小f跟踪文件的唯一inode号，就算文件改名后，还是跟踪原来这个inode表示的文件</p>
<p>tail -F install.log 大F按照文件名来跟踪</p>
<p>cut： 将文件的每一行按指定分隔符分割并输出。<br>split 分割文件为不同的片段。<br>paste 按行合并文件内容。<br>sort 对文件的文本内容排序。<br>uniq 去除掉重复行。<br>wc 统计文件行数、单词数或是字节数。<br>iconv 转换文件编码格式。<br>dos2unix 将DOS格式文件转换成UNIX格式。<br>diff 全拼为difference，比较文件差异，用于文本文件。<br>vimdiff 命令行可视化文件比较工具，用于文本文件。<br>rev 反向输出文件内容。<br>grep&#x2F;egrep 常用于过滤字符串。<br>join 按两个文件的相同字段合并。<br>tr 替换、删除字符。<br>vi&#x2F;vim 命令行文本编辑器。</p>
<p>3、搜索文件命令（4个）<br>which 查找二进制文件的命令，按环境变量PATH路径查找。<br>which ls &#x2F;&#x2F;查找可执行的命令所在的路径</p>
<p>find 从磁盘遍历查找文件或目录。<br>find &#x2F; -name “hadooop*” -ok rm {} ;</p>
<p>find &#x2F; -name “hadooop*” -exec rm {} ;<br>find &#x2F;home -user hadoop -type d -ls  ##查找用户为hadoop的文件夹<br>1<br>2<br>3<br>4<br>whereis 查找二进制文件的命令，按环境变量PATH路径查找。<br>相对于which，whereis 查找可执行的命令和帮助的位置；</p>
<p>locate 从数据库&#x2F;var&#x2F;lib&#x2F;mlocate&#x2F;mlocate.db中查找命令，使用updatedb更新库。<br>4、文件压缩及解压缩命令（4个）<br>tar 打包压缩。<br>tar -cvzf bak.tar .&#x2F;aaa</p>
<p>将&#x2F;etc&#x2F;password追加文件到bak.tar中(r)</p>
<p>tar -rvf bak.tar &#x2F;etc&#x2F;password<br>tar -xvf bak.tar<br>解压到&#x2F;usr&#x2F;下：tar -zxvf a.tar.gz -C &#x2F;usr<br>查看压缩包内容tar -ztvf a.tar.gz</p>
<p>tar -cvf archive.tar file1 创建一个非压缩的 tarball<br>tar -cvf archive.tar file1 file2 dir1 创建一个包含了 ‘file1’, ‘file2’ 以及 ‘dir1’的档案文件<br>tar -tf archive.tar 显示一个包中的内容<br>tar -xvf archive.tar 释放一个包<br>tar -xvf archive.tar -C &#x2F;tmp 将压缩包释放到 &#x2F;tmp目录下<br>tar -cvfj archive.tar.bz2 dir1 创建一个bzip2格式的压缩包<br>tar -xvfj archive.tar.bz2 解压一个bzip2格式的压缩包<br>tar -cvfz archive.tar.gz dir1 创建一个gzip格式的压缩包<br>tar -xvfz archive.tar.gz 解压一个gzip格式的压缩包<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>unzip 解压和zip压缩文件。<br>zip file1.zip file1 创建一个zip格式的压缩包<br>zip -r file1.zip file1 file2 dir1 将几个文件和目录同时压缩成一个zip格式的压缩包<br>unzip file1.zip 解压一个zip格式压缩包<br>1<br>2<br>3<br>gzip 压缩工具。<br>gunzip a.txt.gz或gzip -d a.txt.gz<br>gunzip file1.gz 解压一个叫做 ‘file1.gz’的文件<br>gzip file1 压缩一个叫做 ‘file1’的文件<br>gzip -9 file1 最大程度压缩<br>1<br>2<br>3<br>4<br>bzip2和bunzip2解压缩<br>bunzip2 a.bz2</p>
<p>bzip2 -d a.bz2<br>1<br>2<br>3<br>打包并压缩成bz2 ： tar -jcvf a.tar.bz2——&gt;解压：tar -jxvf a.tar.bz2<br>bunzip2 file1.bz2 解压一个叫做 ‘file1.bz2’的文件<br>bzip2 file1 压缩一个叫做 ‘file1’ 的文件</p>
<p>rar压缩和unrar解压缩<br>rar a file1.rar test_file 创建一个叫做 ‘file1.rar’ 的包<br>rar a file1.rar file1 file2 dir1 同时压缩 ‘file1’, ‘file2’ 以及目录 ‘dir1’<br>rar x file1.rar 解压rar包<br>unrar x file1.rar 解压rar包<br>1<br>2<br>3<br>4<br>5、系统信息查询命令（11个）<br>uname	显示操作系统相关信息。<br>hostname	显示或者设置当前系统的主机名。<br>dmesg	显示开机信息，用于诊断系统故障。<br>uptime	显示系统运行时间以及负载。<br>stat	显示文件或文件系统的状态。<br>arch 显示机器的处理器架构(1)<br>uname -m 显示机器的处理器架构(2)<br>dmidecode -q 显示硬件系统部件 (SMBIOS &#x2F; DMI)<br>hdparm -i &#x2F;dev&#x2F;hda 罗列一个磁盘的架构特性<br>hdparm -tT &#x2F;dev&#x2F;sda 在磁盘上执行测试性读取操作<br>cat &#x2F;proc&#x2F;cpuinfo 显示CPU info的信息<br>cat &#x2F;proc&#x2F;interrupts 显示中断<br>cat &#x2F;proc&#x2F;meminfo 校验内存使用<br>cat &#x2F;proc&#x2F;swaps 显示哪些swap被使用<br>cat &#x2F;proc&#x2F;version 显示内核的版本<br>cat &#x2F;proc&#x2F;net&#x2F;dev 显示网络适配器及统计<br>cat &#x2F;proc&#x2F;mounts 显示已加载的文件系统<br>lspci -tv 罗列 PCI 设备<br>lsusb -tv 显示 USB 设备</p>
<p>top	实时显示系统资源使用情况。<br>free	查看系统内存<br>date	显示、设置系统时间<br>cal	查看日历、时间信息<br>cal 2021 显示2021年的日历表<br>date 041217002021.00 设置日期和时间 - 月日时分年.秒<br>clock -w 将时间修改保存到 BIOS<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>6、用户管理及权限、用户授权，登陆相关命令（21个）<br>useradd 添加用户。<br>添加一个tom用户，设置它属于users组，并添加注释信息：useradd -g users -c “hr tom” tom<br>useradd -c “Name Surname “ -g admin -d &#x2F;home&#x2F;user1 -s &#x2F;bin&#x2F;bash user1 创建一个属于 “admin” 用户组的用户</p>
<p>usermod 修改系统已经存在用户属性。<br>修改tom用户的登陆名为tomcat：usermod -l tomcat tom</p>
<p>将tomcat添加到sys和root组（-G，-g）中：usermod -G sys,root tomcat<br>查看tomcat的组信息：groups tomcat<br>usermod -c “User FTP” -g system -d &#x2F;ftp&#x2F;user1 -s &#x2F;bin&#x2F;nologin user1 修改用户属性</p>
<p>userdel 删除用户。<br>userdel -r spark 加一个-r就表示把用户及用户的主目录都删除</p>
<p>groupadd 添加用户群组+groupmod组修改<br>passwd	修改用户密码。<br>chage	修改用户密码有效期限。<br>id	查看用户的uid&#x2F;gid及归属的用户群组<br>1<br>2<br>3<br>groupmod -n new_group_name old_group_name 重命名一个用户组</p>
<p>chmod 改变文件、目录权限<br>chmod -R 770 aaa&#x2F;   ##如果要将一个文件夹的所有内容权限统一修改，则可以-R参数<br>chmod ugo+rwx directory1 ##设置目录的所有人(u)、群组(g)以及其他人(o)以读（r ）、写(w)和执行(x)的权限<br>chmod go-rwx directory1 ##删除群组(g)与其他人(o)对目录的读写执行权限<br>1<br>2<br>3<br>find &#x2F; -perm -u+s 罗列一个系统中所有使用了SUID控制的文件<br>chmod u+s &#x2F;bin&#x2F;file1 设置一个二进制文件的 SUID 位 - 运行该文件的用户也被赋予和所有者同样的权限<br>chmod u-s &#x2F;bin&#x2F;file1 禁用一个二进制文件的 SUID位<br>chmod g+s &#x2F;home&#x2F;public 设置一个目录的SGID 位 - 类似SUID ，不过这是针对目录的<br>chmod g-s &#x2F;home&#x2F;public 禁用一个目录的 SGID 位<br>chmod o+t &#x2F;home&#x2F;public 设置一个文件的 STIKY 位 - 只允许合法所有人删除文件<br>chmod o-t &#x2F;home&#x2F;public 禁用一个目录的 STIKY 位<br>chgrp	更改文件用户群组。<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>chown 改变文件、目录的属主和属组<br>chown :angela aaa ## 改变所属组<br>chown angela:angela aaa&#x2F; ## 同时修改所属用户和所属组<br>chown -R user1 directory1 ##改变一个目录的所有人属性并同时改变改目录下所有文件的属性<br>1<br>2<br>3<br>umask	显示、设置权限掩码。<br>whoami	显示当前有效用户名称，相当于执行id -un命令。<br>who	显示目前已登录系统的用户信息。<br>w	显示已登陆系统的用户列表，并显示用户正在执行的指令。<br>last	显示已登入系统的用户。<br>lastlog	显示系统中所有用户最近一次的登录信息。<br>users	显示当前登录系统的所有用户的用户列表。<br>finger	查找、显示用户信息。<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>gpasswd<br>将tomcat用户从root组和sys组删除：gpasswd -d tomcat root&amp;&amp;gpasswd -d tomcat sys<br>将america组名修改为am：groupmod -n am america</p>
<p>chattr 配置文件的特殊属性 - 使用 “+” 设置权限，使用 “-” 用于取消<br>chattr +a file1 只允许以追加方式读写文件<br>chattr +c file1 允许这个文件能被内核自动压缩&#x2F;解压<br>chattr +d file1 在进行文件系统备份时，dump程序将忽略这个文件<br>chattr +i file1 设置成不可变的文件，不能被删除、修改、重命名或者链接<br>chattr +s file1 允许一个文件被安全地删除<br>chattr +S file1 一旦应用程序对这个文件执行了写操作，使系统立刻把修改的结果写到磁盘<br>chattr +u file1 若文件被删除，系统会允许你在以后恢复这个被删除的文件<br>lsattr 显示特殊的属性<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>为用户配置sudo权限<br>su	切换用户身份。<br>visudo	编辑&#x2F;etc&#x2F;sudoers文件的专属命令。<br>sudo	以另外一用户身份（默认为root用户）执行事先在sudoers文件中允许的命令。<br>1<br>2<br>3<br>用root编辑 vi &#x2F;etc&#x2F;sudoers；不过现在默认都用visudo命令来编辑文件，在文件的如下位置，为hadoop添加一行即可</p>
<p>root ALL&#x3D;(ALL) ALL<br>hadoop ALL&#x3D;(ALL) ALL</p>
<p>然后，hadoop用户就可以用sudo来执行系统级别的指令</p>
<p>验证：切换到授权的用户下，执行：sudo -l 来查看哪些命令是可以执行或禁止的；</p>
<p>sudo -v &#x2F;&#x2F;可更新sudo切换后的时间戳，不至于过期</p>
<p>&#x2F;etc&#x2F;sudoers中每行就算一个规则，带有#号可以当作是说明的内容，不会执行；如果规则很长，一行列不下时，可以用\号来续行，这样一个规则就可以有多个行；&#x2F;etc&#x2F;sudoers 的规则可分为两类；一类是别名定义，另一类是授权规则；别名定义并不是必须的，但授权规则是必须的；</p>
<p>别名规则定义格式如下： </p>
<p>Alias_Type NAME &#x3D; item1, item2, … </p>
<h2 id="或如下这样"><a href="#或如下这样" class="headerlink" title="或如下这样"></a>或如下这样</h2><p>#Alias_Type NAME &#x3D; item1, item2, item3 : NAME &#x3D; item4, item5  &#x2F;&#x2F;别名之间用:号分割；</p>
<p>##别名类型（Alias_Type）：别名类型包括如下四种 </p>
<p>#Host_Alias 定义主机别名； 用于在下文定义授权规则时通过该定义主机别名来限制特定一组主机，否则就需要用ALL来匹配所有可能出现的主机情况<br>#User_Alias 用户别名，别名成员可以是用户，用户组（前面要加%号），成员与成员之间，通过半角,号分隔；;且需要在系统中确实在存在的，即；在&#x2F;etc&#x2F;paswd中必须存在<br>#Runas_Alias 用来定义runas别名，这个别名指定的是“目的用户”，即sudo 允许切换至的用户； 定义的是某个系统用户可以sudo 切换身份到Runas_Alias 下的成员<br>#Cmnd_Alias 定义命令别名；注意：命令别名下的成员必须是文件或目录的绝对路径； 别名长的话，可以通过 \ 号断行； </p>
<p>Cmnd_Alias USERMAG&#x3D;&#x2F;usr&#x2F;sbin&#x2F;adduser,&#x2F;usr&#x2F;sbin&#x2F;userdel,&#x2F;usr&#x2F;bin&#x2F;passwd [A-Za-z]*,&#x2F;bin&#x2F;chown,&#x2F;bin&#x2F;chmod<br>Cmnd_Alias DISKMAG&#x3D;&#x2F;sbin&#x2F;fdisk,&#x2F;sbin&#x2F;parted<br>Cmnd_Alias NETMAG&#x3D;&#x2F;sbin&#x2F;ifconfig,&#x2F;etc&#x2F;init.d&#x2F;network<br>Cmnd_Alias KILL &#x3D; &#x2F;usr&#x2F;bin&#x2F;kill<br>Cmnd_Alias PWMAG &#x3D; &#x2F;usr&#x2F;sbin&#x2F;reboot,&#x2F;usr&#x2F;sbin&#x2F;halt<br>Cmnd_Alias SHELLS &#x3D; &#x2F;usr&#x2F;bin&#x2F;sh, &#x2F;usr&#x2F;bin&#x2F;csh, &#x2F;usr&#x2F;bin&#x2F;ksh, \<br>                    &#x2F;usr&#x2F;local&#x2F;bin&#x2F;tcsh, &#x2F;usr&#x2F;bin&#x2F;rsh, \<br>                    &#x2F;usr&#x2F;local&#x2F;bin&#x2F;zsh<br>Cmnd_Alias SU &#x3D; &#x2F;usr&#x2F;bin&#x2F;su,&#x2F;bin,&#x2F;sbin,&#x2F;usr&#x2F;sbin,&#x2F;usr&#x2F;bin </p>
<p>##授权规则语法：授权用户 主机&#x3D;命令动作，在动作之前也可以指定切换到特定用户下，在这里指定切换的用户要用括号括起来，如果不需要密码直接运行命令的，应该加NOPASSWD:参数<br>ZQadmin ALL&#x3D;&#x2F;bin&#x2F;chown,&#x2F;bin&#x2F;chmod ##表示ZQadmin可以在任何可能出现的主机名的系统中，可以切换到root用户下执行&#x2F;bin&#x2F;chown 和&#x2F;bin&#x2F;chmod 命令；这里省略了指定切换到哪个用户下执行&#x2F;bin&#x2F;shown 和&#x2F;bin&#x2F;chmod命令；在省略的情况下默认为是切换到root用户下执行；同时也省略了是不是需要ZQadmin用户输入验证密码，如果省略了，默认为是需要验证密码。 </p>
<p>#因此授权规则可以这样写：授权用户 主机&#x3D;[(切换到哪些用户或用户组)] [是否需要密码验证] 命令1,[(切换到哪些用户或用户组)] [是否需要密码验证] [命令2],[(切换到哪些用户或用户组)] [是否需要密码验证] [命令3]……   &#x2F;&#x2F;[ ]中的内容，是可以省略；命令与命令之间用,号分隔；<br>ZQadmin ALL&#x3D;(root) NOPASSWD:&#x2F;bin&#x2F;chown, &#x2F;bin&#x2F;chmod ##&#x2F;&#x2F;执行chown不需输入密码，执行chmod时需要ZQadmin输入自己的密码<br>%admin ALL&#x3D;&#x2F;usr&#x2F;sbin&#x2F;<em>,&#x2F;sbin&#x2F;</em>    ##表示admin用户组下的所有成员，在所有可能的出现的主机名下，都能切换到root用户下运行 &#x2F;usr&#x2F;sbin和&#x2F;sbin目录下的所有命令；<br>wangju ALL&#x3D;&#x2F;usr&#x2F;sbin&#x2F;<em>,&#x2F;sbin&#x2F;</em>,!&#x2F;usr&#x2F;sbin&#x2F;fdisk #&#x2F;&#x2F;表示wangju用户在所有可能存在的主机名的主机上运行&#x2F;usr&#x2F;sbin和&#x2F;sbin下所有的程序，但fdisk 程序除外； </p>
<p>#按别名来建立规则,b写明首位必须为大写字母，其后可跟下划线和数字<br>User_Alias SYSADER&#x3D;admin,linuxsir,%admin<br>User_Alias DISKADER&#x3D;lanhaitun<br>Runas_Alias OP&#x3D;root #&#x2F;定义要临时su的目标用户的别名为OP，实际成员为root<br>Cmnd_Alias SYUCMD&#x3D;&#x2F;bin&#x2F;chown,&#x2F;bin&#x2F;chmod,&#x2F;usr&#x2F;sbin&#x2F;adduser,&#x2F;usr&#x2F;bin&#x2F;passwd [A-Za-z]*,!&#x2F;usr&#x2F;bin&#x2F;passwd root #&#x2F;不能通过passwd 来更改root密码；<br>Cmnd_Alias DSKCMD&#x3D;&#x2F;sbin&#x2F;parted,&#x2F;sbin&#x2F;fdisk #注：定义命令别名DSKCMD，下有成员parted和fdisk ； </p>
<h2 id="定义别名规则"><a href="#定义别名规则" class="headerlink" title="定义别名规则"></a>定义别名规则</h2><p>SYSADMIN ALL&#x3D; SYUCMD,DSKCMD #&#x2F;admin、linuxsir和admin用户组下的成员能以root身份运行chown 、chmod 、adduser、passwd，但不能更改root的密码；也可以以root身份运行 parted和fdisk<br>DISKADER ALL&#x3D;(OP) DSKCMD<br>#SYSADMIN ALL&#x3D; NOPASSWD:SYDCMD,NOPASSWD:DSKCMD&#x2F;&#x2F;不用输入密码</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>其他<br>chage -E 2005-12-31 user1 设置用户口令的失效期限<br>pwck 检查 ‘&#x2F;etc&#x2F;passwd’ 的文件格式和语法修正以及存在的用户<br>grpck 检查 ‘&#x2F;etc&#x2F;passwd’ 的文件格式和语法修正以及存在的群组<br>newgrp group_name 登陆进一个新的群组以改变新创建文件的预设群组<br>1<br>2<br>3<br>4<br>7、基础网络操作命令（11个）<br>telnet 用TELNET协议远程登录。<br>ssh 用SSH加密协议远程登录。<br>scp 全拼为secure copy，用于不同主机之间复制文件。<br>wget 用命令行下载文件。<br>ping 测试主机之间网络的连通性。<br>route 显示和设置linux系统的路由表。<br>ifup 启动网卡。<br>ifdown 关闭网卡<br>dhclient eth0 以dhcp模式启用 ‘eth0’<br>ip link show 显示所有网口链路状态<br>mii-tool eth0 显示eth0的链路状态<br>ethtool eth0 显示eth0网卡数据统计<br>iwlist scan 显示无线网络<br>iwconfig eth1 显示eth1的无线网卡的配置<br>whois <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 在 Whois 数据库中查找<br>nbtscan ip_addr netbios解析 （windows）<br>nmblookup -A ip_addr netbios查看（windows）<br>smbclient -L ip_addr&#x2F;hostname 显示 Windows 主机的远程共享<br>smbget -Rr smb:&#x2F;&#x2F;ip_addr&#x2F;share 通过 smb 从主机 windows 下载文件</p>
<p>ifconfig 查看、配置、启用或禁用网络接口的命令<br>ifconfig eth0 promisc 设置 ‘eth0’ 成混杂模式以嗅探数据包 (sniffing)</p>
<p>route 路由管理<br>route -n show routing table<br>route add -net 0&#x2F;0 gw IP_Gateway configura default gateway<br>route add -net 192.168.0.0 netmask 255.255.0.0 gw 192.168.1.1 configure static route to reach network ‘192.168.0.0&#x2F;16’<br>route del 0&#x2F;0 gw IP_gateway remove static route<br>echo “1” &gt; &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv4&#x2F;ip_forward activate ip routing<br>1<br>2<br>3<br>4<br>5<br>netstat 查看网络状态<br>1）查看某个服务的TCP连接数<br>#netstat -an | grep ESTABLISHED | grep ‘:80’ | wc -l</p>
<ol start="2">
<li>netstat -nu &#x2F;&#x2F;查看udp的连接数</li>
</ol>
<p>3）查看网卡列表: netstat -i</p>
<p>显示组播组的关系:netstat -g<br>ss 查看网络状态<br>1）ss -ta &#x2F;&#x2F;检测套接字</p>
<p>2）显示所有活动的TCP连接以及计时器:ss -to</p>
<p>nmap 网络扫描命令<br>#弱口令检测<br>nmap –sU –p161 –script&#x3D;snmp-brute ip &#x2F;&#x2F;查找snmp弱口令,U:udp;<br>#弱口令利用<br>nmap -sU -p161 –script&#x3D;snmp-netstat ip &#x2F;&#x2F;获取网络端口状态文章来源站点<br>nmap –sU –p161 –script&#x3D;snmp-sysdescr ip &#x2F;&#x2F;获取系统信息<br>nmap -sU -p161 –script&#x3D;snmp-win32-user ip &#x2F;&#x2F;获取用户信息<br>#批量ping扫描<br>nmap -sP 192.168.10.0&#x2F;24<br>nmap -sL 192.168.10.0&#x2F;24  &#x2F;&#x2F;仅列出指定网络上的每台主机，不发送任何报文到目标主机（隐蔽探测）<br>nmap -PS -p 22,23,2,80 39.156.66.18   &#x2F;&#x2F;探测目标主机开放的端口,默认情况下nmap只扫描TCP端口<br>nmap -sS 39.156.66.0&#x2F;24    &#x2F;&#x2F;S:使用SYN半开放扫描,T:tcp<br>nmap -sO 39.156.66.0&#x2F;24   &#x2F;&#x2F;探测目标主机支持哪些IP协议<br>nmap -vv nmap 192.168.10.1 192.168.10.2 192.168.10.3   &#x2F;&#x2F;扫描多台主机<br>nmap 192.168.10.1,2,3<br>nmap 192.168.10.* –exclude 192.168.10.10  &#x2F;&#x2F;执行全网扫描或用通配符扫描时你可以使用“-exclude”选项来排除某些你不想要扫描的主机<br>nmap -A 192.168.10.11    &#x2F;&#x2F;-A启用操作系统和版本检测，脚本扫描和路由跟踪功能,“-O”和“-osscan-guess”也帮助探测操作系统信息<br>nmap -sA 192.168.10.11     &#x2F;&#x2F;探测该主机是否使用了包过滤器或防火墙<br>nmap -PN 192.168.10.11    &#x2F;&#x2F;扫描主机检测其是否受到数据包过滤软件或防火墙的保护,“-F”选项执行一次快速扫描，仅扫描列在nmap-services文件中的端口而避开所有其它的端口,“-r”选项表示不会随机的选择端口扫描<br>nmap –iflist   &#x2F;&#x2F;“–iflist”选项检测主机接口和路由信息<br>nmap -p T:8888,80 192.168.10.11    &#x2F;&#x2F;指定具体的端口类型和端口号来让nmap扫描,扫描tcp端口<br>nmap -p 80-160 192.168.10.11     &#x2F;&#x2F;扫描某个范围内的端口<br>nmap -PS 192.168.10.11   &#x2F;&#x2F;包过滤防火墙会阻断标准的ICMP ping请求，在这种情况下，我们可以使用TCP ACK (PA)和TCP Syn(PS)方法来扫描远程主机<br>nmap -sS 192.168.10.11     &#x2F;&#x2F;隐蔽扫描<br>nmap -sN 1192.168.10.11     &#x2F;&#x2F;TCP空扫描规避防火墙<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>lsof 全名为list open files，也就是列举系统中已经被打开的文件。<br>mail 发送、接收邮件。<br>mutt 邮件管理命令。</p>
<p>nslookup 查询互联网DNS服务器的命令<br>dig 查找DNS的解析过程<br>host 查询DNS的命令。<br>traceroute 追踪数据传输路由状况<br>tcpdump 命令行的抓包工具<br>用法： tcpdump [ -adeflnNOpqStvx ] [ -c 数量 ] [ -F 文件名 ] [ -i 网络接口 ] [ -r 文件名] [ -s snaplen ] [ -T 类型 ] [ -w 文件名 ] [表达式 ]</p>
<p>tcpdump的选项：</p>
<p>-a 　　　将网络地址和广播地址转变成名字；<br>-d 　　　将匹配信息包的代码以人们能够理解的汇编格式给出；<br>-dd 　　将匹配信息包的代码以c语言程序段的格式给出；<br>-ddd 　　将匹配信息包的代码以十进制的形式给出；<br>-e 　　　在输出行打印出数据链路层的头部信息，包括源mac和目的mac，以及网络层的协议；<br>-f 　　　将外部的Internet地址以数字的形式打印出来；<br>-l 　　　使标准输出变为缓冲行形式；<br>-n 　　指定将每个监听到数据包中的域名转换成IP地址后显示，不把网络地址转换成名字；<br>-nn： 指定将每个监听到的数据包中的域名转换成IP、端口从应用名称转换成端口号后显示<br>-t 　　　在输出的每一行不打印时间戳；<br>-v 　　　输出一个稍微详细的信息，例如在ip包中可以包括ttl和服务类型的信息；<br>-vv 　　输出详细的报文信息；<br>-c 　　在收到指定的包的数目后，tcpdump就会停止；<br>-F 　　从指定的文件中读取表达式,忽略其它的表达式；<br>-i 　　指定监听的网络接口；<br>-p： 将网卡设置为非混杂模式，不能与host或broadcast一起使用<br>-r 　　从指定的文件中读取包(这些包一般通过-w选项产生)；<br>-w 　　直接将包写入文件中，并不分析和打印出来；<br>-s snaplen snaplen表示从一个包中截取的字节数。0表示包不截断，抓完整的数据包。默认的话 tcpdump 只显示部分数据包,默认68字节。<br>-T 　将监听到的包直接解释为指定的类型的报文，常见的类型有rpc （远程过程调用）和snmp（简单网络管理协议；）<br>-X 告诉tcpdump命令，需要把协议头和包内容都原原本本的显示出来（tcpdump会以16进制和ASCII的形式显示），这在进行协议分析时是绝对的利器。</p>
<p>1）抓取包含10.10.10.122的数据包</p>
<p>tcpdump -i eth0 -vnn host 10.10.10.122<br>1<br>2）抓取包含10.10.10.0&#x2F;24网段的数据包</p>
<p>tcpdump -i eth0 -vnn net 10.10.10.0&#x2F;24<br>1<br>3）抓取包含端口22的数据包</p>
<p>tcpdump -i eth0 -vnn port 22<br>1<br>4）抓取udp协议的数据包</p>
<p>tcpdump -i eth0 -vnn  udp<br>1<br>5）抓取icmp协议的数据包<br>#tcpdump -i eth0 -vnn icmp</p>
<p>6）抓取arp协议的数据包<br>tcpdump -i eth0 -vnn arp</p>
<p>7）抓取ip协议的数据包<br>tcpdump -i eth0 -vnn ip</p>
<p>8）抓取源ip是10.10.10.122数据包。<br>tcpdump -i eth0 -vnn src host 10.10.10.122</p>
<p>9、抓取目的ip是10.10.10.122数据包<br>tcpdump -i eth0 -vnn dst host 10.10.10.122</p>
<p>10）抓取源端口是22的数据包<br>tcpdump -i eth0 -vnn src port 22</p>
<p>11）抓取源ip是10.10.10.253且目的ip是22的数据包<br>tcpdump -i eth0 -vnn src host 10.10.10.253 and dst port 22</p>
<p>12）抓取源ip是10.10.10.122或者包含端口是22的数据包<br>tcpdump -i eth0 -vnn src host 10.10.10.122 or port 22</p>
<p>13）抓取源ip是10.10.10.122且端口不是22的数据包<br>tcpdump -i eth0 -vnn src host 10.10.10.122 and not port 22</p>
<p>14）抓取源ip是10.10.10.2且目的端口是22，或源ip是10.10.10.65且目的端口是80的数据包。<br>tcpdump -i eth0 -vnn ( src host 10.10.10.2 and dst port 22 ) or ( src host 10.10.10.65 and dst port 80 )</p>
<p>15）抓取源ip是10.10.10.59且目的端口是22，或源ip是10.10.10.68且目的端口是80的数据包。<br>tcpdump -i eth0 -vnn ‘src host 10.10.10.59 and dst port 22’ or ’ src host 10.10.10.68 and dst port 80 ’</p>
<p>16）把抓取的数据包记录存到&#x2F;tmp&#x2F;fill文件中，当抓取100个数据包后就退出程序。<br>tcpdump –i eth0 -vnn -w &#x2F;tmp&#x2F;fil1 -c 100</p>
<p>17）从&#x2F;tmp&#x2F;fill记录中读取tcp协议的数据包<br>tcpdump –i eth0 -vnn -r &#x2F;tmp&#x2F;fil1 tcp</p>
<p>18）从&#x2F;tmp&#x2F;fill记录中读取包含10.10.10.58的数据包<br>tcpdump –i eth0 -vnn -r &#x2F;tmp&#x2F;fil1 host 10.10.10.58</p>
<p>mtr(（My traceroute是ping+traceroute)<br>Linux版本的mtr命令默认发送ICMP数据包进行链路探测。可以通过“-u”参数来指定使用UDP数据包用于探测。相对于traceroute命令只会做一次链路跟踪测试，mtr命令会对链路上的相关节点做持续探测并给出相应的统计信息。所以，mtr命令能避免节点波动对测试结果的影响，所以其测试结果更正确，建议优先使用。此工具也有对应的Windows版本，名称为WinMTR。</p>
<p>用法：</p>
<p>mtr [-hvrctglspni46] [-help] [-version] [-report] [-report-cycles&#x3D;COUNT] [-curses] [-gtk] [-raw] [-split] [-no-dns] [-address interface] [-psize&#x3D;bytes&#x2F;-s bytes] [-interval&#x3D;SECONDS] HOSTNAME [PACKETSIZE]</p>
<p>常见可选参数说明：</p>
<p>-r 或 -report：以报告模式显示输出。</p>
<p>-p 或 -split：将每次追踪的结果分别列出来。</p>
<p>-s 或 -psize：指定ping数据包的大小。</p>
<p>-n 或 -no-dns：不对IP地址做域名反解析。</p>
<p>-a 或 -address：设置发送数据包的IP地址。用于主机有多个IP时。</p>
<p>-4：只使用IPv4协议。</p>
<p>-6：只使用IPv6协议。</p>
<p>另外，也可以在mtr命令运行过程中，输入相应字母来快速切换模式。</p>
<p>？或 h：显示帮助菜单。</p>
<p>d：切换显示模式。</p>
<p>n：切换启用或禁用DNS域名解析。</p>
<p>u：切换使用ICMP或UDP数据包进行探测。</p>
<p>默认配置下，返回结果中各数据列的说明：</p>
<p>第一列（Host）：节点IP地址和域名。如前面所示，按n键可以切换显示。</p>
<p>第二列（Loss%）：节点丢包率。</p>
<p>第三列（Snt）：每秒发送数据包数。默认值是10，可以通过参数“-c”指定。</p>
<p>第四列（Last）：最近一次的探测延迟值。</p>
<p>第五、六、七列（Avg、Best、Wrst）：分别是探测延迟的平均值、最小值和最大值。</p>
<p>第八列（StDev）：标准偏差。越大说明相应节点越不稳定。</p>
<p>ncat(nc)<br>ncat&#x2F;nc既是一个端口扫描工具，也是一款安全工具，还是一款监测工具，甚至可以做为一个简单的TCP代理。<br>yum install nmap-ncat -y</p>
<p>ncat -l 80 &#x2F;&#x2F;监听某个端口的入站连接</p>
<p>ncat -v 49.235.179.157 22 &#x2F;&#x2F;测试主机端口的连通性,另一端监听，还可实现nc进行主机间通信</p>
<p>ftop(查看流量)<br>yum install iftop -y<br>iftop -i eth0 &#x2F;&#x2F;</p>
<p>参数：<br>-i: 指定监听接口<br>-B: 以字节而非比特显示，默认是小b，即比特</p>
<p>其中，结果各字段表示如下：<br>TX：发送流量<br>RX：接收流量<br>TOTAL：总流量<br>Cumm：运行iftop到目前时间的总流量<br>peak：流量峰值<br>rates：分别表示过去 2s 10s 40s 的平均流量</p>
<p>trickle(限制带宽):应用用于限制网络带宽<br>yum install trickle -y &#x2F;&#x2F;安装</p>
<p>1）限制wget的上传和下载速度限制上传为10KB&#x2F;S,下载为20KB&#x2F;s</p>
<p>trickle -u 10 -d 20 wget <a target="_blank" rel="noopener" href="http://mirrors.163.com/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1503-01.iso">http://mirrors.163.com/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1503-01.iso</a></p>
<p>2)单独限制某个进程的下载和上传速度<br>trickle -s -d 50 -u 25 ftp</p>
<p>3)限制终端下的所有命令带宽为，下载500KB&#x2F;S，上传250KB&#x2F;s;<br>trickle -s -d 500 -u 250 bash &#x2F;&#x2F;单独命令使用时，必须加-s参数</p>
<p>网络带宽测试：iperf<br>iperf 是一个网络性能测试工具，它可以测试 TCP 和 UDP 带宽质量，可以测量最大 TCP 带宽，具有多种参数和 UDP 特性，可以报告带宽，延迟抖动和数据包丢失。利用 iperf 这一特性，可以用来测试一些网络设备如路由器，防火墙，交换机等的性能。</p>
<p>yum -y install iperf gcc gcc-c++ gcc-g77<br>或源码安装：</p>
<p>wget -C <a target="_blank" rel="noopener" href="https://downloads.es.net/pub/iperf/iperf-3-current.tar.gz">https://downloads.es.net/pub/iperf/iperf-3-current.tar.gz</a><br>tar xvf iperf-3-current.tar.gz<br>cd iperf<br>.&#x2F;configure<br>make<br>make install<br>1<br>2<br>3<br>4<br>5<br>6<br>测试示例：<br>1 ）测试最大的TCP 带宽（参数-r是做双向测试，-M指定传输帧的大小）</p>
<p>server端：iperf -s -p 5800 -M 1460 -i 1<br>client端： iperf -c server_ip -p 5800 -M 1460 -m -i 1 -r</p>
<p>测试丢包率<br>server端：iperf -s -i 1 -u<br>client端： iperf -c server_ip -i 1 -u -t 10 -b 500m -d</p>
<p>带宽测试工具：speedtest<br>speedtest 是一个用 Python 写成的工具，speedtest 命令将直接提供上传&#x2F;下载速率；</p>
<p>$ sudo apt install speedtest-cli<br>或者<br>$ sudo pip3 install speedtest-cli</p>
<p>dstat(监控cpu内存)<br>yum install dstat -y &#x2F;&#x2F;安装</p>
<p>参数：<br>-c: 显示cpu综合占有率<br>-m: 显示内存使用情况<br>-n: 显示网络状况<br>-l：显示系统负载情况<br>-r：显示I&#x2F;O请求(读&#x2F;写)情况</p>
<p>eg1：dstat -ncmlr</p>
<p>curl(发送请求)<br>1）url -O 文件名 url &#x2F;&#x2F;保存到文件</p>
<p>2）用-i,显示网页头部信息 当然也会把网页信息显示出来，参数 -v可以显示通信的过程</p>
<p>3）更详细的通信信息可以用 参数 –trance 文件名 url,具体信息保存到单独的文件中<br>curl –trace info.txt <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></p>
<p>4）使用参数 -X指定htpp的动词，例如GET POST，PUT，DELETE等,curl默认的是get请求，如果发送POSt请求<br>curl -X POST <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></p>
<p>5）发送表单的时，只需要把数据拼接到url后面就行<br>curl <a target="_blank" rel="noopener" href="http://www.baidu.com/?data=xxx&data1=xxx">www.baidu.com?data=xxx&amp;data1=xxx</a></p>
<p>6）POST发送表单</p>
<p>curl -X POST –data “data&#x3D;xxx” example.com&#x2F;form.cgi<br>POST发送请求的数据体可以用-d</p>
<p>$ curl -d’login&#x3D;emma＆password&#x3D;123’-X POST <a target="_blank" rel="noopener" href="https://google.com/login">https://google.com/login</a><br>或者<br>$ curl -d ‘login&#x3D;emma’ -d ‘password&#x3D;123’ -X POST <a target="_blank" rel="noopener" href="https://google.com/login">https://google.com/login</a></p>
<p>使用-d参数以后，HTTP 请求会自动加上标头Content-Type : application&#x2F;x-www-form-urlencoded。并且会自动将请求转为 POST 方法，因此可以省略-X POST。-d参数可以读取本地文本文件的数据，向服务器发送。</p>
<p>curl -d ‘@data.txt’ <a target="_blank" rel="noopener" href="https://google.com/login">https://google.com/login</a> &#x2F;&#x2F;读取data.txt文件的内容，作为数据体向服务器发送。<br>7）文件上传<br>curl –form upload&#x3D;@localfilename –form press&#x3D;OK [URL]<br>curl –referer <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> &#x2F;&#x2F;–referer参数表示的是你从哪个页面来的</p>
<p>8）其他参数：<br>–user-agent 可以用-A或者-H来替代，这个字段表示的是客户端设备的信息，服务器可能会根据这个User Agent字段来判断是手机还是电脑<br>curl –user-agent “ 内容” url<br>–cookie参数，使用–cookie可以携带cookie信息<br>curl –cookie “name&#x3D;xxx” URL<br>-c cookie-file可以保存服务器返回的cookie到文件，<br>-b cookie-file可以使用这个文件作为cookie信息，进行后续的请求。<br>–header增加头部信息<br>curl –header “Content-Type:application&#x2F;json” <a href="http://example.com/">http://example.com</a></p>
<p>8、磁盘与文件系统的命令（16个）<br>mount 挂载文件系统。<br>mount -t iso9660 -o ro &#x2F;dev&#x2F;cdrom &#x2F;mnt&#x2F;cdrom&#x2F;  ##将设备&#x2F;dev&#x2F;cdrom挂载到 挂载点 ： &#x2F;mnt&#x2F;cdrom中<br>mount -t iso9660 -o loop &#x2F;home&#x2F;hadoop&#x2F;Centos-6.7.DVD.iso &#x2F;mnt&#x2F;centos ##挂载光盘镜像文件(.iso文件)<br>mount &#x2F;dev&#x2F;fd0 &#x2F;mnt&#x2F;floppy 挂载一个软盘<br>mount -o loop file.iso &#x2F;mnt&#x2F;cdrom 挂载一个文件或ISO镜像文件<br>mount -t vfat &#x2F;dev&#x2F;hda5 &#x2F;mnt&#x2F;hda5 挂载一个Windows FAT32文件系统<br>mount &#x2F;dev&#x2F;sda1 &#x2F;mnt&#x2F;usbdisk 挂载一个usb 捷盘或闪存设备<br>mount -t smbfs -o username&#x3D;user,password&#x3D;pass &#x2F;&#x2F;WinClient&#x2F;share &#x2F;mnt&#x2F;share 挂载一个windows网络共享<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>注：挂载的资源在重启后即失效，需要重新挂载。要想自动挂载，可以将挂载信息设置到&#x2F;etc&#x2F;fstab配置文件中，vi &#x2F;etc&#x2F;fstab，增加：&#x2F;dev&#x2F;cdrom &#x2F;mnt&#x2F;cdrom iso9660 defaults 0 0</p>
<p>umount 卸载文件系统。<br>umount &#x2F;mnt&#x2F;cdrom（挂载点）<br>fuser -km &#x2F;mnt&#x2F;hda2 当设备繁忙时强制卸载<br>umount -n &#x2F;mnt&#x2F;hda2 运行卸载操作而不写入 &#x2F;etc&#x2F;mtab 文件- 当文件为只读或当磁盘写满时非常有用</p>
<p>fsck 检查并修复Linux文件系统。<br>dd 转换、复制文件。<br>dumpe2fs 导出ext2&#x2F;ext3&#x2F;ext4等文件系统信息。<br>dump ext2&#x2F;3&#x2F;4等文件系统备份工具。<br>fdisk 磁盘分区命令，适用于2TB以下磁盘分区。<br>parted 磁盘分区命令，没有磁盘大小限制，常用于2TB以下磁盘分区。<br>mkfs 格式化创建Linux文件系统。<br>partprobe 更新内核的硬盘分区表信息。<br>e2fsck 检查ext2&#x2F;ext3&#x2F;ext4等类型文件系统。<br>mkswap 创建Linux的交换分区。<br>swapon 启用交换分区。<br>swapoff 关闭交换分区。<br>sync 将内存缓冲区内的数据写入磁盘。<br>resize2fs 调整ext2&#x2F;ext3&#x2F;ext4等文件系统大小。</p>
<p>du 计算磁盘空间使用情况。<br>du -sh &#x2F;mnt&#x2F;cdrom&#x2F;packages统计文件或文件夹的大小<br>du -cks * | sort -rn | head -n 10 ##找出占用空间最多的文件或目录：<br>du -sh dir1 估算目录 ‘dir1’ 已经使用的磁盘空间’<br>du -sk * | sort -rn 以容量大小为依据依次显示文件和目录的大小<br>1<br>2<br>3<br>4<br>ls -lSr |more 以尺寸大小排列文件和目录<br>rpm -q -a –qf ‘%10{SIZE}t%{NAME}n’ | sort -k1,1n 以大小为依据依次显示已安装的rpm包所使用的空间 (fedora, redhat类系统)<br>dpkg-query -W -f&#x3D;‘I n s t a l l e d − S i z e ; 10 t {Installed-Size;10}tInstalled−Size;10t{Package}n’ | sort -k1,1n 以大小为依据显示已安装的deb包所使用的空间 (ubuntu, debian类系统)</p>
<p>df 报告文件系统磁盘空间使用情况。<br>df -h 查看磁盘的空间<br>1<br>磁盘I&#x2F;O负载<br>#iostat -x 1 2 &#x2F;&#x2F;检查I&#x2F;O使用率(%util)是否超过100%</p>
<p>光盘操作<br>光盘</p>
<p>cdrecord -v gracetime&#x3D;2 dev&#x3D;&#x2F;dev&#x2F;cdrom -eject blank&#x3D;fast -force 清空一个可复写的光盘内容<br>mkisofs &#x2F;dev&#x2F;cdrom &gt; cd.iso 在磁盘上创建一个光盘的iso镜像文件<br>mkisofs &#x2F;dev&#x2F;cdrom | gzip &gt; cd_iso.gz 在磁盘上创建一个压缩了的光盘iso镜像文件<br>mkisofs -J -allow-leading-dots -R -V “Label CD” -iso-level 4 -o .&#x2F;cd.iso data_cd 创建一个目录的iso镜像文件<br>cdrecord -v dev&#x3D;&#x2F;dev&#x2F;cdrom cd.iso 刻录一个ISO镜像文件<br>gzip -dc cd_iso.gz | cdrecord dev&#x3D;&#x2F;dev&#x2F;cdrom - 刻录一个压缩了的ISO镜像文件<br>mount -o loop cd.iso &#x2F;mnt&#x2F;iso 挂载一个ISO镜像文件<br>cd-paranoia -B 从一个CD光盘转录音轨到 wav 文件中<br>cd-paranoia – “-3” 从一个CD光盘转录音轨到 wav 文件中（参数-3）<br>cdrecord –scanbus 扫描总线以识别scsi通道<br>dd if&#x3D;&#x2F;dev&#x2F;hdc | md5sum 校验一个设备的md5sum编码，例如一张 CD</p>
<p>文件系统其他<br>badblocks -v &#x2F;dev&#x2F;hda1 检查磁盘hda1上的坏磁块<br>fsck &#x2F;dev&#x2F;hda1 修复&#x2F;检查hda1磁盘上linux文件系统的完整性<br>fsck.ext2 &#x2F;dev&#x2F;hda1 修复&#x2F;检查hda1磁盘上ext2文件系统的完整性<br>e2fsck &#x2F;dev&#x2F;hda1 修复&#x2F;检查hda1磁盘上ext2文件系统的完整性<br>e2fsck -j &#x2F;dev&#x2F;hda1 修复&#x2F;检查hda1磁盘上ext3文件系统的完整性<br>fsck.ext3 &#x2F;dev&#x2F;hda1 修复&#x2F;检查hda1磁盘上ext3文件系统的完整性<br>fsck.vfat &#x2F;dev&#x2F;hda1 修复&#x2F;检查hda1磁盘上fat文件系统的完整性<br>fsck.msdos &#x2F;dev&#x2F;hda1 修复&#x2F;检查hda1磁盘上dos文件系统的完整性<br>dosfsck &#x2F;dev&#x2F;hda1 修复&#x2F;检查hda1磁盘上dos文件系统的完整性</p>
<p>初始化一个文件系统</p>
<p>mkfs &#x2F;dev&#x2F;hda1 在hda1分区创建一个文件系统<br>mke2fs &#x2F;dev&#x2F;hda1 在hda1分区创建一个linux ext2的文件系统<br>mke2fs -j &#x2F;dev&#x2F;hda1 在hda1分区创建一个linux ext3(日志型)的文件系统<br>mkfs -t vfat 32 -F &#x2F;dev&#x2F;hda1 创建一个 FAT32 文件系统<br>fdformat -n &#x2F;dev&#x2F;fd0 格式化一个软盘<br>mkswap &#x2F;dev&#x2F;hda3 创建一个swap文件系统</p>
<p>SWAP文件系统</p>
<p>mkswap &#x2F;dev&#x2F;hda3 创建一个swap文件系统<br>swapon &#x2F;dev&#x2F;hda3 启用一个新的swap文件系统<br>swapon &#x2F;dev&#x2F;hda2 &#x2F;dev&#x2F;hdb3 启用两个swap分区</p>
<p>9、系统其它（25个）<br>echo 打印变量，直接输出指定的字符串<br>printf 将结果格式化输出到标准输出中。<br>rpm 管理rpm包命令。<br>yum 自动化简单化地管理rpm包的命令。<br>watch 周期的执行给定的命令，并将命令的输出以全屏方式显示。<br>alias 设置系统别名。<br>unalias 取消系统别名。<br>date 查看、设置系统时间。<br>clear 清除屏幕，简称清屏。<br>history 查看命令执行的历史纪录。<br>eject 弹出光驱。<br>time 计算命令执行时间。<br>nc 功能强大网络工具。<br>xargs 将标准输入转换成命令行的参数。<br>exec 调用并执行指令的命令。<br>export 设置或者显示环境变量。<br>unset 删除变量、函数。<br>type 用于判断另外一个命令是否为内置的命令。<br>bc 命令行科学计算器<br>系统管理、性能监视命令（9个）<br>chkconfig 管理Linux系统开机启动项。<br>vmstat 虚拟内存统计。<br>mpstat 显示各个可用CPU的状态统计。<br>iostat 统计系统的IO。<br>sar 全面地获取系统CPU、运行队列、磁盘读写、分页、内存、 CPU中断和网络性能数据。<br>ipcs 用于报告Linux中进程间通信设施的状态，显示信息包括消息列表、共享内存和信号量信息。<br>ipcrm 用来删除一个或更多的消息队列、信号量集或者共享内存标识。<br>strace 用于诊断、调试Linux用户空间跟踪器。我们用它来监控用户空间进程和内核交互，比如系统调用、信号传递、进程状态变更。<br>ltrace 命令会跟踪进程库函数调用，它会显现哪个库函数被调用。<br>shutdown 关机。<br>shutdown -h now 关闭系统<br>init 0 关闭系统<br>telinit 0 关闭系统<br>shutdown -h hours:minutes &amp; 按预定时间关闭系统<br>shutdown -c 取消按预定时间关闭系统<br>shutdown -r now 重启<br>reboot 重启(2)<br>logout 注销<br>halt 关机。<br>poweroff 关闭电源。<br>logout 退出当前登录的Shell。<br>exit 退出当前登录的Shell。<br>Ctrl+d 退出当前登录的Shell的快捷键。<br>进程管理相关命令（15个）<br>bg 将一个后台暂停的命令，变成继续执行。<br>fg 将后台的命令调至前台继续运行。<br>jobs 查看当前有多少后台运行的命令。<br>kill 终止进程。<br>killall 通过进程名来终止进程。<br>pkill 通过进程名来终止进程。<br>crontab 定时任务命令。<br>ps 显示进程快照。<br>pstree 树形显示进程。<br>nice&#x2F;renice 调整程序运行的优先级。<br>nohup 忽略挂起信号运行指定。<br>pgrep 查找匹配条件进程。<br>runlevel 查看系统当前运行级别。<br>init 切换运行级别。<br>service 启动、停止、重新启动、关闭系统服务，还可以显示所有系统服务的当前状态。</p>
<p>软件安装命令<br>1）RPM 包 - （Fedora, Redhat及类似系统）<br>rpm -ivh package.rpm 安装一个rpm包<br>rpm -ivh –nodeeps package.rpm 安装一个rpm包而忽略依赖关系警告<br>rpm -U package.rpm 更新一个rpm包但不改变其配置文件<br>rpm -F package.rpm 更新一个确定已经安装的rpm包<br>rpm -e package_name.rpm 删除一个rpm包<br>rpm -qa 显示系统中所有已经安装的rpm包<br>rpm -qa | grep httpd 显示所有名称中包含 “httpd” 字样的rpm包<br>rpm -qi package_name 获取一个已安装包的特殊信息<br>rpm -qg “System Environment&#x2F;Daemons” 显示一个组件的rpm包<br>rpm -ql package_name 显示一个已经安装的rpm包提供的文件列表<br>rpm -qc package_name 显示一个已经安装的rpm包提供的配置文件列表<br>rpm -q package_name –whatrequires 显示与一个rpm包存在依赖关系的列表<br>rpm -q package_name –whatprovides 显示一个rpm包所占的体积<br>rpm -q package_name –scripts 显示在安装&#x2F;删除期间所执行的脚本l<br>rpm -q package_name –changelog 显示一个rpm包的修改历史<br>rpm -qf &#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf 确认所给的文件由哪个rpm包所提供<br>rpm -qp package.rpm -l 显示由一个尚未安装的rpm包提供的文件列表<br>rpm –import &#x2F;media&#x2F;cdrom&#x2F;RPM-GPG-KEY 导入公钥数字证书<br>rpm –checksig package.rpm 确认一个rpm包的完整性<br>rpm -qa gpg-pubkey 确认已安装的所有rpm包的完整性<br>rpm -V package_name 检查文件尺寸、 许可、类型、所有者、群组、MD5检查以及最后修改时间<br>rpm -Va 检查系统中所有已安装的rpm包- 小心使用<br>rpm -Vp package.rpm 确认一个rpm包还未安装<br>rpm2cpio package.rpm | cpio –extract –make-directories bin 从一个rpm包运行可执行文件<br>rpm -ivh &#x2F;usr&#x2F;src&#x2F;redhat&#x2F;RPMS&#x2F;arch&#x2F;package.rpm 从一个rpm源码安装一个构建好的包<br>rpmbuild –rebuild package_name.src.rpm 从一个rpm源码构建一个 rpm 包</p>
<p>2）YUM 软件包升级器 - （Fedora, RedHat及类似系统）<br>yum install package_name 下载并安装一个rpm包<br>yum localinstall package_name.rpm 将安装一个rpm包，使用你自己的软件仓库为你解决所有依赖关系<br>yum update package_name.rpm 更新当前系统中所有安装的rpm包<br>yum update package_name 更新一个rpm包<br>yum remove package_name 删除一个rpm包<br>yum list 列出当前系统中安装的所有包<br>yum search package_name 在rpm仓库中搜寻软件包<br>yum clean packages 清理rpm缓存删除下载的包<br>yum clean headers 删除所有头文件<br>yum clean all 删除所有缓存的包和头文件</p>
<p>3）DEB 包 (Debian, Ubuntu 以及类似系统)<br>dpkg -i package.deb 安装&#x2F;更新一个 deb 包<br>dpkg -r package_name 从系统删除一个 deb 包<br>dpkg -l 显示系统中所有已经安装的 deb 包<br>dpkg -l | grep httpd 显示所有名称中包含 “httpd” 字样的deb包<br>dpkg -s package_name 获得已经安装在系统中一个特殊包的信息<br>dpkg -L package_name 显示系统中已经安装的一个deb包所提供的文件列表<br>dpkg –contents package.deb 显示尚未安装的一个包所提供的文件列表<br>dpkg -S &#x2F;bin&#x2F;ping 确认所给的文件由哪个deb包提供</p>
<p>4）APT 软件工具 (Debian, Ubuntu 以及类似系统)<br>apt-get install package_name 安装&#x2F;更新一个 deb 包<br>apt-cdrom install package_name 从光盘安装&#x2F;更新一个 deb 包<br>apt-get update 升级列表中的软件包<br>apt-get upgrade 升级所有已安装的软件<br>apt-get remove package_name 从系统删除一个deb包<br>apt-get check 确认依赖的软件仓库正确<br>apt-get clean 从下载的软件包中清理缓存<br>apt-cache search searched-package 返回包含所要搜索字符串的软件包名称</p>
<p>10、四剑客及高级（grep，sed，awk，cut，管道，xargs）<br>10.1 cut：以分隔符截取列（分段）<br>说明：cut命令用于读取文件的每一行按分隔符获取指定字节、字符和字段数并将这些字节、字符和字段写至标准输出。我们把cutm命令，可简单认为是对行数据的处理。官方释义：remove sections from each line of files（截取每行分段）；如果不指定 File 参数，cut 命令将读取标准输入。必须指定 -b、-c 或 -f 标志之一。</p>
<p>语法：</p>
<p>cut OPTION… [FILE]…<br>cut  [-bn] [file]<br>cut [-c] [file]<br>cut [-df] [file]<br>1<br>2<br>3<br>4<br>参数：</p>
<p>-b ：以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了 -n 标志。<br>-c ：以字符为单位进行分割。<br>-d ：自定义分隔符，默认为制表符(TAB)。<br>-f ：与-d一起使用，指定显示哪个区域，即指定哪一个字段进行提取。。<br>-n ：取消分割多字节字符。仅和 -b 标志一起使用。如果字符的最后一个字节落在由 -b 标志的 List 参数指示的范围之内，该字符将被写出；否则，该字符将被排除</p>
<p>eg1：cut截取以:分割保留第七段：grep hadoop &#x2F;etc&#x2F;passwd | cut -d: -f7 &#x2F;&#x2F;分隔符也可以单引号引起</p>
<p>eg2：使用分隔符:打印&#x2F;etc&#x2F;passwd文件中每一行的第一个字段<br>cut -d ‘:’ -f 1 &#x2F;etc&#x2F;passwd</p>
<p>eg3：grep ‘&#x2F;bin&#x2F;bash’ &#x2F;etc&#x2F;passwd| cut -d ‘:’ -f 1,6 &#x2F;&#x2F;从&#x2F;etc&#x2F;passwd文件提取第一和第六个字段</p>
<p>eg4：grep ‘&#x2F;bin&#x2F;bash’ &#x2F;etc&#x2F;passwd|cut -d ‘:’ -f 1-4,6,7 &#x2F;&#x2F;取1-4连续字段的范围，指定以-分隔的开始字段和结束字段即可；</p>
<p>eg5：grep ‘&#x2F;bin&#x2F;bash’ &#x2F;etc&#x2F;passwd|cut -d ‘:’ –complement -f 2 &#x2F;&#x2F;–complement用于排除&#x2F;etc&#x2F;passwd文件中的第二个字段</p>
<p>eg6：cut -d ‘:’ -f1,7 –output-delimiter&#x3D;’ ’ &#x2F;etc&#x2F;passwd|sort &#x2F;&#x2F;–output-delimiter&#x3D;’ ‘用于指定输出的分隔符，默认输出的为cut处理时的指定分隔符</p>
<p>注：cut命令一个限制是它不支持指定多个字符作为分隔符。多个空格被视为多个字段分隔符，必须使用tr命令才能得到所需的输出。</p>
<p>10.2 grep查询表达式匹配到的字符或字符串<br>grep -v hadoop &#x2F;etc&#x2F;passwd ##查询不包含hadoop的行<br>grep ‘hadoop’ &#x2F;etc&#x2F;passwd ##一般用单引号，如果内部有转移字符的话且想保留转移字符的意义，这时用双引号；单引号屏蔽特殊字符的意义。</p>
<p>grep ‘h.<em>p’ &#x2F;etc&#x2F;passwd   正则表达(点代表任意一个字符)<br>grep ‘^hadoop’ &#x2F;etc&#x2F;passwd  正则表达以hadoop开头<br>grep ‘hadoop$’ &#x2F;etc&#x2F;passwd   以hadoop结尾<br>grep -v ‘^#’  a.txt | grep -v ‘^$’   查找不是以#开头的行<br>grep ‘^[hr]’&#x2F;etc&#x2F;passwd    以h或r开头的<br>grep ‘^[^hr]’ &#x2F;etc&#x2F;passwd  不是以h和r开头的<br>grep ‘^[^h-r]’ &#x2F;etc&#x2F;passwd 不是以h到r开头的<br>grep [0-9] &#x2F;var&#x2F;log&#x2F;messages 选择 ‘&#x2F;var&#x2F;log&#x2F;messages’ 文件中所有包含数字的行<br>grep Aug -R &#x2F;var&#x2F;log&#x2F;</em> 在目录 ‘&#x2F;var&#x2F;log’ 及随后的目录中搜索字符串”Aug”<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>规则：</p>
<p>. : 任意一个字符</p>
<p>a* : 任意多个a(零个或多个a)</p>
<p>a? : 零个或一个a</p>
<p>a+ : 一个或多个a</p>
<p>.* : 任意多个任意字符</p>
<p>. : 转义.</p>
<p>o{2} : o重复两次</p>
<p>10.3 awk 文本分析工具<br>awk对文件进行逐行读入，默认以空格为分隔符将每行切片，切开的部分再进行各种分析处理，即awk会对文本依次对每一行进行处理，然后输出。 awk是行处理器,在处理庞大文件时不会出现内存溢出或是处理缓慢的问题，通常用来格式化文本信息。</p>
<p>awk的用法：</p>
<p>awk 参数 ’ BEGIN{} &#x2F;&#x2F; {action1;action2} ’ END{} 文件名 &#x2F;&#x2F;-F 指定分隔符;-f 调用脚本，-v 定义变量，awk的格式中，-F后紧跟单引号，然后里面可自定义输出分隔符，print的动作要用 { } 括起来，否则会报错。print还可以打印自定义的内容，但是自定义的内容要用“”双引号括起来。</p>
<p>Begin{}:   &#x2F;&#x2F;初始化代码块，在对每一行进行处理之前，初始化代码，主要是引用全局变量，设置FS分隔符<br>&#x2F;匹配内容&#x2F;:  &#x2F;&#x2F; 匹配代码块，可以是字符串或正则表达式；’$1<del>&#x2F;me&#x2F;‘中，</del>表示匹配的意思，获取第一个字段并匹配其后&#x2F; &#x2F;内的关键字me；</p>
<p>{} :        &#x2F;&#x2F; 命令代码块，包含一条或多条命令,多条命令用 ;  隔开</p>
<p>END{} :     &#x2F;&#x2F;结尾代码块，在对每一行进行处理之后再执行的代码块，主要是进行最终计算或输出结尾摘要信息<br>1<br>2<br>3<br>4<br>5<br>6<br>eg1： &#x2F;&#x2F;统计 &#x2F;etc&#x2F;passwd 文件中包含root行的总数<br>#awk ‘BEGIN{X&#x3D;0}&#x2F;root&#x2F;{X+&#x3D;1}END{print “I find”,X,“root lines”}’ &#x2F;etc&#x2F;passwd</p>
<p>eg2:显示 &#x2F;etc&#x2F;passwd 中含有 root 的行<br>awk ‘&#x2F;root&#x2F;’ &#x2F;etc&#x2F;passwd<br>eg3:以 : 为分隔，显示&#x2F;etc&#x2F;passwd中每行的第1和第7个字段（可以理解为1和第7列）<br>awk -F “:” ‘{print $1,$7}’ &#x2F;etc&#x2F;passwd<br>awk ‘BEGIN{FS&#x3D;“:”}{print $1,$7}’ &#x2F;etc&#x2F;passwd<br>eg4:以 : 为分隔，显示&#x2F;etc&#x2F;passwd中含有 root 的行的第1和第7个字段<br>awk -F “:” ‘&#x2F;root&#x2F; {print $1,$7}’ &#x2F;etc&#x2F;passwd<br>eg5:以 : 为分隔，显示&#x2F;etc&#x2F;passwd中以 root 开头行的第1和第7个字段<br>awk -F “:” ‘&#x2F;^root&#x2F; {print $1,$7}’ &#x2F;etc&#x2F;passwd<br>eg6:以 : 为分隔，显示&#x2F;etc&#x2F;passwd中第3个字段大于999的行的第1和第7个字段</p>
<p>awk -F “:” ‘$3&gt;999{print $1,$7}’  &#x2F;etc&#x2F;passwd<br>类似的还有：awk -F: ‘$3&#x3D;&#x3D;”600”‘ passwd </p>
<p>这是awk匹配条件操作符的用法，用逻辑符号判断的，比如 ‘&#x3D;&#x3D;’ 就是等于，也可以理解为 ‘精确匹配’ 另外也有 &gt;, ‘&gt;&#x3D;, ‘&lt;, ‘&lt;&#x3D;, ‘!&#x3D; 等等，值得注意的是，在和数字比较时，若把比较的数字用双引号引起来后，那么awk不会认为是数字，而认为是字符，加单引号和不加则认为是数字。还可以使用 &amp;&amp; “并且”和  || “或者” 的意思。<br>awk -F: ‘$3&gt;$4 &amp;&amp; $7&#x3D;&#x3D;”&#x2F;bin&#x2F;bash”‘ passwd<br>1<br>2<br>3<br>4<br>5<br>eg7:以 : 为分隔，显示&#x2F;etc&#x2F;passwd中第7个字段包含bash的行的第1和第7个字段<br>awk -F “:” ‘$7 ~ “bash” {print $1,$7}’ &#x2F;etc&#x2F;passwd<br>eg8:以 : 为分隔，显示&#x2F;etc&#x2F;passwd中第7个字段不包含bash的行的第1和第7个字段<br>awk -F “:” ‘$7!<del>“nologin”{print $1,$7}’ &#x2F;etc&#x2F;passwd<br>eg9:以 : 为分隔，显示$3&gt;999并且第7个字段包含bash的行的第1和第7个字段，非系统用户的异常登录权限<br>awk -F “:” ‘$3&gt;999&amp;&amp;$7</del>“bash”{print $1,$7}’ &#x2F;etc&#x2F;passwd<br>eg10:以 : 为分隔，显示$3&gt;999或第7个字段包含bash的行的第1和第7个字段<br>awk -F “:” ‘$3&gt;999||$7~“bash”{print $1,$7}’ &#x2F;etc&#x2F;passwd<br>eg11：获取eth0网卡的ip和掩码<br>ifconfig eth0|awk -F “[ :]+” ‘NR&#x3D;&#x3D;2{print $4 “&#x2F;” $NF}’ &#x2F;&#x2F;[ :]+这个是正则表达式，+表示一个或多个，这里就表示一个或多个空格或冒号;</p>
<p>eg12:awk -F: ‘&#x2F;root&#x2F; {print $1,$3} &#x2F;user&#x2F; {print $1,$3}’ passwd &#x2F;&#x2F;多次匹配，本例中全文匹配包含root关键词的行，再匹配包含user的行，打印所匹配的第1、3段。</p>
<p>【字符含义】：</p>
<p>$0           表示整个当前行<br>$1           每行第一个字段<br>NF          字段数量,用分隔符分隔后一共有多少段<br>NR      行数,每行的记录号，多文件记录递增,{print NR”:”NF}列出行号，以冒号分隔，列出共有多少段；<br>FNR        与NR类似，不过多文件记录不递增，每个文件都从1开始<br>\t            制表符<br>\n           换行符<br>FS          BEGIN时定义分隔符,内建变量FS保存输入域分隔符的值，默认是空格或tab。我们可以通过-F命令行选项修改FS的值。如$ awk -F: ‘{print $1,$5}’ test将打印以冒号为分隔符的第一，第五列的内容。可以同时使用多个域分隔符，这时应该把分隔符写成放到方括号中，如$awk -F’[ :\t]’ ‘{print $1,$3}’ test，表示以空格、冒号和tab作为分隔符。<br>RS         输入的记录分隔符， 默认为换行符(即文本是按一行一行输入)<br>~            包含<br>!~           不包含<br>&#x3D;&#x3D;         等于，必须全部相等，精确比较<br>!&#x3D;           不等于，精确比较<br>&amp;&amp;         逻辑与<br>||             逻辑或<br>+            匹配时表示1个或1个以上<br>&#x2F;[0-9][0-9]+&#x2F;     两个或两个以上数字<br>&#x2F;[0-9][0-9]*&#x2F;     一个或一个以上数字<br>OFS        自定义输出字段分隔符， 默认也是空格，可以改为其他的，’OFS&#x3D;”#”{print $3,$4}’，分隔符需要用双引号括起来<br>ORS        输出的记录分隔符，默认为换行符,即处理结果也是一行一行输出到屏幕<br>-F  [:#&#x2F;]    定义了三个分隔符<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>【print 打印】：print 是 awk打印指定内容的主要命令，也可以用 printf</p>
<p>awk ‘{print}’ &#x2F;etc&#x2F;passwd 等效于 awk ‘{print $0}’ &#x2F;etc&#x2F;passwd<br>awk ‘{print “ “}’ &#x2F;etc&#x2F;passwd 不输出passwd的内容，而是输出相同个数的空行，进一步解释了awk是一行一行处理文本<br>awk ‘{print “a”}’ &#x2F;etc&#x2F;passwd &#x2F;&#x2F;输出相同个数的a行，一行只有一个a字母<br>awk -F: ‘{print $1}’ &#x2F;etc&#x2F;passwd 等效于 awk -F “:” ‘{print $1}’ &#x2F;etc&#x2F;passwd<br>awk -F: ‘{print $1 $2}’ &#x2F;&#x2F;输入字段1,2，中间不分隔<br>awk -F: ‘{print $1,$3,$6}’ OFS&#x3D;“\t” &#x2F;etc&#x2F;passwd 输出字段1,3,6， 以制表符作为输出分隔符<br>awk -F: ‘{print $1; print $2}’ &#x2F;etc&#x2F;passwd 输入字段1,2，分行输出<br>awk -F: ‘{print $1 “<strong>” $2}’ &#x2F;etc&#x2F;passwd 输入字段1,2，中间以</strong>分隔<br>awk -F: ‘{print “name:”$1”\tid:”$3}’ &#x2F;etc&#x2F;passwd 自定义格式输出字段1,2</p>
<p>awk -F: ‘{print NF}’ &#x2F;etc&#x2F;passwd 显示每行有多少字段(多少个分段&#x2F;多少列)<br>awk -F: ‘NF&gt;2{print }’ &#x2F;etc&#x2F;passwd 将每行字段数大于2的打印出来<br>awk -F: ‘NR&#x3D;&#x3D;5{print}’ &#x2F;etc&#x2F;passwd 打印出&#x2F;etc&#x2F;passwd文件中的第5行<br>awk -F: ‘NR&#x3D;&#x3D;5|NR&#x3D;&#x3D;6{print}’ &#x2F;etc&#x2F;passwd 打印出&#x2F;etc&#x2F;passwd文件中的第5行和第6行<br>awk -F: ‘NR!&#x3D;1{print}’ &#x2F;etc&#x2F;passwd 不显示第一行<br>awk -F: ‘{print &gt; “1.txt”}’ &#x2F;etc&#x2F;passwd 输出到文件中<br>awk -F: ‘{print}’ &#x2F;etc&#x2F;passwd &gt; 2.txt 使用重定向输出到文件中</p>
<p>【字符匹配】：</p>
<p>awk  -F: ‘&#x2F;root&#x2F;{print }’  &#x2F;etc&#x2F;passwd                         打印出文件中含有root的行<br>awk  -F: ‘&#x2F;‘$A’&#x2F;{print }’  &#x2F;etc&#x2F;passwd                         打印出文件中含有变量 $A的行<br>awk -F: ‘!&#x2F;root&#x2F;{print}’ &#x2F;etc&#x2F;passwd                           打印出文件中不含有root的行<br>awk -F:  ‘&#x2F;root|tom&#x2F;{print}’  &#x2F;etc&#x2F;passwd                    打印出文件中含有root或者tom的行<br>awk -F: ‘&#x2F;mail&#x2F;,mysql&#x2F;{print}’  test                            打印出文件中含有 mail<em>mysql 的行，</em>代表有0个或任意多个字符<br>awk -F: ‘&#x2F;^[2][7][7]*&#x2F;{print}’  test                              打印出文件中以27开头的行，如27,277,27gff 等等<br>awk -F: ‘$1<del>&#x2F;root&#x2F;{print}’ &#x2F;etc&#x2F;passwd                     打印出文件中第一个字段是root的行<br>awk -F: ‘($1&#x3D;&#x3D;”root”){print}’ &#x2F;etc&#x2F;passwd               打印出文件中第一个字段是root的行，与上面的等效<br>awk -F: ‘$1!</del>&#x2F;root&#x2F;{print}’ &#x2F;etc&#x2F;passwd                   打印出文件中第一个字段不是root的行<br>awk -F: ‘($1!&#x3D;”root”){print}’ &#x2F;etc&#x2F;passwd                打印出文件中第一个字段不是root的行，与上面的等效<br>awk -F: ‘$1<del>&#x2F;root|ftp&#x2F;{print}’ &#x2F;etc&#x2F;passwd               打印出文件中第一个字段是root或ftp的行<br>awk -F: ‘($1&#x3D;&#x3D;”root”||$1&#x3D;&#x3D;”ftp”){print}’ &#x2F;etc&#x2F;passwd   打印出文件中第一个字段是root或ftp的行，与上面的等效<br>awk -F: ‘$1!</del>&#x2F;root|ftp&#x2F;{print}’ &#x2F;etc&#x2F;passwd              打印出文件中第一个字段不是root或不是ftp的行<br>awk -F: ‘($1!&#x3D;”root”||$1!&#x3D;”ftp”){print}’ &#x2F;etc&#x2F;passwd    打印出文件中第一个字段不是root或不是ftp的行，与上面等效<br>awk -F: ‘{if($1~&#x2F;mail&#x2F;) {print $1} else {print $2}}’  &#x2F;etc&#x2F;passwd   如果第一个字段是mail，则打印第一个字段，否则打印第2个字段<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>awk ‘&#x2F;$1|$6&#x2F;{print $1}’ &#x2F;etc&#x2F;shadow<br>awk ‘&#x2F;$6&#x2F;{print $1}’ &#x2F;etc&#x2F;shadow  </p>
<p>上述两条命令等效，其中正则表达式’&#x2F;$1|$6&#x2F;{print $1}’表示使用匹配模式’&#x2F;匹配模式&#x2F;‘，|表可以匹配多个规则，抓取$1或$6字符的行，$0它表示整行，$n表第n个字段，因打印分段默认分隔符为空格，所以$1就相当于整行了，关于口令特性如下：<br> 星号代表帐号被锁定，将无法登录；双叹号表示这个密码已经过期了， 如果是$x$xxxxxxxx$的形式，则代表密码正常。<br> $6$开头的，表明是用SHA-512加密的，密文长度86，示例中‘5NAhdLZN’为salt值，是一个随机字符串，供加密使用<br> $1$ 表明是用MD5加密的，密文长度22个字符<br> $2$ 是用Blowfish加密的，<br> $5$ 是用 SHA-256加密的，密文长度43</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>格式化输出<br>awk ‘{printf “%-5s %.2d”,$1,$2}’ test</p>
<p>printf 表示格式输出<br>%格式化输出分隔符<br>-8表示长度为8个字符<br>s表示字符串类型，d表示小数</p>
<p>10.4 sed：流编辑器<br>sed把当前处理的行存储在一个称为“模式空间”（pattern space）的临时缓冲区中。 sed 处理数据之前，需要预先提供一组规则，sed 会按照此规则来编辑数据。此命令的关键在于掌握各式各样的脚本命令及模式匹配；sed模式是匹配行，而非对应的字符串，操作时对匹配航的匹配字符串，模式中y可进行字符替换，它会对单个字符一一映射匹配替换。</p>
<p>【语法】：<br>1）sed的命令格式：sed [options] ‘command’ file(s); &#x2F;&#x2F;默认直接在命令行模式上进行sed动作编辑</p>
<p>2）sed的脚本格式：sed [options] -f scriptfile file(s); &#x2F;&#x2F;-f选项，将sed的动作写在一个文件内，用–f filename 执行filename内的sed动作;</p>
<p>注意：对于&#x2F;pattern&#x2F;command，必须用正斜线将要指定的 pattern 封起来，sed 会将该命令作用到包含指定文本模式的行上。<br>命令执行数据的顺序如下：</p>
<p>1&gt;每次仅读取一行内容；<br>2&gt;根据提供的规则命令匹配并修改数据。注意， sed 默认不会直接修改源文件数据，而是会将数据复制到缓冲区中，修改也仅限于缓冲区中的数据；<br>3&gt;将执行结果输出。<br>当一行数据匹配完成后，它会继续读取下一行数据，并重复这个过程，直到将文件中所有数据处理完毕。</p>
<p>【选项】：<br>-i ：直接修改文件内容;<br>-n ：只打印模式匹配的行；默认情况下，sed 会在所有的脚本指定执行完毕后，会自动输出处理后的内容，而该选项会屏蔽启动输出，需使用 print 命令来完成输出。<br>-r ：支持扩展表达式;<br>-e 脚本命令: 该选项会将其后跟的脚本命令添加到已有的命令中<br>-f 脚本命令文件: 该选项会将其后文件中的脚本命令添加到已有的命令中</p>
<p>【模式参数】：<br>a（或 i）+\新文本内容： 在当前行下面插入文本;<br>i\ +要插入的新文本 ： 在当前行上面插入文本;<br>c+用于替换的新文本： 把选定的行改为新的文本;<br>y&#x2F;inchars&#x2F;outchars&#x2F;：转换命令会对 inchars 和 outchars 值进行一对一的映射，即 inchars 中的第一个字符会被转换为 outchars 中的第一个字符，第二个字符会被转换成 outchars 中的第二个字符…这个映射过程会一直持续到处理完指定字符。如果 inchars 和 outchars 的长度不同，则 sed 会产生一条错误消息。<br>d 删除，删除选择的行;<br>D 删除模板块的第一行;<br>s 替换指定字符;<br>h 拷贝模板块的内容到内存中的缓冲区;<br>H 追加模板块的内容到内存中的缓冲区;<br>g 获得内存缓冲区的内容，并替代当前模板块中的文本;<br>G 获得内存缓冲区的内容，并追加到当前模板块文本的后面;<br>l 列表不能打印字符的清单;<br>n 读取下一个输入行，用下一个命令处理新的行而不是用第一个命令;<br>N 追加下一个输入行到模板块后面并在二者间嵌入一个新行，改变当前行号码;<br>p 打印模板块的行，即搜索符号条件的行，并输出该行的内容。 P(大写) 打印模板块的第一行;<br>q 退出Sed;<br>b lable 分支到脚本中带有标记的地方，如果分支不存在则分支到脚本的末尾;<br>r file 从file中读行;<br>t label if分支，从最后一行开始，条件一旦满足或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾;<br>T label 错误分支，从最后一行开始，一旦发生错误或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾;<br>w file 写并追加模板块到file末尾;<br>W file 写并追加模板块的第一行到file末尾;<br>! 表示后面的命令对所有没有被选定的行发生作用;<br>&#x3D; 打印当前行号;</p>
<h1 id="把注释扩展到下一个换行符以前"><a href="#把注释扩展到下一个换行符以前" class="headerlink" title="把注释扩展到下一个换行符以前;"></a>把注释扩展到下一个换行符以前;</h1><p>【文本替换参数】：<br>g 表示行内全面替换;</p>
<p>p 表示打印行;</p>
<p>w 表示把行写入一个文件;</p>
<p>x 表示互换模板块中的文本和缓冲区中的文本;</p>
<p>y 表示把一个字符翻译为另外的字符（但是不用于正则表达式）;</p>
<p>\1 子串匹配标记;</p>
<p>&amp; 已匹配字符串标记;</p>
<p>【文本匹配】：</p>
<p>^ 匹配行开始，如：&#x2F;^sed&#x2F;匹配所有以sed开头的行;</p>
<p>$ 匹配行结束，如：&#x2F;sed$&#x2F;匹配所有以sed结尾的行;</p>
<p>. 匹配一个非换行符的任意字符，如：&#x2F;s.d&#x2F;匹配s后接一个任意字符，最后是d;</p>
<p>匹配0个或多个字符，如：&#x2F;*sed&#x2F;匹配所有模板是一个或多个空格后紧跟sed的行;<br>[] 匹配一个指定范围内的字符，如&#x2F;[ss]ed&#x2F;匹配sed和Sed;</p>
<p>[^] 匹配一个不在指定范围内的字符，如：&#x2F;[^A-RT-Z]ed&#x2F;匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行;</p>
<p>(…) 匹配子串，保存匹配的字符，如s&#x2F;(love)able&#x2F;\1rs，loveable被替换成lovers;</p>
<p>&amp; 保存搜索字符用来替换其他字符，如s&#x2F;love&#x2F;&amp;&#x2F;，love这成love;</p>
<p>&lt; 匹配单词的开始，如:&#x2F;\</p>
<blockquote>
<p>匹配单词的结束，如&#x2F;love&gt;&#x2F;匹配包含以love结尾的单词的行;</p>
</blockquote>
<p>x{m} 重复字符x，m次，如：&#x2F;0{5}&#x2F;匹配包含5个0的行;</p>
<p>x{m,} 重复字符x，至少m次，如：&#x2F;0{5,}&#x2F;匹配至少有5个0的行;</p>
<p>x{m,n} 重复字符x，至少m次，不多于n次，如：&#x2F;0{5,10}&#x2F;匹配5~10个0的行;</p>
<p>命令示例：</p>
<p>测试文件：#cat sed.txt<br>date schooL teaCher<br>tea Car red Hell0<br>Centos liNux</p>
<p>1）sed ‘s&#x2F;date&#x2F;Date&#x2F;’ sed.txt</p>
<p>2）sed -n ‘s&#x2F;date&#x2F;Date&#x2F;p’ sed.txt &#x2F;&#x2F;-n 选项会禁止 sed 输出，但 p 标记会输出修改过的行,-n选项和p命令一起使用表示只打印那些发生替换的行：</p>
<p>3）sed ‘s&#x2F;date&#x2F;Date&#x2F;2’ sed.txt &#x2F;&#x2F;使用数字 2 作为标记的结果就是，sed 编辑器只替换每行中第 2 次出现的匹配模式</p>
<p>sed ‘s&#x2F;date&#x2F;Date&#x2F;w test.txt’ sed.txt &#x2F;&#x2F;w 标记会将匹配后的结果保存到指定文件中</p>
<p>sed ‘3d’ sed.txt &#x2F;&#x2F;删除 sed.txt 文件内容中的第 3 行,如果不指定删除行，sed文件内容将全部删除，请慎重</p>
<p>6)sed ‘2,3d’ sed.txt &#x2F;&#x2F;删除 sed.txt 文件内容中的第 2、3行</p>
<p>7)sed ‘&#x2F;1&#x2F;,&#x2F;3&#x2F;d’ sed.txt &#x2F;&#x2F;删除第 1~3 行的文本数据，用两个文本模式来删除某个区间内的行，要小心指定的第一个模式会“打开”行删除功能，第二个模式会“关闭”行删除功能，因此，sed 会删除两个指定行之间的所有行（包括指定的行）</p>
<p>8）sed ‘3,$d’ sed.txt &#x2F;&#x2F;删除 sed.txt 文件内容中第 3 行开始的所有的内容,默认情况下 sed 并不会修改原始文件，这里被删除的行只是从 sed 的输出中消失了，原始文件没做任何改变。</p>
<p>9)sed ‘3i\This is an inserted line.’ sed.txt &#x2F;&#x2F;将一个新行插入到数据流第三行前,将i改为a，就表示将一个新行附加到数据流中第三行后</p>
<p>10)将一个多行数据添加到数据流中，只需对要插入或附加的文本中的每一行末尾（除最后一行）添加反斜线即可：<br>sed ‘1i\</p>
<p>This is one line of new text.<br>This is another line of new text.’ sed.txt ##&#x2F;&#x2F;第1行前插入2行</p>
<p>11）sed ‘3c\This is a changed line of text.’ sed.txt &#x2F;&#x2F;sed 编辑器会修改第三行中的文本,将第2行修改&#x2F;替换为新内容</p>
<p>12）echo “This 1 is a test of 1 try.” | sed ‘y&#x2F;123&#x2F;456&#x2F;’ &#x2F;&#x2F;输出如下，因y字符替换是全局命令，它会文本行中找到的所有指定字符自动进行转换，而不会考虑它们出现的位置，无法限定只转换在特定地方出现的字符<br>This 4 is a test of 4 try.</p>
<p>13） sed -n ‘&#x2F;number 3&#x2F;p’ sed.txt &#x2F;&#x2F;用 -n 选项和 p 命令配合使用，我们可以禁止输出其他行，只打印包含匹配文本模式的行,用于只查看特定行的内容</p>
<p>14）如需要在修改之前查确认该行，可以使用打印命令，与替换或修改命令一起使用，sed 命令会查找包含数字 3 的行，然后执行两条命令。首先，脚本用 p 命令来打印出原始行；然后它用 s 命令替换文本，并用 p 标记打印出替换结果。输出同时显示了原来的行文本和新的行文本。</p>
<p>sed -n ‘&#x2F;3&#x2F;{</p>
<blockquote>
<p>p<br>s&#x2F;line&#x2F;test&#x2F;p<br>}’ data6.txt<br>This is line number 3.<br>This is test number 3.<br>1<br>2<br>3<br>4<br>5<br>6<br>15）r 命令用于将一个独立文件的数据插入到当前数据流的指定位置</p>
</blockquote>
<p>[root@localhost ~]# cat data12.txt<br>This is an added line.<br>This is the second added line.<br>[root@localhost ~]# sed ‘3r data12.txt’ data6.txt<br>This is line number 1.<br>This is line number 2.<br>This is line number 3.<br>This is an added line.<br>This is the second added line.<br>This is line number 4.<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>将指定文件中的数据插入到数据流的末尾，可以使用 $ 地址符：</p>
<p> sed ‘$r data12.txt’ data6.txt<br>This is line number 1.<br>This is line number 2.<br>This is line number 3.<br>This is line number 4.<br>This is an added line.<br>This is the second added line.<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>16）sed ‘&#x2F;number 1&#x2F;{ s&#x2F;number 1&#x2F;number 0&#x2F;;q; }’ test.txt &#x2F;&#x2F;sed 命令会在匹配到 number 1 时，将其替换成 number 0，然后直接退出</p>
<p>17)默认情况下，sed 命令会作用于文本数据的所有行。如果只想将命令作用于特定行或某些行，则必须写明 address 部分，表示的方法有以下 2 种：<br>a、以数字形式指定行区间；</p>
<p>eg1:sed ‘2s&#x2F;dog&#x2F;cat&#x2F;’ data1.txt &#x2F;&#x2F;sed 只修改地址指定的第二行的文本<br>eg2:sed ‘2,3s&#x2F;dog&#x2F;cat&#x2F;’ data1.txt &#x2F;&#x2F;修改指定的第二行到第三行包括2者的文本<br>eg3：sed ‘2,$s&#x2F;dog&#x2F;cat&#x2F;’ data1.txt &#x2F;&#x2F;修改文本中从某行开始的所有行</p>
<p>b、用文本模式指定具体行区间。</p>
<p>[address]脚本命令</p>
<p>或者</p>
<p>address {<br>    多个脚本命令<br>}			&#x2F;&#x2F;上例中的&#x2F;number 1&#x2F;就是指定了匹配的address<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>18）用文本模式指定行区间：&#x2F;pattern&#x2F;command；必须用正斜线将要指定的 pattern 封起来，sed 会将该命令作用到包含指定文本模式的行上</p>
<p>eg1：sed ‘&#x2F;demo&#x2F;s&#x2F;bash&#x2F;csh&#x2F;’ &#x2F;etc&#x2F;passwd &#x2F;&#x2F;只修改用户 demo 的默认 shell</p>
<p>在文本模式使用正则表达式指明作用的具体行。正则表达式允许创建高级文本模式匹配表达式来匹配各种数据。这些表达式结合了一系列通配符、特殊字符以及固定文本字符来生成能够匹配几乎任何形式文本的简练模式。</p>
<p>19）其他用法：<br>sed ‘&#x2F;^KaTeX parse error: Expected ‘EOF’, got ‘#’ at position 48: …除所有空白行 sed ‘&#x2F; *#̲&#x2F;d; &#x2F;^&#x2F;d’ example.txt 从example.txt文件中删除所有注释和空白行<br>echo ‘esempio’ | tr ‘[:lower:]’ ‘[:upper:]’ 合并上下单元格内容<br>sed -e ‘1d’ result.txt 从文件example.txt 中排除第一行<br>sed -n ‘&#x2F;stringa1&#x2F;p’ 查看只包含词汇 “string1”的行<br>sed -e ‘s&#x2F; $&#x2F;&#x2F;’ example.txt 删除每一行最后的空白字符<br>sed -e ‘s&#x2F;stringa1&#x2F;&#x2F;g’ example.txt 从文档中只删除词汇 “string1” 并保留剩余全部<br>sed -n ‘1,5p;5q’ example.txt 查看从第一行到第5行内容<br>sed -n ‘5p;5q’ example.txt 查看第5行<br>sed -e ‘s&#x2F;00&#x2F;0&#x2F;g’ example.txt 用单个零替换多个零<br>cat -n file1 标示文件的行数<br>cat example.txt | awk ‘NR%2&#x3D;&#x3D;1’ 删除example.txt文件中的所有偶数行<br>echo a b c | awk ‘{print $1}’ 查看一行第一栏<br>echo a b c | awk ‘{print $1,$3}’ 查看一行的第一和第三栏<br>paste file1 file2 合并两个文件或两栏的内容<br>paste -d ‘+’ file1 file2 合并两个文件或两栏的内容，中间用”+”区分<br>sort file1 file2 排序两个文件的内容<br>sort file1 file2 | uniq 取出两个文件的并集(重复的行只保留一份)<br>sort file1 file2 | uniq -u 删除交集，留下其他的行<br>sort file1 file2 | uniq -d 取出两个文件的交集(只留下同时存在于两个文件中的文件)<br>comm -1 file1 file2 比较两个文件的内容只删除 ‘file1’ 所包含的内容<br>comm -2 file1 file2 比较两个文件的内容只删除 ‘file2’ 所包含的内容<br>comm -3 file1 file2 比较两个文件的内容只删除两个文件共有的部分</p>
<p>20）特殊用法：</p>
<p>10.5 、tr（Translate替换&#x2F;转译）命令<br>用于替换&#x2F;转化（大小写转化）、压缩重复和&#x2F;或删除标准输入中的字符，写入标准输出。在没有任何参数选项时，默认是替换，与加上-s参数选项结果是一致的。</p>
<p>语法：tr [OPTION]…SET1[SET2]<br>参数:</p>
<p>-c, –complement：反选设定字符。也就是符合 SET1 的部份不做处理，不符合的剩余部份才进行转换<br>-d, –delete：删除指令字符<br>-s, –squeeze-repeats：缩减连续重复的字符成指定的单个字符<br>-t, –truncate-set1：削减 SET1 指定范围，使之与 SET2 设定长度相等<br>–help：显示程序用法信息<br>–version：显示程序本身的版本信息</p>
<p>11、正则表达式(regular expression):<br>正则表达式(regular expression)是一种文本模式，描述了一种字符串匹配的模式（pattern)，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为“元字符”）。使用该模式，可以用来检查一个串是否含有某种子串、将匹配的子串替换或者从某个串中取出符合某个条件的子串等。或这种模式，描述了在搜索文本时要匹配的一个或多个字符串。正则表达式作为一个模板，将某个字符模式与所搜索的字符串进行匹配。模式中由5类字符组成：</p>
<p>1）普通字符<br>[A-Za-z0-9_] &#x2F;&#x2F;所有大写和小写字母、所有数字、所有标点符号和一些其他符号</p>
<p>2）非打印字符<br>\cx 匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 ‘c’ 字符。<br>\f 匹配一个换页符。等价于 \x0c 和 \cL。<br>\n 匹配一个换行符。等价于 \x0a 和 \cJ。<br>\r 匹配一个回车符。等价于 \x0d 和 \cM。<br>\s 匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。注意 Unicode 正则表达式会匹配全角空格符。<br>\S 匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。<br>\t 匹配一个制表符。等价于 \x09 和 \cI。<br>\v 匹配一个垂直制表符。等价于 \x0b 和 \cK。<br>\w 匹配字母、数字、下划线。等价于 [A-Za-z0-9_]</p>
<p>3)特殊字符<br>所谓特殊字符，就是一些有特殊含义的字符。‘*’，’+‘和’?’这三个符号，表示一个或一序列字符重复出现的次数。它们分别表示“没有或更多”，“一次或更多”还有“没有或一次”。若要匹配这些特殊字符，必须首先使字符”转义”，即，将反斜杠字符\ 放在它们前面；</p>
<p>4）限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有 * 或 + 或 ? 或 {n} 或 {n,} 或 {n,m} 共6种。</p>
<p>示例：</p>
<p>[0-9]* 表示任意多个数字;<br>在方括号里用 ‘^’表示不希望出现的字符，’^’应在方括号里的第一位;<br>“(b¦cd)ef”：表示”bef”或”cdef”；<br>1<br>2<br>3<br>请注意表示范围:必须指定范围的下限;如：”{0,2}”而不是”{,2}”。<br>2）’<em>‘，’+’和’?’相当于”{0,}”，”{1,}”和”{0,1}”。<br>3)’¦’，表示“或”操作。在方括号里用’^’表示不希望出现的字符，’^’应在方括号里的第一位，在方括号中，不需要转义字符。<br>4)</em> 和 + 限定符都是贪婪的，因为它们会尽可能多的匹配文字，只有在它们的后面加上一个? 就可以实现非贪婪或最小匹配。通过在 *、+ 或 ? 限定符之后放置 ?，该表达式从”贪婪”表达式转换为”非贪婪”表达式或者最小匹配。<br>5）其他字符匹配(Java正则表达式)：<br>\d ：匹配一个数字字符。[0-9]<br>\D ：匹配一个非数字字符。[^0-9]<br>\w ：匹配包括下划线的任何单词字符。[0-9a-zA-Z_]<br>\W ：匹配任何非单词字符。[^\w]<br>\s ：匹配任何空白字符 空格、制表符、换行符<br>\S ：匹配任何非空白字符。<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>5)定位符</p>
<p>定位符使您能够将正则表达式固定到行首或行尾。定位符用来描述字符串或单词的边界，^ 和 $ 分别指字符串的开始与结束，\b 描述单词的前或后边界，\B 表示非单词边界。</p>
<p>注意：不能将限定符与定位符一起使用。由于在紧靠换行或者单词边界的前面或后面不能有一个以上位置，因此不允许诸如 ^* 之类的表达式。</p>
<p>若要匹配一行文本开始处的文本，请在正则表达式的开始使用 ^ 字符。不要将 ^ 的这种用法与中括号表达式内的用法混淆。若要匹配一行文本的结束处的文本，请在正则表达式的结束处使用 $ 字符。 \B 非单词边界运算符，位置并不重要，因为匹配不关心究竟是单词的开头还是结尾。</p>
<p>匹配中文字符的正则表达式： [\u4e00-\u9fa5]<br>评注：匹配中文还真是个头疼的事，有了这个表达式就好办了<br>匹配双字节字符(包括汉字在内)：[^\x00-\xff]<br>评注：可以用来计算字符串的长度（一个双字节字符长度计2，ASCII字符计1）<br>匹配空白行的正则表达式：\n\s<em>\r<br>评注：可以用来删除空白行<br>匹配HTML标记的正则表达式：&lt;(\S*?)[^&gt;]</em>&gt;.<em>?&lt;&#x2F;\1&gt;|&lt;.*? &#x2F;&gt;<br>评注：网上流传的版本太糟糕，上面这个也仅仅能匹配部分，对于复杂的嵌套标记依旧无能为力<br>匹配首尾空白字符的正则表达式：^\s</em>|\s*$<br>评注：可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式<br>匹配Email地址的正则表达式：\w+([-+.]\w+)<em>@\w+([-.]\w+)<em>.\w+([-.]\w+)</em><br>评注：表单验证时很实用<br>匹配网址URL的正则表达式：[a-zA-z]+:&#x2F;&#x2F;[^\s]</em><br>评注：网上流传的版本功能很有限，上面这个基本可以满足需求<br>匹配帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]{4,15}$<br>评注：表单验证时很实用<br>匹配国内电话号码：\d{3}-\d{8}|\d{4}-\d{7}<br>评注：匹配形式如 0511-4405222 或 021-87888822<br>匹配腾讯QQ号：[1-9][0-9]{4,}<br>评注：腾讯QQ号从10000开始<br>匹配中国邮政编码：[1-9]\d{5}(?!\d)<br>评注：中国邮政编码为6位数字<br>匹配身份证：\d{15}|\d{18}<br>评注：中国的身份证为15位或18位<br>匹配ip地址：\d+.\d+.\d+.\d+<br>评注：提取ip地址时有用<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>匹配特定数字：</p>
<p>^[1-9]\d*$　 　 &#x2F;&#x2F;匹配正整数<br>^-[1-9]\d*$ 　 &#x2F;&#x2F;匹配负整数<br>^-?[1-9]\d*$　　 &#x2F;&#x2F;匹配整数<br>^[1-9]\d*|0$　 &#x2F;&#x2F;匹配非负整数（正整数 + 0）<br>^-[1-9]\d*|0$　　 &#x2F;&#x2F;匹配非正整数（负整数 + 0）<br>^[1-9]\d<em>.\d</em>|0.\d*[1-9]\d*$　　 &#x2F;&#x2F;匹配正浮点数<br>^-([1-9]\d<em>.\d</em>|0.\d*[1-9]\d*)$　 &#x2F;&#x2F;匹配负浮点数<br>^-?([1-9]\d<em>.\d</em>|0.\d*[1-9]\d*|0?.0+|0)$　 &#x2F;&#x2F;匹配浮点数<br>^[1-9]\d<em>.\d</em>|0.\d*[1-9]\d*|0?.0+|0$　　 &#x2F;&#x2F;匹配非负浮点数（正浮点数 + 0）<br>^(-([1-9]\d<em>.\d</em>|0.\d*[1-9]\d*))|0?.0+|0$　　&#x2F;&#x2F;匹配非正浮点数（负浮点数 + 0）<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>匹配特定字符串：</p>
<p>^[A-Za-z]+$　　&#x2F;&#x2F;匹配由26个英文字母组成的字符串<br>^[A-Z]+$　　&#x2F;&#x2F;匹配由26个英文字母的大写组成的字符串<br>^[a-z]+$　　&#x2F;&#x2F;匹配由26个英文字母的小写组成的字符串<br>^[A-Za-z0-9]+$　　&#x2F;&#x2F;匹配由数字和26个英文字母组成的字符串<br>^\w+$　　&#x2F;&#x2F;匹配由数字、26个英文字母或者下划线组成的字符串<br>1<br>2<br>3<br>4<br>5<br>12、高级命令组合<br>SHELL显示多个信息，用EOF<br>cat &lt;&lt; EOF<br>+————————————————————–+<br>| &#x3D;&#x3D;&#x3D; Welcome to Nginx Home &#x3D;&#x3D;&#x3D; |<br>+————————————————————–+<br>EOF<br>1<br>2<br>3<br>4<br>5<br>获取IP地址<br>ifconfig eth0 |grep “inet addr:” |awk ‘{print $2}’|cut -c 6- &#x2F;&#x2F;6-表从左第6个字符开始获取<br>ifconfig eth0 |grep “inet “ |awk ‘{print $2}’|cut -c 6-<br>或者<br>ifconfig | grep ‘inet addr:’| grep -v ‘127.0.0.1’ | cut -d: -f2 | awk ‘{ print $1}’<br>ifconfig | grep ‘inet ‘| grep -v ‘127.0.0.1’ | cut -d: -f2 | awk ‘{ print $2}’</p>
<p>获取内存<br>free -m |grep “Mem” | awk ‘{print $2}’</p>
<p>查看连接某服务端口最多的的IP地址<br>netstat -an -t | grep “:80” | grep ESTABLISHED | awk ‘{printf “%s %s\n”,$5,$6}’ | sort</p>
<p>查看Apache的并发请求数及其TCP连接状态：<br>netstat -n | awk ‘&#x2F;^tcp&#x2F; {++S[$NF]} END {for(a in S) print a, S[a]}’</p>
<p>统计某一类文件大小<br>eg1：find &#x2F; -name *.jpg -exec wc -c {} ;|awk ‘{print $1}’|awk ‘{a+&#x3D;$1}END{print a}’</p>
<p>清除僵死进程<br>ps -eal | awk ‘{ if ($2 &#x3D;&#x3D; “Z”) {print $4}}’ | kill -9</p>
<p>13、30个常用快捷键</p>
<p>14、运维实战<br>a、系统负载查询确认<br>1&gt;CPU负载情况<br>1）查看逻辑CPU个数：cat &#x2F;proc&#x2F;cpuinfo |grep “processor”|sort -u|wc -l<br>2）查看物理CPU个数：grep “physical id” &#x2F;proc&#x2F;cpuinfo|sort -u|wc -l<br>3）查看每颗物理CPU核数：cat &#x2F;proc&#x2F;cpuinfo |grep “cores”|uniq<br>每个物理CPU上逻辑CPU个数：grep “siblings” &#x2F;proc&#x2F;cpuinfo|uniq<br>查看是否开启了抄超线程：如多个逻辑CPU的”physical id”和”core id”均相同，说明开启了超线程；<br>逻辑如下：<br>a.逻辑CPU个数 &gt; 物理CPU个数 * CPU内核数 开启了超线程<br>b.逻辑CPU个数 &#x3D; 物理CPU个数 * CPU内核数 没有开启超线程<br>4）查看CPU的主频：cat &#x2F;proc&#x2F;cpuinfo |grep MHz|uniq</p>
<p>#!&#x2F;bin&#x2F;bash</p>
<h2 id="定义初始变量"><a href="#定义初始变量" class="headerlink" title="定义初始变量"></a>定义初始变量</h2><p>physicalNumber&#x3D;0</p>
<p>coreNumber&#x3D;0</p>
<p>logicalNumber&#x3D;0</p>
<p>HTNumber&#x3D;0<br>##获取系统参数值<br>logicalNumber&#x3D;$(grep “processor” &#x2F;proc&#x2F;cpuinfo|sort -u|wc -l)</p>
<p>physicalNumber&#x3D;$(grep “physical id” &#x2F;proc&#x2F;cpuinfo|sort -u|wc -l)</p>
<p>coreNumber&#x3D;$(grep “cpu cores” &#x2F;proc&#x2F;cpuinfo|uniq|awk -F’:’ ‘{print $2}’|xargs)</p>
<p>HTNumber&#x3D;$((logicalNumber &#x2F; (physicalNumber * coreNumber)))</p>
<p>cpuHZ&#x3D;$(cat &#x2F;proc&#x2F;cpuinfo |grep MHz|uniq)</p>
<p>echo “****** CPU Information ******”</p>
<p>echo “Logical CPU Number  : ${logicalNumber}”</p>
<p>echo “Physical CPU Number : ${physicalNumber}”</p>
<p>echo “CPU Core Number     : ${coreNumber}”</p>
<p>echo “HT Number           : ${HTNumber}”</p>
<p>echo “Systen cpu MHZ           : ${cpuHZ}”</p>
<p>echo “*****************************”<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33</p>
<p>5）top命令：</p>
<p>其中：load average这三个值，隔5秒钟检查一次活跃的进程数，然后按特定算法计算出的数值;默认不超过cpu合数的2倍为好，超过2倍说明负载偏高；如果这个数除以逻辑CPU的数量，结果高于5的时候就表明系统在超负荷运转了；经验表明：每单核负载在3-5之间尚可，超过6甚至8，就要立刻排查cpu负载高的问题，否则极易宕机。检查%idle是否过低(比如小于5%)； us 用户空间占用CPU百分比； sy 内核空间占用CPU百分比；ni 用户进程空间内改变过优先级的进程占用CPU百分比；id 空闲CPU百分比；wa 等待输入输出的CPU时间百分比；hi 硬中断（Hardware IRQ）占用CPU的百分比；si 软中断（Software Interrupts）占用CPU的百分比；st 用于有虚拟cpu的情况，用来指示被虚拟机偷掉的cpu时间。</p>
<p>输出结果说明：<br>PID：进程编号<br>USER：进程所属用户<br>PR&#x2F;NI：Priority&#x2F;Nice value进程执行的优先顺序<br>VIRT：Virtual Image (kb) 虚拟内存使用总额；进程“需要的”虚拟内存大小，包括进程使用的库、代码、数据等，即使进程实际使用的远少于改值，但进程运行满载时会达到改值;VIRT&#x3D;SWAP+RES<br>RES：Resident size (kb) 常驻内存，表进程当前使用的内存大小，包含其他进程的共享但不包括swap out；RES&#x3D;CODE+DATA<br>SHR：Shared Mem size (kb) 共享内存；除了自身进程的共享内存，也包括其他进程的共享内存，即使进程只使用了几个共享库的函数，但它用了整个共享库的大小来占用<strong>；因此,</strong> 某个进程所占的物理内存大小公式：RES – SHR<br>S：Process Status 进程状态：D不可中断的睡眠状态 R运行态 S睡眠态 T跟踪&#x2F;停止态 Z僵尸态<br>%CPU：cpu使用率<br>%MEM：内存使用率<br>TIME+：进程开始运行时使用cpu的总时间<br>COMMAND：进程运行的命令<br>第三行表示cpu的运行情况，按下1可以显示每个核的运行情况。 top默认排序是%CPU；shift+&gt; 或者shift+&lt; 向右或者向左切换排序基准，共12列，cpu为9列，mem为10列。按x高亮显示，可知道当前是哪一行为排序行。</p>
<p>默认进入top时，各进程是按照CPU的占用量来排序的。在top基本视图中，按键数字“1”可以监控每个逻辑CPU的状况；按键‘b’（打开关闭加亮效果）；‘y’来打开或者关闭运行态进程的加亮效果；‘x’（打开&#x2F;关闭排序列的加亮效果）；按”shift+&gt;”或者”shift+&lt;”左右改变排序序列；”f”可进入编辑基本视图中的显示字段；</p>
<p>top -u root &#x2F;&#x2F;-u：user显示指定用户的进程</p>
<p>top -p 1 &#x2F;&#x2F;-p：pid显示指定进程</p>
<p>进入top后，按n：设置top屏幕显示的任务数</p>
<p>top -n 5 &#x2F;&#x2F;top -n num：设置top刷新的次数，指定刷新次数后将退出top，默认一直刷<br>top -d 5 &#x2F;&#x2F;delay进入top后，top会定时刷新状态，默认值是5 s,-d参数指定top几秒刷新一次，即刷新频率<br>top -b -n 60 -d 60 &gt; &#x2F;tmp&#x2F;cpu.txt &#x2F;&#x2F;-b：Batch mode批处理模式，top刷新状态默认是在原数据上刷新，使用-b参数后，会一屏一屏的显示数据。结合重定向功能和计划任务，-b参数在记录服务器运行状态时非常有用。</p>
<p>-M：Memory按照内存使用量排序<br>-P：CPU按照cpu使用量排序<br>进入top后按k键：（kill杀死PID的进程）<br>top -H &#x2F;&#x2F;以线程方式查看top视图,等同于top内的H键</p>
<p>大写的 R 键可以将当前的排序倒转;<br>6）自动记录cpu一段时间状态：<br>top -b -n 60 -d 60 &gt; &#x2F;tmp&#x2F;cpu.txt</p>
<p>7）top -H -p 进程号 &#x2F;&#x2F;查看异常线程</p>
<p>8）查看占用cpu高的线程<br>ps -H -eo user,pid,ppid,tid,time,%cpu,cmd –sort&#x3D;%cpu<br>说明:‘H’，显示线程相关;-o指定显示的列； -T 显示线程数</p>
<p>linux下获取占用CPU资源最多的10个进程<br>ps aux|head -1;ps aux|grep -v PID|sort -rn -k +3|head</p>
<p>9）查看占用内存高的线程：<br>ps aux | head -1;ps aux|sort -k4nr|head -5<br>linux下获取占用内存资源最多的10个进程:<br>ps aux|head -1;ps aux|grep -v PID|sort -rn -k +4|head<br>cat &#x2F;proc&#x2F;pid&#x2F;status &#x2F;&#x2F;查看该进程的内存占用情况<br>10）查看进程按内存、cpu从大到小排序：<br>ps -e -o “%C : %p : %z : %a”|sort -k5 -nr<br>ps -e -o “%C : %p : %z : %a”|sort -nr<br>11）cat &#x2F;proc&#x2F;loadavg # 查看系统负载</p>
<p>2&gt;内存负载情况<br>1）查看进程内存的状况：pmap PID; &#x2F;&#x2F;查看进程的内存映像信息</p>
<p>说明：<br>-d：how the deviceformat. 显示设备格式<br>-q quiet 不显示头尾行<br>-x extended 显示扩展格式<br>2）循环显示上述进程的输出的最后1行，间隔2秒:<br>while true; do pmap -d 11957 | tail -1; sleep 2; done;</p>
<p>最后一行的值说明：</p>
<p>mapped 表示该进程映射的虚拟地址空间大小，也就是该进程预先分配的虚拟内存大小，即ps出的vsz</p>
<p>writeable&#x2F;private 表示进程所占用的私有地址空间大小，也就是该进程实际使用的内存大小</p>
<p>shared 表示进程和其他进程共享的内存大小</p>
<p>3）查看某进程的设备状态下的内存使用<br>Address: 内存开始地址、Kbytes: 占用内存的字节数（KB）<br>Mode: 内存的权限：read、write、execute、shared、private (写时复制)<br>Offset: 文件偏移<br>Mapping: 占用内存的文件、或[anon]（分配的内存）、或[stack]（堆栈）<br>Device: 设备名 (major:minor)</p>
<p>3&gt;进程和线程异常情况<br>1）查看当前站cpu最高的进程的线程使用情况：<br>top -H -p ps aux|sort -k4nr|head -1|awk ‘{print $2}’</p>
<p>lsof -p pid（察看该进程所打开端口和文件）<br>2）如上述输出有异常线程，可利用printf “%x\n” 线程号，将异常线程号转化为16进制，用于后续的java线程跟踪用。<br>printf “%x\n” 12791 &#x2F;&#x2F;tid需要使用16进制值</p>
<p>3）查看java进程堆栈信息<br>jstack 进程号|grep 16进制异常线程号 -A90 &#x2F;&#x2F;-A90是日志行数;查看运行的 Java 进程下，多线程的运行情况<br>注意：jstack命令在jdk的bin目录下<br>jstack -F 12791|grep 31f7 -A90 &#x2F;&#x2F;-F option can be used when the target process is not responding</p>
<p>线程状态有以下几种：<br>RUNNABLE 线程运行中或 I&#x2F;O 等待<br>BLOCKED 线程在等待 monitor 锁( synchronized 关键字)<br>TIMED_WAITING 线程在等待唤醒，但设置了时限<br>WAITING 线程在无限等待唤醒</p>
<p>如输出结果有GC，说明内存已经用尽；</p>
<p>jstat -gcmetacapacity pid &#x2F;&#x2F;命令查看内存分布情况及GC情况</p>
<p>jstat -gcutil pid &#x2F;&#x2F;查看GC情况<br>jstat -gccapacity pid</p>
<p>4)查看某进程的线程信息：<br>ps -mp pid -o THREAD,tid,time|sort -rn &#x2F;&#x2F;tid为代码线程ID，time代表这个线程的已运行时间；<br>jstack工具可以用来获得core文件的java stack和native stack的信息，从而可以轻松地知道java程序是如何崩溃和在程序何处发生问题，<br>注：其中，LWP为轻量级进程，即线程PID；NLWP为线程数量；WCHAN表当前进程是否正在运行，若为-表示正在运行，若该进程在睡眠，则显示睡眠中的系统函数名；</p>
<p>jps -v &#x2F;&#x2F;找到java进程相关的pid</p>
<p>jstack -l 12791 &gt;&gt; 123.txt &#x2F;&#x2F;导出堆栈信息；</p>
<p>5)其他进程管理命令：htop、vmstat、dstat、iostat、glances，pstree、ps、pidof、pgrep、pkill、pmap、kill、killall、job、bg、fg等；</p>
<p>6）当进程打开了某个文件时，只要该进程保持打开该文件，即使将其删除，它依然存在于磁盘中。这意味着，进程并不知道文件已经被删除，它仍然可以向打开该文件时提供给它的文件描述符进行读取和写入。除了该进程之外，这个文件是不可见的，因为已经删除了其相应的目录索引节点。只要这个时候系统中还有进程正在访问该文件，那么我们就可以通过lsof从&#x2F;proc目录下恢复该文件的内容。</p>
<p>7)可运行进程数目 # vmwtat 1 5<br>列给出的是可运行进程的数目，检查其是否超过系统逻辑CPU的4倍</p>
<p>top -id 1 &#x2F;&#x2F;观察是否有异常进程出现<br>9)vmstat命令：<br>vmstat是Virtual Meomory Statistics（虚拟内存统计）的缩写，可对操作系统的虚拟内存、进程、CPU活动进行监控。是对系统的整体情况进行统计，但不适于对某个具体进程进行深入分析。<br>#vmstat 5 5 &#x2F;&#x2F;5秒时间内进行5次采样</p>
<p>输出结果字段说明：</p>
<p>Procs（进程）：</p>
<p>r: 运行队列中进程数量</p>
<p>b： 等待IO的进程数量</p>
<p>Memory（内存）：</p>
<p>swpd: 使用虚拟内存大小</p>
<p>free: 可用内存大小</p>
<p>buff: 用作缓冲的内存大小</p>
<p>cache: 用作缓存的内存大小</p>
<p>Swap：</p>
<p>si: 每秒从交换区写到内存的大小</p>
<p>so: 每秒写入交换区的内存大小</p>
<p>IO：（Linux默认块的大小为1024bytes）</p>
<p>bi: 每秒读取的块数</p>
<p>bo: 每秒写入的块数</p>
<p>系统：</p>
<p>in: 每秒中断数，包括时钟中断。【interrupt】</p>
<p>cs: 每秒上下文切换数。 【count&#x2F;second】</p>
<p>CPU（以百分比表示）：</p>
<p>us: 用户进程执行时间(user time)</p>
<p>sy: 系统进程执行时间(system time)</p>
<p>id: 空闲时间(包括IO等待时间),中央处理器的空闲时间 。以百分比表示。</p>
<p>wa: 等待IO时间</p>
<p>指标参考：</p>
<p>如果r经常大于4，id经常少于40，表示cpu的负荷很重。</p>
<p>如果bi，bo长期不等于0，表示内存不足。</p>
<p>如果disk经常不等于0，且在b中的队列大于3，表示io性能不好。</p>
<p>示例：<br>eg1：vmstat -a 2 5 &#x2F;&#x2F;-a 显示活跃和非活跃内存,所显示的内容将增加inact和active列，对应非活跃和活跃；</p>
<p>eg2：vmstat -f &#x2F;&#x2F;查看linux下创建进程的系统调用。即fork次数，实际是从&#x2F;proc&#x2F;stat中的processes字段里取得的值</p>
<p>eg3：vmstat -s &#x2F;&#x2F;显示内存相关统计信息,包括已使用内存，活跃内存，实际取值于&#x2F;proc&#x2F;meminfo,&#x2F;proc&#x2F;stat和&#x2F;proc&#x2F;vmstat</p>
<p>eg4：vmstat -d &#x2F;&#x2F;查看磁盘的读写,实际取之于&#x2F;proc&#x2F;diskstats<br>vmstat -p &#x2F;dev&#x2F;sda1 &#x2F;&#x2F;显示指定磁盘分区统计信息<br>其中，输出结果：<br>reads:来自于这个分区的读的次数。<br>read sectors:来自于这个分区的读扇区的次数。<br>writes:来自于这个分区的写的次数。<br>requested writes:来自于这个分区的写请求次数。</p>
<p>eg5：vmstat -m &#x2F;&#x2F;查看系统的slab信息,用于存储i节点，目录项等小对象，避免为他们消耗一个内存页（4kb），减少内存分配次数。际取值于&#x2F;proc&#x2F;slabinfo</p>
<p>eg6：</p>
<p>10）ps命令：</p>
<p>常用参数：</p>
<p>-A 显示所有进程（等价于-e）(utility)<br>-a 显示一个终端的所有进程，除了会话引线<br>-N 忽略选择。<br>-C 通过命令名称搜索进程，后面跟你要找的进程的名字即可<br>-d 显示所有进程，但省略所有的会话引线(utility)<br>-x 显示没有控制终端的进程，同时显示各个命令的具体路径。dx不可合用。（utility）<br>-p pid 进程使用cpu的时间<br>-u uid or username 选择有效的用户id或者是用户名， 如果长度大于8个字符，然后ps将只显示UID，而不是用户名；多个用户名可以提供以逗号分隔。<br>-g gid or groupname 显示组的所有进程。<br>U username 显示该用户下的所有进程，且显示各个命令的详细路径。如:ps U zhang;(utility)<br>-f -forest全部列出，通常和其他选项联用。如：ps -fa or ps -fx and so on.<br>-l 长格式（有F,wchan,C 等字段）<br>-L 查看特定进程的线程<br>-j 作业格式<br>-o 用户自定义格式。<br>v 以虚拟存储器格式显示<br>s 以信号格式显示<br>-m 显示所有的线程<br>-H 显示进程的层次(和其它的命令合用，如：ps -Ha)（utility）<br>e 命令之后显示环境（如：ps -d e; ps -a e）(utility)<br>h 不显示第一行<br>–sort 选项由逗号分隔的多个字段可以用指定，–sort&#x3D;-pcpu,+pmem（或–sort +pmem,-pcpu），cpu降序排列，内存升序排列。</p>
<p>ps命令参数使用支持以下3种风格：</p>
<p>1）BSD风格: 在 BSD 风格的语法选项前不带连字符。例如: ps aux<br>2）UNIX&#x2F;LINUX的风格：在 linux 风格的语法选项前面有一个 “-”。例如: ps -ef<br>3）混合使用两种 Linux 系统上的语法风格是好事儿。例如：ps ax -f</p>
<p>eg1：# ps aux</p>
<p>USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND</p>
<p>其中：VSZ 进程所使用的虚存的大小（Virtual Size）；RSS表进程使用的驻留集大小或者是实际内存的大小，Kbytes字节。STAT即进程的状态：使用不通字符表示（STAT的状态码），主要15种状态码如下：</p>
<p>R 运行 Runnable (on run queue) &#x2F;&#x2F;正在运行或在运行队列中等待。<br>S 睡眠 Sleeping &#x2F;&#x2F;休眠中, 受阻, 在等待某个条件的形成或接受到信号。<br>I 空闲 Idle<br>Z 僵死 Zombie（a defunct process) &#x2F;&#x2F;进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放。<br>D 不可中断 Uninterruptible sleep (ususally IO) &#x2F;&#x2F;收到信号不唤醒和不可运行, 进程必须等待直到有中断发生。<br>T 终止 Terminate &#x2F;&#x2F;进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行运行。<br>P &#x2F;&#x2F;等待交换页<br>W 无驻留页 has no resident pages &#x2F;&#x2F; 没有足够的记忆体分页可分配。<br>X &#x2F;&#x2F;死掉的进程<br>&lt; 高优先级进程 &#x2F;&#x2F;高优先序的进程<br>N 低优先级进程 &#x2F;&#x2F;低优先序的进程<br>L 内存锁页 Lock &#x2F;&#x2F; 有记忆体分页分配并缩在记忆体内<br>s &#x2F;&#x2F;进程的领导者（在它之下有子进程）<br>l &#x2F;&#x2F;多进程的（使用 CLONE_THREAD, 类似 NPTL pthreads）</p>
<ul>
<li>&#x2F;&#x2F;位于后台的进程组</li>
</ul>
<p>WCHAN 表进程正在睡眠的内核函数名称；该函数的名称是从&#x2F;root&#x2F;system.map文件中获得的。</p>
<p>eg2：自定义输出结果并按需排序</p>
<p>ps -eo pid,stat,pri,uid –sort uid &#x2F;&#x2F;查看当前系统进程的uid,pid,stat,pri, 以uid号排序.</p>
<p>ps -eo user,pid,stat,rss,args –sort rss &#x2F;&#x2F;查看当前系统进程的user,pid,stat,rss,args, 以rss排序.</p>
<p>eg3：结合 watch命令实时显示进程运行情况</p>
<p>#watch -n 1 ‘ps -aux –sort -pmem,-pcpu’ &#x2F;&#x2F;1s刷新一次，按cpu和内存排序</p>
<p>watch -n 1 ‘ps -aux –sort -pmem,-pcpu|head -10’ &#x2F;&#x2F;动态显示前10行</p>
<p>11）优先级命令nice：</p>
<p>用法： nice &lt;优先值&gt; &lt;进程名&gt; &#x2F;&#x2F;通过给定的优先值启动一个程序</p>
<p>通过以上命令用户就可以设置和改变进程的优先级。提高一个进程的优先级，内核会分配更多CPU时间片给这个进程。默认情况下，进程以 0 的优先级启动。进程优先级可以通过 top 命令显示的 NI（nice value）列查看。进程优先级值的范围从-20到19。值越低，优先级越高。</p>
<p>类似命令renice：<br>renice 命令类似 nice 命令，但它可以改变正在运行的进程优先值且用户只能改变属于他们自己的进程的优先值。</p>
<p>renice -n -p &#x2F;&#x2F;改变指定进程的优先值</p>
<p>renice -u -g &#x2F;&#x2F;通过指定用户和组来改变进程优先值</p>
<p>12）ipcs命令 ：</p>
<p>ipcs 命令报告进程间通信设施状态。（包括共享内存，信号量和消息队列）</p>
<p>eg1：# ipcs -p -m &#x2F;&#x2F;查看当前共享内存情况，-s查看信号量集合，-a等同于-msq</p>
<p>eg2:# ipcs -p -q &#x2F;&#x2F;查看当前活动消息队列</p>
<p>b、系统安全检查<br>1）检查系统中是否有其他特权用户：<br>awk -F: ‘$3&#x3D;&#x3D;0 {print $1}’ &#x2F;etc&#x2F;passwd &#x2F;&#x2F;检查是否存在其他特权账户，默认只有root<br>cat &#x2F;etc&#x2F;passwd;stat &#x2F;etc&#x2F;passwd &#x2F;&#x2F;检查是否异常用户，及用户和密码文件状态及修改的日期<br>awk -F: ‘length($2)&#x3D;&#x3D;0 {print $1}’ &#x2F;etc&#x2F;shadow检查是否存在空口令账户.<br>awk -F: ‘length($2)&#x3D;&#x3D;0 {print $1}’ &#x2F;etc&#x2F;shadow检查是否存在空口令账户.<br>last|head;lastb;w<br>less &#x2F;var&#x2F;log&#x2F;secure &#x2F;&#x2F;查看ssh的登录日志<br>2）ps -p PID -o lstart 检查上一次syslog启动时间是否正常</p>
<p>3）检查是否有以rhosts或者以forward结尾的后门文件,判断是否遭到入侵<br>find &#x2F; -name “.rhosts” -print<br>find &#x2F; -name “.forward” -print<br>ls &#x2F;var&#x2F;spool&#x2F;cron&#x2F;<br>less &#x2F;etc&#x2F;rc.d&#x2F;rc.local<br>ls &#x2F;etc&#x2F;rc.d<br>ls &#x2F;etc&#x2F;rc.d<br>find &#x2F; -type f -perm 4000<br>lsmod<br>4）检查&#x2F;var&#x2F;log日志是否被清理<br>ls -al &#x2F;var&#x2F;log&#x2F;* &#x2F;&#x2F;尤其wtmp和utmp<br>检查 sshd 服务配置文件 &#x2F;etc&#x2F;ssh&#x2F;sshd_config 和系统认证日志 auth、message，判断是否为口令破解攻击。<br>&#x2F;etc&#x2F;ssh&#x2F;sshd_config 文件确认认证方式。<br>确认日志是否被删除或者清理过的可能（大小判断）。<br>5） 查看&#x2F;var&#x2F;log&#x2F;secure日志文件，查看是否有入侵者的信息<br>cat &#x2F;var&#x2F;log&#x2F;secure | grep -i “accepted password”<br>检查日志报错：grep -i error或fail &#x2F;var&#x2F;log&#x2F;messages</p>
<p>6） 检查守护进程<br>ps -ajx &#x2F;&#x2F;所有的守护进程都是以超级用户启动的(UID为0)；没有控制终端(TTY为？)；终端进程组ID为-1(TPGID表示终端进程组ID，该值表示与控制终端相关的前台进程组，如果未和任何终端相关，其值为-1；</p>
<p>参数说明：<br>-a: 显示所有<br>-x：显示没有控制终端的进程<br>-j：显示与作业有关的信息（显示的列）：会话期ID（SID），进程组ID（PGID），控制终端（TTY），终端进程组ID（TRGID）<br>7）查找隐藏进程：<br>ps -ef|awk ‘{print }’|sort -n|uniq&gt;1<br>ls &#x2F;proc&#x2F;|sort -n|uniq &gt;2<br>8）检查权限过开文件<br>find &#x2F; -uid 0 -perm -4000 -print<br>find &#x2F; -size +10000k -print &#x2F;&#x2F;注意SUID文件，可疑大于10M和空格文件<br>find &#x2F; -name “…” -print<br>find &#x2F; -name “ “ -print<br>find &#x2F; -name “.” -print<br>9)检查系统中的core文件<br>find &#x2F; -name core -exec ls -l {} ;<br>10)检查系统文件完整性<br>rpm -qf &#x2F;bin&#x2F;ls<br>rpm -qf &#x2F;bin&#x2F;login<br>md5sum -b 关键文件名<br>md5sum -t 关键文件名<br>日常运维时，可将一些重要的文件的md5值保存，作为之后变化的参照</p>
<p>#!&#x2F;bin&#x2F;bash<br>export path&#x3D;$PATH:&#x2F;root<br>md5sum &#x2F;etc&#x2F;passwd &gt;&gt;&#x2F;etc&#x2F;md5db<br>md5sum &#x2F;etc&#x2F;shadow &gt;&gt;&#x2F;etc&#x2F;md5db<br>md5sum &#x2F;etc&#x2F;group &gt;&gt;&#x2F;etc&#x2F;md5db<br>md5sum &#x2F;usr&#x2F;bin&#x2F;passwd &gt;&gt;&#x2F;etc&#x2F;md5db<br>md5sum &#x2F;sbin&#x2F;portmap&gt;&gt;&#x2F;etc&#x2F;md5db<br>md5sum &#x2F;bin&#x2F;login &gt;&gt;&#x2F;etc&#x2F;md5db<br>md5sum &#x2F;bin&#x2F;ls &gt;&gt;&#x2F;etc&#x2F;md5db<br>md5sum &#x2F;bin&#x2F;ps &gt;&gt;&#x2F;etc&#x2F;md5db<br>md5sum &#x2F;usr&#x2F;bin&#x2F;top &gt;&gt;&#x2F;etc&#x2F;md5db<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>11）检查RPM：rpm -Va &#x2F;&#x2F;列出当前系统中安装后，所有变化过的包文件，可以以此来检查文件包的完整性，安全性等<br>其中：<br>S – File size<br>M – Mode不同权限<br>5 – MD5 sum<br>D – Device number</p>
<p>c表示文件为配置文件。其他标志有： d %doc 说明文档；g %ghost 不应包含的文档，有可能有问题；l %license 授权文件；r %readme readme说明文件。</p>
<p>注意相关的 &#x2F;sbin, &#x2F;bin, &#x2F;usr&#x2F;sbin, and &#x2F;usr&#x2F;bin</p>
<p>12)检查文件的变化：</p>
<p>ls -Xal –time-style&#x3D;+%D | grep ‘date +%D’ &#x2F;&#x2F;只列出当前目录当天修改的文件，-X 标志来按字母顺序对结果排序，-S 标志来基于大小（由大到小）来排序<br>find . -maxdepth 1 -newermt “2020-09-13”<br>find . -maxdepth 1 -newermt “09&#x2F;13&#x2F;2020”<br>或者# find . -maxdepth 1 -newermt “2020&#x2F;09&#x2F;13”</p>
<p>13）查看网络连接</p>
<p>netstat -atlpv &#x2F;&#x2F;看正在网络通讯的进程和socket连接状态</p>
<p>iftop &#x2F;&#x2F;看活跃的网络通讯以及流量</p>
<p>抓包分析：tcpdump -w tcpdump.log &#x2F;&#x2F;将tcpdump.log保存成 pcap 格式导入到 wireshark<br>tcpdump -c 10000 -i eth0 -n dst port 80 &gt; &#x2F;root&#x2F;pkts</p>
<p>查看http的并发请求数及其TCP连接状态：<br>netstat -n | awk ‘&#x2F;^tcp&#x2F; {++S[$NF]} END {for(a in S) print a, S[a]}’</p>
<p>查看cache里的URL<br>grep -r -a jpg &#x2F;var&#x2F;cache&#x2F;* | strings | grep “http:” | awk -F’http:’ ‘{print “http:”$2;}’</p>
<p>查看网络负载： # sar -n DEV &#x2F;&#x2F;检查网络流量(rxbyt&#x2F;s, txbyt&#x2F;s)是否过高<br>网络错误 # netstat -i &#x2F;&#x2F;检查是否有网络错误(drop fifo colls carrier) 也可以用命令：# cat &#x2F;proc&#x2F;net&#x2F;dev</p>
<p>14）文件被黑的常见形式：<br>&#x2F;bin （替换基本工具为恶意木马等，比如netstat，ps等）<br>&#x2F;sbin （替换基本工具为恶意木马等，比如sshd，lsof，ss等）<br>&#x2F;usr&#x2F;bin（替换基本工具为恶意木马等，比如sshd，lsof，ss等）<br>&#x2F;usr&#x2F;sbin （替换基本工具为恶意木马等，比如sshd，lsof，ss等）<br>&#x2F;etc&#x2F;init.d （修改开机启动任务，添加恶意脚本开机启动）<br>&#x2F;etc&#x2F;<br>&#x2F;etc&#x2F;cront.d （修改计划任务，添加恶意脚本定时执行）<br>&#x2F;etc&#x2F;crontab （修改计划任务，添加恶意脚本定时执行）<br>~&#x2F;.ssh&#x2F;目录 (注入公钥)<br>&#x2F;etc&#x2F;sysconfig （修改iptables配置等，开放网络限制）<br>&#x2F;etc&#x2F;ssh&#x2F; （修改ssh配置）<br>web目录 （修改网站）<br>需定时检查上述目录下文件被替换或者添加非法文件。</p>
<p>#find &#x2F;usr&#x2F;bin -m -1 &#x2F;&#x2F;查看一天内&#x2F;usr&#x2F;bin目录下变化过的文件<br>#find &#x2F;var -type f -mtime -1 -exec ls -al {} ;</p>
<p>15）杀掉进程<br>示例如下：<br>ps aux |grep p_name |grep -v grep |awk ‘{print $2}’ |xargs kill -9 (从中了解到awk的用途)<br>killall -TERM 服务名<br>kill -9 cat &#x2F;usr&#x2F;local&#x2F;apache2&#x2F;logs&#x2F;httpd.pid 试试查杀进程PID<br>16）显示运行3级别开启的服务<br>ls &#x2F;etc&#x2F;rc3.d&#x2F;S* |cut -c 15- &#x2F;&#x2F;注意cut截取字符<br>17）.打开文件数目 # lsof | wc -l &#x2F;&#x2F;检查打开文件总数是否过多</p>
<p>c、系统启动异常处理及备份<br>1&gt;Linux系统启动引到过程（BRGKi）</p>
<p>●开机自检：检测出第一个能够引导系统的设备，比如硬盘或者光驱。<br>服务器主机开机以后，将根据主板BIOS中的设置对CPU、内存、显卡、键盘等硬件设备进行初步检测，检测成功后根据预设的启动顺序移交系统控制权，大多时候会移交给本机硬盘，因为操作系统一般都是装在硬盘内。<br>●MBR 引导：运行放在MBR扇区里的启动GRUB引导程序。<br>当从本机硬盘中启动系统时，首先根据硬盘第一个扇区中MBR（主引导记录）的设置，将系统控制权传递给包含操作系统引导文件的分区；或者直接根据MBR记录中的引导信息调用启动菜单。例如：GRUB等<br>●GRUB 菜单：GRUB引导程序通过读取GRUB配置文件**&#x2F;boot&#x2F;grub2&#x2F;grub.cfg**，来获取内核和镜像文件系统的设置以及路径位置。对于Linux操作系统来说，GRUB（统一启动加载器）是使用最为广泛的多系统引导器程序，系统控制权传递给GRUB以后，将会显示启动菜单给用户选择，并根据所选项（或采用默认值）加载Linux内核文件，然后将系统控制权转交给内核。（CentOS 7采用的是GRUB2启动引导器）<br>●加载Linux内核：把内核和镜像文件系统加载到内存中。<br>Linux内核是一个预先编译好的特殊二进制文件，介于各自硬件资源与系统程序之间，复制资源分配与调度，内核接过系统控制权以后，将完全掌控整个Linux操作系统的运行过程。（CentOS 7系统中，默认的内核文件位于“&#x2F;boot&#x2F;vmlinuz-3.10.0-514.e17.x86_64”）<br>●init 进程初始化：加载硬件驱动程序，内核把init进程加载到内存中运行。<br>为了完成进一步的系统引导过程，Linux内核首先将系统中的“&#x2F;sbin&#x2F;init”程序加载到内存中运行（运行中的程序称为进程），init进程（systemd）负责完成整个系统的初始化，最后等待用户进行登录。</p>
<p>2&gt; 为避免因引导扇区的损坏或丢失导致系统无法启动，需提前备份MBR扇区信息</p>
<p>MBR位于第一块硬盘的第一个物理扇区处，总共512字节；故我们可使用dd命令将MBR所在硬盘的第一个512字节的块保存即可，假设MBR在sda（第一块硬盘上），创建的备份目录为sdb上的&#x2F;mbrbak&#x2F;,执行命令：</p>
<p>可执行以下命令模式损坏MBR块区：</p>
<p>恢复时，重启系统，使用救援模式，用dd命令将MBR备份写回系统MBR第一个扇区即可：</p>
<p>3&gt;Grub引到程序异常导致的系统启动失败</p>
<p>比如：MBR中的GRUB引导程序（1-446字节）遭到破坏；或grub.cfg文件丢失，引导配置有误，文件位置&#x2F;boot&#x2F;grub2&#x2F;grup.cfg。</p>
<p>故障现象：系统引导卡死到grub &gt;提示符，无法继续进入</p>
<p>解决思路：</p>
<p>1.尝试手动输入引导命令修复（不推荐）</p>
<p>grub&gt; insmod xfs<br>grub&gt; linux16 &#x2F;vmlinuz-0-rescue-73d7ede256a74b0e975e69f22d862090 root&#x3D;UUID&#x3D;d069b243-6623-4983-8d61-3ec6956a4f2b ro rhgb quiet<br>grub&gt; initrd16 &#x2F;initramfs-0-rescue-73d7ede256a74b0e975e69f22d862090.img<br>grub&gt; boot<br>1<br>2<br>3<br>4<br>2.进入急救模式，重写或者从备份中恢复grub.cfg</p>
<p>然后挂载系统CD盘，从CD盘恢复GRUB数据。</p>
<p>3.急救模式向MBR扇区中重建grub程序<br>MBR位于第一块硬盘( &#x2F;dev&#x2F;sda)的第一个物理扇区处，总共512字节， 前446字节是主引导记录，分区表保存在MBR扇区中的第447-510字节中。修复方法跟MBR基本一致，只是备份的数据只需要446字节就可以，将bs&#x3D;512修改为bs&#x3D;446即可。过程如下：</p>
<p>a、创建新目录用以挂载备份磁盘，备份GRUB引导程序<br>#mkdir &#x2F;bak<br>#mount &#x2F;dev&#x2F;sdb1 &#x2F;bak&#x2F;<br>#dd if&#x3D;&#x2F;dev&#x2F;sda of&#x3D;&#x2F;bak&#x2F;grup.bak bs&#x3D;446 count&#x3D;1</p>
<p>b、模拟对MBR中的GRUB引导程序的破坏，但不破坏分区表<br>#dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;dev&#x2F;sda bs&#x3D;446 count&#x3D;1</p>
<p>c、引导界面进入急救模式，从备份文件中恢复GRUB引导程序<br>sh-4.2# mkdir &#x2F;backupdir<br>sh-4.2# mount &#x2F;dev&#x2F;sdb1 &#x2F;backupdir<br>sh-4.2# dd if&#x3D;backupdir&#x2F;grup.bak of&#x3D;&#x2F;dev&#x2F;sda bs&#x3D;446 count&#x3D;1<br>sh-4.2# exit</p>
<p>附录：系统启动时服务自启动管理工具ntsysv</p>
<p>ntsysv命令提供了一个基于文本界面的菜单操作方式，集中管理系统不同的运行等级下的系统服务启动状态。在RedHat各个发行版，CentOS各个版本，都自带这个工具。它具有互动式操作界面，您可以轻易地利用方向键和空格键等，开启，关闭操作系统在每个执行等级中，所要执行的系统服务。</p>
<p>输入ntsysv命令后，出现一个交互式的管理菜单，如下：</p>
<p>备份<br>dump -0aj -f &#x2F;tmp&#x2F;home0.bak &#x2F;home 制作一个 ‘&#x2F;home’ 目录的完整备份<br>dump -1aj -f &#x2F;tmp&#x2F;home0.bak &#x2F;home 制作一个 ‘&#x2F;home’ 目录的交互式备份<br>restore -if &#x2F;tmp&#x2F;home0.bak 还原一个交互式备份<br>rsync -rogpav –delete &#x2F;home &#x2F;tmp 同步两边的目录<br>rsync -rogpav -e ssh –delete &#x2F;home ip_address:&#x2F;tmp 通过SSH通道rsync<br>rsync -az -e ssh –delete ip_addr:&#x2F;home&#x2F;public &#x2F;home&#x2F;local 通过ssh和压缩将一个远程目录同步到本地目录<br>rsync -az -e ssh –delete &#x2F;home&#x2F;local ip_addr:&#x2F;home&#x2F;public 通过ssh和压缩将本地目录同步到远程目录<br>dd bs&#x3D;1M if&#x3D;&#x2F;dev&#x2F;hda | gzip | ssh user@ip_addr ‘dd of&#x3D;hda.gz’ 通过ssh在远程主机上执行一次备份本地磁盘的操作<br>dd if&#x3D;&#x2F;dev&#x2F;sda of&#x3D;&#x2F;tmp&#x2F;file1 备份磁盘内容到一个文件<br>tar -Puf backup.tar &#x2F;home&#x2F;user 执行一次对 ‘&#x2F;home&#x2F;user’ 目录的交互式备份操作<br>( cd &#x2F;tmp&#x2F;local&#x2F; &amp;&amp; tar c . ) | ssh -C user@ip_addr ‘cd &#x2F;home&#x2F;share&#x2F; &amp;&amp; tar x -p’ 通过ssh在远程目录中复制一个目录内容<br>( tar c &#x2F;home ) | ssh -C user@ip_addr ‘cd &#x2F;home&#x2F;backup-home &amp;&amp; tar x -p’ 通过ssh在远程目录中复制一个本地目录<br>tar cf - . | (cd &#x2F;tmp&#x2F;backup ; tar xf - ) 本地将一个目录复制到另一个地方，保留原有权限及链接<br>find &#x2F;home&#x2F;user1 -name ‘.txt’ | xargs cp -av –target-directory&#x3D;&#x2F;home&#x2F;backup&#x2F; –parents 从一个目录查找并复制所有以 ‘.txt’ 结尾的文件到另一个目录<br>find &#x2F;var&#x2F;log -name ‘.log’ | tar cv –files-from&#x3D;- | bzip2 &gt; log.tar.bz2 查找所有以 ‘.log’ 结尾的文件并做成一个bzip包<br>dd if&#x3D;&#x2F;dev&#x2F;hda of&#x3D;&#x2F;dev&#x2F;fd0 bs&#x3D;512 count&#x3D;1 做一个将 MBR (Master Boot Record)内容复制到软盘的动作<br>dd if&#x3D;&#x2F;dev&#x2F;fd0 of&#x3D;&#x2F;dev&#x2F;hda bs&#x3D;512 count&#x3D;1 从已经保存到软盘的备份中恢复MBR内容</p>
<p>15、Linux运维工具及技巧<br>1）15 个超赞的 Linux 工具<br>A、比grep、ack更快的递归搜索文件内容工具ag ：</p>
<p>B、tig 命令：字符模式下交互查看git项目，可以替代git命令。</p>
<p>C、mycli ：mysql客户端，支持语法高亮和命令补全，效果类似ipython，可以替代mysql命令。</p>
<p>D、jq : json文件处理以及格式化显示，支持高亮，可以替换python -m json.tool。</p>
<p>E、shellcheck ： shell脚本静态检查工具，能够识别语法错误以及不规范的写法。</p>
<p>F、、fzf ：命令行下模糊搜索工具，能够交互式智能搜索并选取文件或者内容，配合终端ctrl-r历史命令搜索简直完美。</p>
<p>G、PathPicker(fpp) : 在命令行输出中自动识别目录和文件，支持交互式，配合git非常有用。<br>eg1：git diff HEAD~8 –stat | fpp</p>
<p>H、htop : 提供更美观、更方便的进程监控工具，替代top命令。而glances ：更强大的 htop &#x2F; top 代替者。</p>
<p>下图为glances的：</p>
<p>I、axel ： 多线程下载工具，下载文件时可以替代curl、wget。<br>eg：axel -n 20 <a target="_blank" rel="noopener" href="http://centos.ustc.edu.cn/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1511.iso">http://centos.ustc.edu.cn/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1511.iso</a></p>
<p>J、sz&#x2F;rz ： 交互式文件传输，在多重跳板机下传输文件非常好用，不用一级一级传输。<br>K、cloc ：代码统计工具，能够统计代码的空行数、注释行、编程语言。</p>
<p>L、tmux ：终端复用工具，替代screen、nohup。</p>
<p>M、script&#x2F;scriptreplay : 终端会话录制。<br>eg1：录制<br>script -t 2&gt;time.txt session.typescript 执行后开始录制，下面你执行的所有操作都可被记录<br>#your commands<br>#录制结束<br>exit<br>#回放：scriptreplay -t time.txt session.typescript</p>
<p>N、multitail ：多重 tail。<br>通常你不止一个日志文件要监控，怎么办？ 终端软件里开多个 tab 太占地方，可以试试这个工具：</p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2022/11/11/linux%E8%BF%90%E7%BB%B4%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="网络-iso七层模型" class="article article-type-网络  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/2022/11/09/iso%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B/" target="_blank">iso七层模型</a>
  
    </h1>
  


  
  
<a href="/2022/11/09/iso%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B/" class="archive-article-date">
        <time datetime="2022-11-08T16:01:03.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-11-09</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p>一、是什么<br>OSI （Open System Interconnect）模型全称为开放式通信系统互连参考模型，是国际标准化组织 ( ISO ) 提出的一个试图使各种计算机在世界范围内互连为网络的标准框架</p>
<p>OSI将计算机网络体系结构划分为七层，每一层实现各自的功能和协议，并完成与相邻层的接口通信。即每一层扮演固定的角色，互不打扰</p>
<p>二、划分<br>OSI主要划分了七层，如下图所示：</p>
<p>应用层<br>应用层位于 OSI 参考模型的第七层，其作用是通过应用程序间的交互来完成特定的网络应用</p>
<p>该层协议定义了应用进程之间的交互规则，通过不同的应用层协议为不同的网络应用提供服务。例如域名系统 DNS，支持万维网应用的 HTTP 协议，电子邮件系统采用的 SMTP协议等</p>
<p>在应用层交互的数据单元我们称之为报文</p>
<p>表示层<br>表示层的作用是使通信的应用程序能够解释交换数据的含义，其位于 OSI参考模型的第六层，向上为应用层提供服务，向下接收来自会话层的服务</p>
<p>该层提供的服务主要包括数据压缩，数据加密以及数据描述，使应用程序不必担心在各台计算机中表示和存储的内部格式差异</p>
<p>会话层<br>会话层就是负责建立、管理和终止表示层实体之间的通信会话</p>
<p>该层提供了数据交换的定界和同步功能，包括了建立检查点和恢复方案的方法</p>
<p>传输层<br>传输层的主要任务是为两台主机进程之间的通信提供服务，处理数据包错误、数据包次序，以及其他一些关键传输问题</p>
<p>传输层向高层屏蔽了下层数据通信的细节。因此，它是计算机通信体系结构中关键的一层</p>
<p>其中，主要的传输层协议是TCP和UDP</p>
<p>网络层<br>两台计算机之间传送数据时其通信链路往往不止一条，所传输的信息甚至可能经过很多通信子网</p>
<p>网络层的主要任务就是选择合适的网间路由和交换节点，确保数据按时成功传送</p>
<p>在发送数据时，网络层把传输层产生的报文或用户数据报封装成分组和包，向下传输到数据链路层</p>
<p>在网络层使用的协议是无连接的网际协议（Internet Protocol）和许多路由协议，因此我们通常把该层简单地称为 IP 层</p>
<p>数据链路层<br>数据链路层通常也叫做链路层，在物理层和网络层之间。两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层协议</p>
<p>在两个相邻节点之间传送数据时，数据链路层将网络层交下来的 IP数据报组装成帧，在两个相邻节点间的链路上传送帧</p>
<p>每一帧的数据可以分成：报头head和数据data两部分:</p>
<p>head 标明数据发送者、接受者、数据类型，如 MAC地址<br>data 存储了计算机之间交互的数据<br>通过控制信息我们可以知道一个帧的起止比特位置，此外，也能使接收端检测出所收到的帧有无差错，如果发现差错，数据链路层能够简单的丢弃掉这个帧，以避免继续占用网络资源</p>
<p>物理层<br>作为OSI 参考模型中最低的一层，物理层的作用是实现计算机节点之间比特流的透明传送</p>
<p>该层的主要任务是确定与传输媒体的接口的一些特性（机械特性、电气特性、功能特性，过程特性）</p>
<p>该层主要是和硬件有关，与软件关系不大</p>
<p>三、传输过程<br>数据在各层之间的传输如下图所示：<br><img src="https://img-blog.csdnimg.cn/4556a80c9dd045c8969d91dd1c33675a.png#pic_center"></p>
<p>应用层报文被传送到运输层<br>在最简单的情况下，运输层收取到报文并附上附加信息，该首部将被接收端的运输层使用<br>应用层报文和运输层首部信息一道构成了运输层报文段。附加的信息可能包括：允许接收端运输层向上向适当的应用程序交付报文的信息以及差错检测位信息。该信息让接收端能够判断报文中的比特是否在途中已被改变<br>运输层则向网络层传递该报文段，网络层增加了如源和目的端系统地址等网络层首部信息，生成了网络层数据报<br>网络层数据报接下来被传递给链路层，在数据链路层数据包添加发送端 MAC 地址和接收端 MAC 地址后被封装成数据帧<br>在物理层数据帧被封装成比特流，之后通过传输介质传送到对端<br>对端再一步步解开封装，获取到传送的数据</p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2022/11/09/iso%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
    <article id="post-hello-world" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
  
  
    <h1 itemprop="name">
	
	  <a class="article-title" href="/2022/11/08/hello-world/" target="_blank">Hello World</a>
  
    </h1>
  


  
  
<a href="/2022/11/08/hello-world/" class="archive-article-date">
        <time datetime="2022-11-07T16:02:03.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2022-11-08</time>
</a>

  
  
    

  
  </header>
  
  <div class="article-entry" itemprop="articleBody">
    
    <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

    

    

    

  </div>
  <div class="article-info article-info-index">
    
    
    

    
    <p class="article-more-link">
      <a class="article-more-a" href="/2022/11/08/hello-world/">展开全文 >></a>
    </p>
    

    
    <div class="clearfix"></div>
  </div>
  </div>
</article>

<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>




  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2022-2023 <a href="http://example.com/" target="_blank">frozenfish</a>
    	</div>
      	<div class="footer-right">
			
			
      		GitHub:<a href="https://github.com/JoeyBling/hexo-theme-yilia-plus" target="_blank">hexo-theme-yilia-plus</a> by Litten
      	</div>
    </div>
  </div>
  
  
	<script src="/lib/busuanzi.pure.js"></script>
	
  
  
	
	<span id="busuanzi_container_site_pv" style="display:none">
		本站总访问量<span id="busuanzi_value_site_pv"></span>次	
	        <span class="post-meta-divider" >|</span>
	</span>
  	<span id="busuanzi_container_site_uv" style='display:none'>
  		本站访客数<span id="busuanzi_value_site_uv"></span>人
  	</span>
  
</footer>

    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: true
	}
</script>

<script>!function(r){function e(t){if(i[t])return i[t].exports;var n=i[t]={exports:{},id:t,loaded:!1};return r[t].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};e.m=r,e.c=i,e.p="./",e(0)}([function(t,n,r){r(208),t.exports=r(205)},function(t,n,r){var d=r(3),y=r(46),g=r(26),b=r(27),x=r(47),m="prototype",S=function(t,n,r){var e,i,o,u,c=t&S.F,f=t&S.G,a=t&S.S,s=t&S.P,l=t&S.B,h=f?d:a?d[n]||(d[n]={}):(d[n]||{})[m],v=f?y:y[n]||(y[n]={}),p=v[m]||(v[m]={});for(e in f&&(r=n),r)o=((i=!c&&h&&void 0!==h[e])?h:r)[e],u=l&&i?x(o,d):s&&"function"==typeof o?x(Function.call,o):o,h&&b(h,e,o,t&S.U),v[e]!=o&&g(v,e,u),s&&p[e]!=o&&(p[e]=o)};d.core=y,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(5);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n,r){var e=r(118)("wks"),i=r(79),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(49),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(174),o=r(53),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(24);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(22),i=r(60),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(96),i=r(34);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(40)("wks"),i=r(25),o=r(6).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(51);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(18);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=!0},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(11),i=r(75);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var o=r(3),u=r(26),c=r(30),f=r(79)("src"),e=r(219),i="toString",a=(""+e).split(i);r(46).inspectSource=function(t){return e.call(t)},(t.exports=function(t,n,r,e){var i="function"==typeof r;i&&(c(r,"name")||u(r,"name",n)),t[n]!==r&&(i&&(c(r,f)||u(r,f,t[n]?""+t[n]:a.join(String(n)))),t===o?t[n]=r:e?t[n]?t[n]=r:u(t,n,r):(delete t[n],u(t,n,r)))})(Function.prototype,i,function(){return"function"==typeof this&&this[f]||e.call(this)})},function(t,n,r){var e=r(1),i=r(4),u=r(51),c=/"/g,o=function(t,n,r,e){var i=String(u(t)),o="<"+n;return""!==r&&(o+=" "+r+'="'+String(e).replace(c,"&quot;")+'"'),o+">"+i+"</"+n+">"};t.exports=function(n,t){var r={};r[n]=t(o),e(e.P+e.F*i(function(){var t=""[n]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",r)}},function(t,n,r){var e=r(65),i=r(35);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(117),i=r(75),o=r(33),u=r(53),c=r(30),f=r(174),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(30),i=r(17),o=r(154)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(116),i=r(51);t.exports=function(t){return e(i(t))}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(9),o=r(16)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(25);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(19),i=r(6),o="__core-js_shared__",u=i[o]||(i[o]={});(t.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(23)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var i=r(18);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(6),i=r(19),o=r(23),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(16)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){var r=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=r)},function(t,n,r){var o=r(21);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){"use strict";var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?e:r)(t)}},function(t,n,r){var x=r(47),m=r(116),S=r(17),w=r(8),e=r(138);t.exports=function(l,t){var h=1==l,v=2==l,p=3==l,d=4==l,y=6==l,g=5==l||y,b=t||e;return function(t,n,r){for(var e,i,o=S(t),u=m(o),c=x(n,r,3),f=w(u.length),a=0,s=h?b(t,f):v?b(t,0):void 0;a<f;a++)if((g||a in u)&&(i=c(e=u[a],a,o),l))if(h)s[a]=i;else if(i)switch(l){case 3:return!0;case 5:return e;case 6:return a;case 2:s.push(e)}else if(d)return!1;return y?-1:p||d?d:s}}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var i=r(1),o=r(46),u=r(4);t.exports=function(t,n){var r=(o.Object||{})[t]||Object[t],e={};e[t]=n(r),i(i.S+i.F*u(function(){r(1)}),"Object",e)}},function(t,n,r){var i=r(5);t.exports=function(t,n){if(!i(t))return t;var r,e;if(n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;if("function"==typeof(r=t.valueOf)&&!i(e=r.call(t)))return e;if(!n&&"function"==typeof(r=t.toString)&&!i(e=r.call(t)))return e;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var d=r(6),y=r(19),g=r(93),b=r(13),x=r(9),m="prototype",S=function(t,n,r){var e,i,o,u=t&S.F,c=t&S.G,f=t&S.S,a=t&S.P,s=t&S.B,l=t&S.W,h=c?y:y[n]||(y[n]={}),v=h[m],p=c?d:f?d[n]:(d[n]||{})[m];for(e in c&&(r=n),r)(i=!u&&p&&void 0!==p[e])&&x(h,e)||(o=i?p[e]:r[e],h[e]=c&&"function"!=typeof p[e]?r[e]:s&&i?g(o,d):l&&p[e]==o?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[m]=e[m],t}(o):a&&"function"==typeof o?g(Function.call,o):o,a&&((h.virtual||(h.virtual={}))[e]=o,t&S.R&&v&&!v[e]&&b(v,e,o)))};S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,n,r){var e=r(34);t.exports=function(t){return Object(e(t))}},function(t,n,r){var o=r(196),e=r(1),i=r(118)("metadata"),u=i.store||(i.store=new(r(200))),c=function(t,n,r){var e=u.get(t);if(!e){if(!r)return;u.set(t,e=new o)}var i=e.get(n);if(!i){if(!r)return;e.set(n,i=new o)}return i};t.exports={store:u,map:c,has:function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},get:function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},set:function(t,n,r,e){c(r,e,!0).set(t,n)},keys:function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){e(e.S,"Reflect",t)}}},function(t,n,r){"use strict";if(r(10)){var g=r(68),b=r(3),x=r(4),m=r(1),S=r(132),e=r(159),h=r(47),w=r(70),i=r(75),_=r(26),o=r(76),u=r(49),O=r(8),E=r(194),c=r(78),f=r(53),a=r(30),M=r(81),P=r(5),v=r(17),p=r(145),j=r(72),F=r(32),A=r(73).f,d=r(161),s=r(79),l=r(7),y=r(50),I=r(120),L=r(119),N=r(162),T=r(82),k=r(125),R=r(77),C=r(137),D=r(166),G=r(11),W=r(31),U=G.f,V=W.f,B=b.RangeError,q=b.TypeError,z=b.Uint8Array,K="ArrayBuffer",H="Shared"+K,J="BYTES_PER_ELEMENT",$="prototype",Y=Array[$],X=e.ArrayBuffer,Q=e.DataView,Z=y(0),tt=y(2),nt=y(3),rt=y(4),et=y(5),it=y(6),ot=I(!0),ut=I(!1),ct=N.values,ft=N.keys,at=N.entries,st=Y.lastIndexOf,lt=Y.reduce,ht=Y.reduceRight,vt=Y.join,pt=Y.sort,dt=Y.slice,yt=Y.toString,gt=Y.toLocaleString,bt=l("iterator"),xt=l("toStringTag"),mt=s("typed_constructor"),St=s("def_constructor"),wt=S.CONSTR,_t=S.TYPED,Ot=S.VIEW,Et="Wrong length!",Mt=y(1,function(t,n){return It(L(t,t[St]),n)}),Pt=x(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),jt=!!z&&!!z[$].set&&x(function(){new z(1).set({})}),Ft=function(t,n){var r=u(t);if(r<0||r%n)throw B("Wrong offset!");return r},At=function(t){if(P(t)&&_t in t)return t;throw q(t+" is not a typed array!")},It=function(t,n){if(!(P(t)&&mt in t))throw q("It is not a typed array constructor!");return new t(n)},Lt=function(t,n){return Nt(L(t,t[St]),n)},Nt=function(t,n){for(var r=0,e=n.length,i=It(t,e);r<e;)i[r]=n[r++];return i},Tt=function(t,n,r){U(t,n,{get:function(){return this._d[r]}})},kt=function(t){var n,r,e,i,o,u,c=v(t),f=arguments.length,a=1<f?arguments[1]:void 0,s=void 0!==a,l=d(c);if(null!=l&&!p(l)){for(u=l.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(s&&2<f&&(a=h(a,arguments[2],2)),n=0,r=O(c.length),i=It(this,r);n<r;n++)i[n]=s?a(c[n],n):c[n];return i},Rt=function(){for(var t=0,n=arguments.length,r=It(this,n);t<n;)r[t]=arguments[t++];return r},Ct=!!z&&x(function(){gt.call(new z(1))}),Dt=function(){return gt.apply(Ct?dt.call(At(this)):At(this),arguments)},Gt={copyWithin:function(t,n){return D.call(At(this),t,n,2<arguments.length?arguments[2]:void 0)},every:function(t){return rt(At(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return C.apply(At(this),arguments)},filter:function(t){return Lt(this,tt(At(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return et(At(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return it(At(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){Z(At(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return ut(At(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return ot(At(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return vt.apply(At(this),arguments)},lastIndexOf:function(t){return st.apply(At(this),arguments)},map:function(t){return Mt(At(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return lt.apply(At(this),arguments)},reduceRight:function(t){return ht.apply(At(this),arguments)},reverse:function(){for(var t,n=this,r=At(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(At(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return pt.call(At(this),t)},subarray:function(t,n){var r=At(this),e=r.length,i=c(t,e);return new(L(r,r[St]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,O((void 0===n?e:c(n,e))-i))}},Wt=function(t,n){return Lt(this,dt.call(At(this),t,n))},Ut=function(t){At(this);var n=Ft(arguments[1],1),r=this.length,e=v(t),i=O(e.length),o=0;if(r<i+n)throw B(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(At(this))},keys:function(){return ft.call(At(this))},values:function(){return ct.call(At(this))}},Bt=function(t,n){return P(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return Bt(t,n=f(n,!0))?i(2,t[n]):V(t,n)},zt=function(t,n,r){return!(Bt(t,n=f(n,!0))&&P(r)&&a(r,"value"))||a(r,"get")||a(r,"set")||r.configurable||a(r,"writable")&&!r.writable||a(r,"enumerable")&&!r.enumerable?U(t,n,r):(t[n]=r.value,t)};wt||(W.f=qt,G.f=zt),m(m.S+m.F*!wt,"Object",{getOwnPropertyDescriptor:qt,defineProperty:zt}),x(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Kt=o({},Gt);o(Kt,Vt),_(Kt,bt,Vt.values),o(Kt,{slice:Wt,set:Ut,constructor:function(){},toString:yt,toLocaleString:Dt}),Tt(Kt,"buffer","b"),Tt(Kt,"byteOffset","o"),Tt(Kt,"byteLength","l"),Tt(Kt,"length","e"),U(Kt,xt,{get:function(){return this[_t]}}),t.exports=function(t,l,n,o){var h=t+((o=!!o)?"Clamped":"")+"Array",r="get"+t,u="set"+t,v=b[h],c=v||{},e=v&&F(v),i=!v||!S.ABV,f={},a=v&&v[$],p=function(t,i){U(t,i,{get:function(){return t=i,(n=this._d).v[r](t*l+n.o,Pt);var t,n},set:function(t){return n=i,r=t,e=this._d,o&&(r=(r=Math.round(r))<0?0:255<r?255:255&r),void e.v[u](n*l+e.o,r,Pt);var n,r,e},enumerable:!0})};i?(v=n(function(t,n,r,e){w(t,v,h,"_d");var i,o,u,c,f=0,a=0;if(P(n)){if(!(n instanceof X||(c=M(n))==K||c==H))return _t in n?Nt(v,n):kt.call(v,n);i=n,a=Ft(r,l);var s=n.byteLength;if(void 0===e){if(s%l)throw B(Et);if((o=s-a)<0)throw B(Et)}else if(s<(o=O(e)*l)+a)throw B(Et);u=o/l}else u=E(n),i=new X(o=u*l);for(_(t,"_d",{b:i,o:a,l:o,e:u,v:new Q(i)});f<u;)p(t,f++)}),a=v[$]=j(Kt),_(a,"constructor",v)):x(function(){v(1)})&&x(function(){new v(-1)})&&k(function(t){new v,new v(null),new v(1.5),new v(t)},!0)||(v=n(function(t,n,r,e){var i;return w(t,v,h),P(n)?n instanceof X||(i=M(n))==K||i==H?void 0!==e?new c(n,Ft(r,l),e):void 0!==r?new c(n,Ft(r,l)):new c(n):_t in n?Nt(v,n):kt.call(v,n):new c(E(n))}),Z(e!==Function.prototype?A(c).concat(A(e)):A(c),function(t){t in v||_(v,t,c[t])}),v[$]=a,g||(a.constructor=v));var s=a[bt],d=!!s&&("values"==s.name||null==s.name),y=Vt.values;_(v,mt,!0),_(a,_t,h),_(a,Ot,!0),_(a,St,v),(o?new v(1)[xt]==h:xt in a)||U(a,xt,{get:function(){return h}}),f[h]=v,m(m.G+m.W+m.F*(v!=c),f),m(m.S,h,{BYTES_PER_ELEMENT:l}),m(m.S+m.F*x(function(){c.of.call(v,1)}),h,{from:kt,of:Rt}),J in a||_(a,J,l),m(m.P,h,Gt),R(h),m(m.P+m.F*jt,h,{set:Ut}),m(m.P+m.F*!d,h,Vt),g||a.toString==yt||(a.toString=yt),m(m.P+m.F*x(function(){new v(1).slice()}),h,{slice:Wt}),m(m.P+m.F*(x(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!x(function(){a.toLocaleString.call([1,2])})),h,{toLocaleString:Dt}),T[h]=d?s:y,g||d||_(a,bt,y)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(18),i=r(6).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(20)(function(){return 7!=Object.defineProperty(r(59)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var x=r(23),m=r(54),S=r(66),w=r(13),_=r(36),O=r(98),E=r(38),M=r(104),P=r(16)("iterator"),j=!([].keys&&"next"in[].keys()),F="values",A=function(){return this};t.exports=function(t,n,r,e,i,o,u){O(r,n,e);var c,f,a,s=function(t){if(!j&&t in p)return p[t];switch(t){case"keys":case F:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==F,v=!1,p=t.prototype,d=p[P]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,b="Array"==n&&p.entries||d;if(b&&((a=M(b.call(new t)))!==Object.prototype&&a.next&&(E(a,l,!0),x||"function"==typeof a[P]||w(a,P,A))),h&&d&&d.name!==F&&(v=!0,y=function(){return d.call(this)}),x&&!u||!j&&!v&&p[P]||w(p,P,y),_[n]=y,_[l]=A,i)if(c={values:h?y:s(F),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else m(m.P+m.F*(j||v),n,c);return c}},function(t,n,e){var i=e(22),o=e(101),u=e(35),c=e(39)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(59)("iframe"),r=u.length;for(n.style.display="none",e(95).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(65),i=r(35).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var u=r(9),c=r(15),f=r(92)(!1),a=r(39)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;null==i[e]&&r(26)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n){t.exports=!1},function(t,n,r){var e=r(79)("meta"),i=r(5),o=r(30),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n,r){var h=r(47),v=r(177),p=r(145),d=r(2),y=r(8),g=r(161),b={},x={};(n=t.exports=function(t,n,r,e,i){var o,u,c,f,a=i?function(){return t}:g(t),s=h(r,e,n?2:1),l=0;if("function"!=typeof a)throw TypeError(t+" is not iterable!");if(p(a)){for(o=y(t.length);l<o;l++)if((f=n?s(d(u=t[l])[0],u[1]):s(t[l]))===b||f===x)return f}else for(c=a.call(t);!(u=c.next()).done;)if((f=v(c,s,u.value,n))===b||f===x)return f}).BREAK=b,n.RETURN=x},function(t,n,e){var i=e(2),o=e(183),u=e(141),c=e(154)("IE_PROTO"),f=function(){},a="prototype",s=function(){var t,n=e(140)("iframe"),r=u.length;for(n.style.display="none",e(143).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s[a][u[r]];return s()};t.exports=Object.create||function(t,n){var r;return null!==t?(f[a]=i(t),r=new f,f[a]=null,r[c]=t):r=s(),void 0===n?r:o(r,n)}},function(t,n,r){var e=r(185),i=r(141).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(185),i=r(141);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,r){var i=r(27);t.exports=function(t,n,r){for(var e in n)i(t,e,n[e],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(49),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(5);t.exports=function(t,n){if(!e(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,r){var i=r(45),o=r(7)("toStringTag"),u="Arguments"==i(function(){return arguments}());t.exports=function(t){var n,r,e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),o))?r:u?i(n):"Object"==(e=i(n))&&"function"==typeof n.callee?"Arguments":e}},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(30),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var u=r(1),e=r(51),c=r(4),f=r(157),i="["+f+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t,n,r){var e={},i=c(function(){return!!f[t]()||"​"!="​"[t]()}),o=e[t]=i?n(l):f[t];r&&(e[r]=o),u(u.P+u.F*i,"String",e)},l=s.trim=function(t,n){return t=String(e(t)),1&n&&(t=t.replace(o,"")),2&n&&(t=t.replace(a,"")),t};t.exports=s},function(t,n,r){t.exports={default:r(88),__esModule:!0}},function(t,n,r){t.exports={default:r(89),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=e(r(86)),o=e(r(85)),u="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};n.default="function"==typeof o.default&&"symbol"===u(i.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,n,r){r(111),r(109),r(112),r(113),t.exports=r(19).Symbol},function(t,n,r){r(110),r(114),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var f=r(15),a=r(107),s=r(106);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){var o=r(90);t.exports=function(e,i,t){if(o(e),void 0===i)return e;switch(t){case 1:return function(t){return e.call(i,t)};case 2:return function(t,n){return e.call(i,t,n)};case 3:return function(t,n,r){return e.call(i,t,n,r)}}return function(){return e.apply(i,arguments)}}},function(t,n,r){var c=r(29),f=r(64),a=r(37);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){var e=r(6).document;t.exports=e&&e.documentElement},function(t,n,r){var e=r(58);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(58);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(62),i=r(24),o=r(38),u={};r(13)(u,r(16)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(25)("meta"),i=r(18),o=r(9),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(20)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&l.NEED&&f(t)&&!o(t,e)&&s(t),t}}},function(t,n,r){var u=r(14),c=r(22),f=r(29);t.exports=r(12)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(24),o=r(15),u=r(42),c=r(9),f=r(60),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(15),i=r(63).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var e=r(9),i=r(55),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var f=r(41),a=r(34);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return 0<t?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(91),i=r(99),o=r(36),u=r(15);t.exports=r(61)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(105)(!0);r(61)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(6),u=r(9),i=r(12),o=r(54),c=r(66),f=r(100).KEY,a=r(20),s=r(40),l=r(38),h=r(25),v=r(16),p=r(44),d=r(43),y=r(94),g=r(97),b=r(22),x=r(18),m=r(55),S=r(15),w=r(42),_=r(24),O=r(62),E=r(103),M=r(102),P=r(64),j=r(14),F=r(29),A=M.f,I=j.f,L=E.f,N=e.Symbol,T=e.JSON,k=T&&T.stringify,R="prototype",C=v("_hidden"),D=v("toPrimitive"),G={}.propertyIsEnumerable,W=s("symbol-registry"),U=s("symbols"),V=s("op-symbols"),B=Object[R],q="function"==typeof N&&!!P.f,z=e.QObject,K=!z||!z[R]||!z[R].findChild,H=i&&a(function(){return 7!=O(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(B,n);e&&delete B[n],I(t,n,r),e&&t!==B&&I(B,n,e)}:I,J=function(t){var n=U[t]=O(N[R]);return n._k=t,n},$=q&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===B&&Y(V,n,r),b(t),n=w(n,!0),b(r),u(U,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=O(r,{enumerable:_(0,!1)})):(u(t,C)||I(t,C,_(1,{})),t[C][n]=!0),H(t,n,r)):I(t,n,r)},X=function(t,n){b(t);for(var r,e=y(n=S(n)),i=0,o=e.length;i<o;)Y(t,r=e[i++],n[r]);return t},Q=function(t){var n=G.call(this,t=w(t,!0));return!(this===B&&u(U,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(U,t)||u(this,C)&&this[C][t])||n)},Z=function(t,n){if(t=S(t),n=w(n,!0),t!==B||!u(U,n)||u(V,n)){var r=A(t,n);return!r||!u(U,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}},tt=function(t){for(var n,r=L(S(t)),e=[],i=0;r.length>i;)u(U,n=r[i++])||n==C||n==f||e.push(n);return e},nt=function(t){for(var n,r=t===B,e=L(r?V:S(t)),i=[],o=0;e.length>o;)!u(U,n=e[o++])||r&&!u(B,n)||i.push(U[n]);return i};q||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),H(this,n,_(1,t))};return i&&K&&H(B,n,{configurable:!0,set:r}),J(n)})[R],"toString",function(){return this._k}),M.f=Z,j.f=Y,r(63).f=E.f=tt,r(37).f=Q,P.f=nt,i&&!r(23)&&c(B,"propertyIsEnumerable",Q,!0),p.f=function(t){return J(v(t))}),o(o.G+o.W+o.F*!q,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;rt.length>et;)v(rt[et++]);for(var it=F(v.store),ot=0;it.length>ot;)d(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return u(W,t+="")?W[t]:W[t]=N(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in W)if(W[n]===t)return n},useSetter:function(){K=!0},useSimple:function(){K=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,n){return void 0===n?O(t):X(O(t),n)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:nt});var ut=a(function(){P.f(1)});o(o.S+o.F*ut,"Object",{getOwnPropertySymbols:function(t){return P.f(m(t))}}),T&&o(o.S+o.F*(!q||a(function(){var t=N();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(x(n)||void 0!==t)&&!$(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),N[R][D]||r(13)(N[R],D,N[R].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(108);for(var e=r(6),i=r(13),o=r(36),u=r(16)("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),f=0;f<c.length;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(46),i=r(3),o="__core-js_shared__",u=i[o]||(i[o]={});(t.exports=function(t,n){return u[t]||(u[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:r(68)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,n,r){var i=r(2),o=r(21),u=r(7)("species");t.exports=function(t,n){var r,e=i(t).constructor;return void 0===e||null==(r=i(e)[u])?n:o(r)}},function(t,n,r){var f=r(33),a=r(8),s=r(78);t.exports=function(c){return function(t,n,r){var e,i=f(t),o=a(i.length),u=s(r,o);if(c&&n!=n){for(;u<o;)if((e=i[u++])!=e)return!0}else for(;u<o;u++)if((c||u in i)&&i[u]===n)return c||u||0;return!c&&-1}}},function(t,n,r){"use strict";var g=r(3),b=r(1),x=r(27),m=r(76),S=r(69),w=r(71),_=r(70),O=r(5),E=r(4),M=r(125),P=r(83),j=r(144);t.exports=function(e,t,n,r,i,o){var u=g[e],c=u,f=i?"set":"add",a=c&&c.prototype,s={},l=function(t){var r=a[t];x(a,t,"delete"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!O(t))&&r.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!O(t)?void 0:r.call(this,0===t?0:t)}:"add"==t?function(t){return r.call(this,0===t?0:t),this}:function(t,n){return r.call(this,0===t?0:t,n),this})};if("function"==typeof c&&(o||a.forEach&&!E(function(){(new c).entries().next()}))){var h=new c,v=h[f](o?{}:-0,1)!=h,p=E(function(){h.has(1)}),d=M(function(t){new c(t)}),y=!o&&E(function(){for(var t=new c,n=5;n--;)t[f](n,n);return!t.has(-0)});d||(((c=t(function(t,n){_(t,c,e);var r=j(new u,t,c);return null!=n&&w(n,i,r[f],r),r})).prototype=a).constructor=c),(p||y)&&(l("delete"),l("has"),i&&l("get")),(y||v)&&l(f),o&&a.clear&&delete a.clear}else c=r.getConstructor(t,e,i,f),m(c.prototype,n),S.NEED=!0;return P(c,e),s[e]=c,b(b.G+b.W+b.F*(c!=u),s),o||r.setStrong(c,e,i),c}},function(t,n,r){"use strict";r(197);var s=r(27),l=r(26),h=r(4),v=r(51),p=r(7),d=r(152),y=p("species"),g=!h(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),b=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(r,t,n){var e=p(r),o=!h(function(){var t={};return t[e]=function(){return 7},7!=""[r](t)}),i=o?!h(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===r&&(n.constructor={},n.constructor[y]=function(){return n}),n[e](""),!t}):void 0;if(!o||!i||"replace"===r&&!g||"split"===r&&!b){var u=/./[e],c=n(v,e,""[r],function(t,n,r,e,i){return n.exec===d?o&&!i?{done:!0,value:u.call(n,r,e)}:{done:!0,value:t.call(r,n,e)}:{done:!1}}),f=c[0],a=c[1];s(String.prototype,r,f),l(RegExp.prototype,e,2==t?function(t,n){return a.call(t,this,n)}:function(t){return a.call(t,this)})}}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(5),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var o=r(7)("iterator"),u=!1;try{var e=[7][o]();e.return=function(){u=!0},Array.from(e,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!u)return!1;var r=!1;try{var e=[7],i=e[o]();i.next=function(){return{done:r=!0}},e[o]=function(){return i},t(e)}catch(t){}return r}},function(t,n,r){"use strict";t.exports=r(68)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){"use strict";var i=r(81),o=RegExp.prototype.exec;t.exports=function(t,n){var r=t.exec;if("function"==typeof r){var e=r.call(t,n);if("object"!=typeof e)throw new TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==i(t))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(t,n)}},function(t,n,r){"use strict";var e=r(1),u=r(21),c=r(47),f=r(71);t.exports=function(t){e(e.S,t,{from:function(t){var n,r,e,i,o=arguments[1];return u(this),(n=void 0!==o)&&u(o),null==t?new this:(r=[],n?(e=0,i=c(o,arguments[2],2),f(t,!1,function(t){r.push(i(t,e++))})):f(t,!1,r.push,r),new this(r))}})}},function(t,n,r){"use strict";var e=r(1);t.exports=function(t){e(e.S,t,{of:function(){for(var t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return new this(n)}})}},function(t,n,r){var f=r(49),a=r(51);t.exports=function(c){return function(t,n){var r,e,i=String(a(t)),o=f(n),u=i.length;return o<0||u<=o?c?"":void 0:(r=i.charCodeAt(o))<55296||56319<r||o+1===u||(e=i.charCodeAt(o+1))<56320||57343<e?c?i.charAt(o):r:c?i.slice(o,o+2):e-56320+(r-55296<<10)+65536}}},function(t,n,r){for(var e,i=r(3),o=r(26),u=r(79),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n,r){var e=r(3).navigator;t.exports=e&&e.userAgent||""},function(t,n){"use strict";var r,e={versions:(r=window.navigator.userAgent,{trident:-1<r.indexOf("Trident"),presto:-1<r.indexOf("Presto"),webKit:-1<r.indexOf("AppleWebKit"),gecko:-1<r.indexOf("Gecko")&&-1==r.indexOf("KHTML"),mobile:!!r.match(/AppleWebKit.*Mobile.*/),ios:!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<r.indexOf("Android")||-1<r.indexOf("Linux"),iPhone:-1<r.indexOf("iPhone")||-1<r.indexOf("Mac"),iPad:-1<r.indexOf("iPad"),webApp:-1==r.indexOf("Safari"),weixin:-1==r.indexOf("MicroMessenger")})};t.exports=e},function(t,n,r){"use strict";var e,i=r(87),l=(e=i)&&e.__esModule?e:{default:e},h=function(){function n(t,n,r){return n||r?String.fromCharCode(n||r):o[t]||t}function r(t){return s[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,i=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},u=/\u00a0/g,c=/<br\s*\/?>/gi,f=/\r?\n/g,a=/\s/g,s={};for(var t in o)s[o[t]]=t;return o["&apos;"]="'",s["'"]="&#39;",{encode:function(t){return t?(""+t).replace(i,r).replace(f,"<br/>").replace(a,"&nbsp;"):""},decode:function(t){return t?(""+t).replace(c,"\n").replace(e,n).replace(u," "):""},encodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;for(var n=[],r=0,e=(t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")})).length;r<e;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;for(var n=[],r=0,e=(t+="").length;r<e;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)t[n]=h.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,l.default)(t)))for(var e in t)t[e]=h.encodeObject(t[e]);else if("string"==typeof t)return h.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=h},function(t,n,r){"use strict";var e=r(131)(!0);t.exports=function(t,n,r){return n+(r?e(t,n).length:1)}},function(t,n,r){"use strict";var c=r(17),f=r(78),a=r(8);t.exports=function(t){for(var n=c(this),r=a(n.length),e=arguments.length,i=f(1<e?arguments[1]:void 0,r),o=2<e?arguments[2]:void 0,u=void 0===o?r:f(o,r);i<u;)n[i++]=t;return n}},function(t,n,r){var e=r(215);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(11),i=r(75);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(5),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(n){var r=/./;try{"/./"[n](r)}catch(t){try{return r[e]=!1,!"/./"[n](r)}catch(n){}}return!0}},function(t,n,r){var e=r(3).document;t.exports=e&&e.documentElement},function(t,n,r){var o=r(5),u=r(153).set;t.exports=function(t,n,r){var e,i=n.constructor;return i!==r&&"function"==typeof i&&(e=i.prototype)!==r.prototype&&o(e)&&u&&u(t,e),t}},function(t,n,r){var e=r(82),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){"use strict";var e=r(72),i=r(75),o=r(83),u={};r(26)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var x=r(68),m=r(1),S=r(27),w=r(26),_=r(82),O=r(146),E=r(83),M=r(32),P=r(7)("iterator"),j=!([].keys&&"next"in[].keys()),F="values",A=function(){return this};t.exports=function(t,n,r,e,i,o,u){O(r,n,e);var c,f,a,s=function(t){if(!j&&t in p)return p[t];switch(t){case"keys":case F:return function(){return new r(this,t)}}return function(){return new r(this,t)}},l=n+" Iterator",h=i==F,v=!1,p=t.prototype,d=p[P]||p["@@iterator"]||i&&p[i],y=d||s(i),g=i?h?s("entries"):y:void 0,b="Array"==n&&p.entries||d;if(b&&((a=M(b.call(new t)))!==Object.prototype&&a.next&&(E(a,l,!0),x||"function"==typeof a[P]||w(a,P,A))),h&&d&&d.name!==F&&(v=!0,y=function(){return d.call(this)}),x&&!u||!j&&!v&&p[P]||w(p,P,y),_[n]=y,_[l]=A,i)if(c={values:h?y:s(F),keys:o?y:s("keys"),entries:g},u)for(f in c)f in p||S(p,f,c[f]);else m(m.P+m.F*(j||v),n,c);return c}},function(t,n){var r=Math.expm1;t.exports=!r||22025.465794806718<r(10)||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var c=r(3),f=r(158).set,a=c.MutationObserver||c.WebKitMutationObserver,s=c.process,l=c.Promise,h="process"==r(45)(s);t.exports=function(){var r,e,i,t=function(){var t,n;for(h&&(t=s.domain)&&t.exit();r;){n=r.fn,r=r.next;try{n()}catch(t){throw r?i():e=void 0,t}}e=void 0,t&&t.enter()};if(h)i=function(){s.nextTick(t)};else if(!a||c.navigator&&c.navigator.standalone)if(l&&l.resolve){var n=l.resolve(void 0);i=function(){n.then(t)}}else i=function(){f.call(c,t)};else{var o=!0,u=document.createTextNode("");new a(t).observe(u,{characterData:!0}),i=function(){u.data=o=!o}}return function(t){var n={fn:t,next:void 0};e&&(e.next=n),r||(r=n,i()),e=n}}},function(t,n,r){"use strict";function e(t){var r,e;this.promise=new t(function(t,n){if(void 0!==r||void 0!==e)throw TypeError("Bad Promise constructor");r=t,e=n}),this.resolve=i(r),this.reject=i(e)}var i=r(21);t.exports.f=function(t){return new e(t)}},function(t,n,r){"use strict";var e,i,u=r(115),c=RegExp.prototype.exec,f=String.prototype.replace,o=c,a="lastIndex",s=(e=/a/,i=/b*/g,c.call(e,"a"),c.call(i,"a"),0!==e[a]||0!==i[a]),l=void 0!==/()??/.exec("")[1];(s||l)&&(o=function(t){var n,r,e,i,o=this;return l&&(r=new RegExp("^"+o.source+"$(?!\\s)",u.call(o))),s&&(n=o[a]),e=c.call(o,t),s&&e&&(o[a]=o.global?e.index+e[0].length:n),l&&e&&1<e.length&&f.call(e[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(e[i]=void 0)}),e}),t.exports=o},function(t,n,i){var r=i(5),e=i(2),o=function(t,n){if(e(t),!r(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,e){try{(e=i(47)(Function.call,i(31).f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(t){r=!0}return function(t,n){return o(t,n),r?t.__proto__=n:e(t,n),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(118)("keys"),i=r(79);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(124),i=r(51);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var i=r(49),o=r(51);t.exports=function(t){var n=String(o(this)),r="",e=i(t);if(e<0||e==1/0)throw RangeError("Count can't be negative");for(;0<e;(e>>>=1)&&(n+=n))1&e&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(47),c=r(175),f=r(143),a=r(140),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=s.Dispatch,y=0,g={},b="onreadystatechange",x=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},m=function(t){x.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return g[++y]=function(){c("function"==typeof t?t:Function(t),n)},e(y),y},v=function(t){delete g[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(x,t,1))}:d&&d.now?e=function(t){d.now(u(x,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=b in a("script")?function(t){f.appendChild(a("script"))[b]=function(){f.removeChild(this),x.call(t)}}:function(t){setTimeout(u(x,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";function e(t,n,r){var e,i,o,u=new Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?W(2,-24)-W(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for((t=G(t))!=t||t===C?(i=t!=t?1:0,e=f):(e=U(V(t)/B),t*(o=W(2,-e))<1&&(e--,o*=2),2<=(t+=1<=e+a?s/o:s*W(2,1-a))*o&&(e++,o/=2),f<=e+a?(i=0,e=f):1<=e+a?(i=(t*o-1)*W(2,n),e+=a):(i=t*W(2,a-1)*W(2,n),e=0));8<=n;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;0<c;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u}function i(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;0<c;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;0<c;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-C:C;e+=W(2,n),s-=u}return(a?-1:1)*e*W(2,s-n)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function u(t){return[255&t]}function c(t){return[255&t,t>>8&255]}function f(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return e(t,52,8)}function s(t){return e(t,23,4)}function l(t,n,r){M(t[I],n,{get:function(){return this[r]}})}function h(t,n,r,e){var i=O(+r);if(i+n>t[H])throw R(L);var o=t[K]._b,u=i+t[J],c=o.slice(u,u+n);return e?c:c.reverse()}function v(t,n,r,e,i,o){var u=O(+r);if(u+n>t[H])throw R(L);for(var c=t[K]._b,f=u+t[J],a=e(+i),s=0;s<n;s++)c[f+s]=a[o?s:n-s-1]}var p=r(3),d=r(10),y=r(68),g=r(132),b=r(26),x=r(76),m=r(4),S=r(70),w=r(49),_=r(8),O=r(194),E=r(73).f,M=r(11).f,P=r(137),j=r(83),F="ArrayBuffer",A="DataView",I="prototype",L="Wrong index!",N=p[F],T=p[A],k=p.Math,R=p.RangeError,C=p.Infinity,D=N,G=k.abs,W=k.pow,U=k.floor,V=k.log,B=k.LN2,q="byteLength",z="byteOffset",K=d?"_b":"buffer",H=d?"_l":q,J=d?"_o":z;if(g.ABV){if(!m(function(){N(1)})||!m(function(){new N(-1)})||m(function(){return new N,new N(1.5),new N(NaN),N.name!=F})){for(var $,Y=(N=function(t){return S(this,N),new D(O(t))})[I]=D[I],X=E(D),Q=0;X.length>Q;)($=X[Q++])in N||b(N,$,D[$]);y||(Y.constructor=N)}var Z=new T(new N(2)),tt=T[I].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||x(T[I],{setInt8:function(t,n){tt.call(this,t,n<<24>>24)},setUint8:function(t,n){tt.call(this,t,n<<24>>24)}},!0)}else N=function(t){S(this,N,F);var n=O(t);this._b=P.call(new Array(n),0),this[H]=n},T=function(t,n,r){S(this,T,A),S(t,N,A);var e=t[H],i=w(n);if(i<0||e<i)throw R("Wrong offset!");if(e<i+(r=void 0===r?e-i:_(r)))throw R("Wrong length!");this[K]=t,this[J]=i,this[H]=r},d&&(l(N,q,"_l"),l(T,"buffer","_b"),l(T,q,"_l"),l(T,z,"_o")),x(T[I],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var n=h(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=h(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){v(this,1,t,u,n)},setUint8:function(t,n){v(this,1,t,u,n)},setInt16:function(t,n){v(this,2,t,c,n,arguments[2])},setUint16:function(t,n){v(this,2,t,c,n,arguments[2])},setInt32:function(t,n){v(this,4,t,f,n,arguments[2])},setUint32:function(t,n){v(this,4,t,f,n,arguments[2])},setFloat32:function(t,n){v(this,4,t,s,n,arguments[2])},setFloat64:function(t,n){v(this,8,t,a,n,arguments[2])}});j(N,F),j(T,A),b(T[I],g.VIEW,!0),n[F]=N,n[A]=T},function(t,n,r){var e=r(3),i=r(46),o=r(68),u=r(195),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(81),i=r(7)("iterator"),o=r(82);t.exports=r(46).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(67),i=r(178),o=r(82),u=r(33);t.exports=r(147)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==n?r:"values"==n?t[r]:[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){t.exports=function(t,n){t.classList?t.classList.add(n):t.className+=" "+n}},function(t,n){t.exports=function(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var a=r(17),s=r(78),l=r(8);t.exports=[].copyWithin||function(t,n){var r=a(this),e=l(r.length),i=s(t,e),o=s(n,e),u=2<arguments.length?arguments[2]:void 0,c=Math.min((void 0===u?e:s(u,e))-o,e-i),f=1;for(o<i&&i<o+c&&(f=-1,o+=c-1,i+=c-1);0<c--;)o in r?r[i]=r[o]:delete r[i],i+=f,o+=f;return r}},function(t,n,r){var e=r(71);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var s=r(21),l=r(17),h=r(116),v=r(8);t.exports=function(t,n,r,e,i){s(n);var o=l(t),u=h(o),c=v(o.length),f=i?c-1:0,a=i?-1:1;if(r<2)for(;;){if(f in u){e=u[f],f+=a;break}if(f+=a,i?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=f:f<c;f+=a)f in u&&(e=n(e,u[f],f,o));return e}},function(t,n,r){"use strict";var o=r(21),u=r(5),c=r(175),f=[].slice,a={};t.exports=Function.bind||function(n){var r=o(this),e=f.call(arguments,1),i=function(){var t=e.concat(f.call(arguments));return this instanceof i?function(t,n,r){if(!(n in a)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";a[n]=Function("F,a","return new F("+e.join(",")+")")}return a[n](t,r)}(r,t.length,t):c(r,t,n)};return u(r.prototype)&&(i.prototype=r.prototype),i}},function(t,n,r){"use strict";var u=r(11).f,c=r(72),f=r(76),a=r(47),s=r(70),l=r(71),e=r(147),i=r(178),o=r(77),h=r(10),v=r(69).fastKey,p=r(80),d=h?"_s":"size",y=function(t,n){var r,e=v(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,o,r,e){var i=t(function(t,n){s(t,i,o,"_i"),t._t=o,t._i=c(null),t._f=void 0,t._l=void 0,t[d]=0,null!=n&&l(n,r,t[e],t)});return f(i.prototype,{clear:function(){for(var t=p(this,o),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=p(this,o),r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){p(this,o);for(var n,r=a(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(p(this,o),t)}}),h&&u(i.prototype,"size",{get:function(){return p(this,o)[d]}}),i},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=v(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,r,n){e(t,r,function(t,n){this._t=p(t,r),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?i(0,"keys"==n?r.k:"values"==n?r.v:[r.k,r.v]):(t._t=void 0,i(1))},n?"entries":"values",!n,!0),o(r)}}},function(t,n,r){var e=r(81),i=r(167);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var u=r(76),c=r(69).getWeak,i=r(2),f=r(5),a=r(70),s=r(71),e=r(50),l=r(30),h=r(80),o=e(5),v=e(6),p=0,d=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return o(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var r=g(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(n){var t=v(this.a,function(t){return t[0]===n});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(t,r,e,i){var o=t(function(t,n){a(t,o,r,"_i"),t._t=r,t._i=p++,t._l=void 0,null!=n&&s(n,e,t[i],t)});return u(o.prototype,{delete:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!f(t))return!1;var n=c(t);return!0===n?d(h(this,r)).has(t):n&&l(n,this._i)}}),o},def:function(t,n,r){var e=c(i(n),!0);return!0===e?d(t).set(n,r):e[t._i]=r,t},ufstore:d}},function(t,n,r){"use strict";var p=r(123),d=r(5),y=r(8),g=r(47),b=r(7)("isConcatSpreadable");t.exports=function t(n,r,e,i,o,u,c,f){for(var a,s,l=o,h=0,v=!!c&&g(c,f,3);h<i;){if(h in e){if(a=v?v(e[h],h,r):e[h],s=!1,d(a)&&(s=void 0!==(s=a[b])?!!s:p(a)),s&&0<u)l=t(n,r,a,y(a.length),l,u-1)-1;else{if(9007199254740991<=l)throw TypeError();n[l]=a}l++}h++}return l}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(140)("div"),"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(5),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var o=r(2);t.exports=function(t,n,r,e){try{return e?n(o(r)[0],r[1]):n(r)}catch(n){var i=t.return;throw void 0!==i&&o(i.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var o=r(149),e=Math.pow,u=e(2,-52),c=e(2,-23),f=e(2,127)*(2-c),a=e(2,-126);t.exports=Math.fround||function(t){var n,r,e=Math.abs(t),i=o(t);return e<a?i*(e/a/c+1/u-1/u)*a*c:f<(r=(n=(1+c/u)*e)-(n-e))||r!=r?i*(1/0):i*r}},function(t,n){t.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n){t.exports=Math.scale||function(t,n,r,e,i){return 0===arguments.length||t!=t||n!=n||r!=r||e!=e||i!=i?NaN:t===1/0||t===-1/0?t:(t-n)*(i-e)/(r-n)+e}},function(t,n,r){"use strict";var h=r(10),v=r(74),p=r(127),d=r(117),y=r(17),g=r(116),i=Object.assign;t.exports=!i||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=i({},t)[r]||Object.keys(i({},n)).join("")!=e})?function(t,n){for(var r=y(t),e=arguments.length,i=1,o=p.f,u=d.f;i<e;)for(var c,f=g(arguments[i++]),a=o?v(f).concat(o(f)):v(f),s=a.length,l=0;l<s;)c=a[l++],h&&!u.call(f,c)||(r[c]=f[c]);return r}:i},function(t,n,r){var u=r(11),c=r(2),f=r(74);t.exports=r(10)?Object.defineProperties:function(t,n){c(t);for(var r,e=f(n),i=e.length,o=0;o<i;)u.f(t,r=e[o++],n[r]);return t}},function(t,n,r){var e=r(33),i=r(73).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return u.slice()}}(t):i(e(t))}},function(t,n,r){var u=r(30),c=r(33),f=r(120)(!1),a=r(154)("IE_PROTO");t.exports=function(t,n){var r,e=c(t),i=0,o=[];for(r in e)r!=a&&u(e,r)&&o.push(r);for(;n.length>i;)u(e,r=n[i++])&&(~f(o,r)||o.push(r));return o}},function(t,n,r){var f=r(10),a=r(74),s=r(33),l=r(117).f;t.exports=function(c){return function(t){for(var n,r=s(t),e=a(r),i=e.length,o=0,u=[];o<i;)n=e[o++],f&&!l.call(r,n)||u.push(c?[n,r[n]]:r[n]);return u}}},function(t,n,r){var e=r(73),i=r(127),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(84).trim;t.exports=1/e(r(157)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(84).trim,o=r(157),u=/^[-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,r){var e=r(2),i=r(5),o=r(151);t.exports=function(t,n){if(e(t),i(n)&&n.constructor===t)return n;var r=o.f(t);return(0,r.resolve)(n),r.promise}},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var s=r(8),l=r(156),h=r(51);t.exports=function(t,n,r,e){var i=String(h(t)),o=i.length,u=void 0===r?" ":String(r),c=s(n);if(c<=o||""==u)return i;var f=c-o,a=l.call(u,Math.ceil(f/u.length));return a.length>f&&(a=a.slice(0,f)),e?a+i:i+a}},function(t,n,r){var e=r(49),i=r(8);t.exports=function(t){if(void 0===t)return 0;var n=e(t),r=i(n);if(n!==r)throw RangeError("Wrong length!");return r}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(170),i=r(80);t.exports=r(121)("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(i(this,"Map"),t);return n&&n.v},set:function(t,n){return e.def(i(this,"Map"),0===t?0:t,n)}},e,!0)},function(t,n,r){"use strict";var e=r(152);r(1)({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e})},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(115)})},function(t,n,r){"use strict";var e=r(170),i=r(80);t.exports=r(121)("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"Set"),t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var o,e=r(3),i=r(50)(0),u=r(27),c=r(69),f=r(182),a=r(172),s=r(5),l=r(80),h=r(80),v=!e.ActiveXObject&&"ActiveXObject"in e,p="WeakMap",d=c.getWeak,y=Object.isExtensible,g=a.ufstore,b=function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},x={get:function(t){if(s(t)){var n=d(t);return!0===n?g(l(this,p)).get(t):n?n[this._i]:void 0}},set:function(t,n){return a.def(l(this,p),t,n)}},m=t.exports=r(121)(p,b,x,a,!0,!0);h&&v&&(f((o=a.getConstructor(b,p)).prototype,x),c.NEED=!0,i(["delete","has","get","set"],function(e){var t=m.prototype,i=t[e];u(t,e,function(t,n){if(!s(t)||y(t))return i.call(this,t,n);this._f||(this._f=new o);var r=this._f[e](t,n);return"set"==e?this:r})}))},,,,function(t,n){"use strict";t.exports={init:function(){var t=document.querySelector("#page-nav");t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new&&document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")}),yiliaConfig&&yiliaConfig.toc_hide_index&&document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n,r,e,i){var o=function(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}(t),u=function(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}(t)-n;if(u-r<=i){var c=t.$newDom;c||(c=t.cloneNode(!0),(0,a.default)(t,c),(t.$newDom=c).style.position="fixed",c.style.top=(r||u)+"px",c.style.left=o+"px",c.style.zIndex=e||2,c.style.width="100%",c.style.color="#fff"),c.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var f=t.$newDom;f&&(f.style.visibility="hidden")}}function o(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");i(t,document.body.scrollTop,-63,2,0),i(n,document.body.scrollTop,1,3,0)}var f=e(r(163)),a=e((e(r(164)),r(414))),u=e(r(134)),c=e(r(204)),s=r(135);u.default.versions.mobile&&window.screen.width<800&&(function(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var i=t[r];o=n,u=i.getAttribute("href"),c=/\/|index.html/g,o.replace(c,"")===u.replace(c,"")&&(0,f.default)(i,"active")}var o,u,c}(),document.querySelector("#container").addEventListener("scroll",function(t){o()}),window.addEventListener("scroll",function(t){o()}),o()),(0,s.addLoadEvent)(function(){c.default.init()}),t.exports={}},,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object.defineProperty(t,n,{writable:!0,configurable:!0,value:r})}if(r(413),r(209),r(211),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},function(L,t){(function(t){!function(t){"use strict";function o(t,n,r,e){var o,u,c,f,i=n&&n.prototype instanceof h?n:h,a=Object.create(i.prototype),s=new p(e||[]);return a._invoke=(o=t,u=r,c=s,f=_,function(t,n){if(f===E)throw new Error("Generator is already running");if(f===M){if("throw"===t)throw n;return d()}for(c.method=t,c.arg=n;;){var r=c.delegate;if(r){var e=v(r,c);if(e){if(e===P)continue;return e}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(f===_)throw f=M,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);f=E;var i=l(o,u,c);if("normal"===i.type){if(f=c.done?M:O,i.arg===P)continue;return{value:i.arg,done:c.done}}"throw"===i.type&&(f=M,c.method="throw",c.arg=i.arg)}}),a}function l(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function h(){}function r(){}function n(){}function e(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function u(c){function f(t,n,r,e){var i=l(c[t],c,n);if("throw"!==i.type){var o=i.arg,u=o.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(t){f("next",t,r,e)},function(t){f("throw",t,r,e)}):Promise.resolve(u).then(function(t){o.value=t,r(o)},e)}e(i.arg)}var n;"object"==typeof t.process&&t.process.domain&&(f=t.process.domain.bind(f)),this._invoke=function(r,e){function t(){return new Promise(function(t,n){f(r,e,t,n)})}return n=n?n.then(t,t):t()}}function v(t,n){var r=t.iterator[n.method];if(r===a){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=a,v(t,n),"throw"===n.method))return P;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var e=l(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,P;var i=e.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=a),n.delegate=null,P):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,P)}function i(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function c(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(i,this),this.reset(!0)}function f(n){if(n){var t=n[b];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,e=function t(){for(;++r<n.length;)if(y.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=a,t.done=!0,t};return e.next=e}}return{next:d}}function d(){return{value:a,done:!0}}var a,s=Object.prototype,y=s.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},b=g.iterator||"@@iterator",x=g.asyncIterator||"@@asyncIterator",m=g.toStringTag||"@@toStringTag",S="object"==typeof L,w=t.regeneratorRuntime;if(w)S&&(L.exports=w);else{(w=t.regeneratorRuntime=S?L.exports:{}).wrap=o;var _="suspendedStart",O="suspendedYield",E="executing",M="completed",P={},j={};j[b]=function(){return this};var F=Object.getPrototypeOf,A=F&&F(F(f([])));A&&A!==s&&y.call(A,b)&&(j=A);var I=n.prototype=h.prototype=Object.create(j);r.prototype=I.constructor=n,n.constructor=r,n[m]=r.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===r||"GeneratorFunction"===(n.displayName||n.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,n):(t.__proto__=n,m in t||(t[m]="GeneratorFunction")),t.prototype=Object.create(I),t},w.awrap=function(t){return{__await:t}},e(u.prototype),u.prototype[x]=function(){return this},w.AsyncIterator=u,w.async=function(t,n,r,e){var i=new u(o(t,n,r,e));return w.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},e(I),I[m]="Generator",I[b]=function(){return this},I.toString=function(){return"[object Generator]"},w.keys=function(r){var e=[];for(var t in r)e.push(t);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},w.values=f,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(c),!t)for(var n in this)"t"===n.charAt(0)&&y.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){function t(t,n){return o.type="throw",o.arg=r,e.next=t,n&&(e.method="next",e.arg=a),!!n}if(this.done)throw r;for(var e=this,n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var u=y.call(i,"catchLoc"),c=y.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;0<=r;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&y.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),P},finish:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),c(r),P}},catch:function(t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;c(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:f(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=a),P}}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}())},,function(t,n,r){r(221),t.exports=r(46).RegExp.escape},,,,function(t,n,r){var e=r(5),i=r(123),o=r(7)("species");t.exports=function(t){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&(null===(n=n[o])&&(n=void 0))),void 0===n?Array:n}},function(t,n,r){"use strict";var e=r(4),i=Date.prototype.getTime,o=Date.prototype.toISOString,u=function(t){return 9<t?t:"0"+t};t.exports=e(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!e(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":9999<n?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(99<r?r:"0"+u(r))+"Z"}:o},function(t,n,r){"use strict";var e=r(2),i=r(53);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),"number"!=t)}},function(t,n,r){var c=r(74),f=r(127),a=r(117);t.exports=function(t){var n=c(t),r=f.f;if(r)for(var e,i=r(t),o=a.f,u=0;i.length>u;)o.call(t,e=i[u++])&&n.push(e);return n}},function(t,n,r){t.exports=r(118)("native-function-to-string",Function.toString)},function(t,n){t.exports=function(n,r){var e=r===Object(r)?function(t){return r[t]}:r;return function(t){return String(t).replace(n,e)}}},function(t,n,r){var e=r(1),i=r(220)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(166)}),r(67)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(50)(4);e(e.P+e.F*!r(48)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(137)}),r(67)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(50)(2);e(e.P+e.F*!r(48)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)(o)},function(t,n,r){"use strict";var e=r(1),i=r(50)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)(o)},function(t,n,r){"use strict";var e=r(1),i=r(50)(0),o=r(48)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var h=r(47),e=r(1),v=r(17),p=r(177),d=r(145),y=r(8),g=r(139),b=r(161);e(e.S+e.F*!r(125)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,e,i,o=v(t),u="function"==typeof this?this:Array,c=arguments.length,f=1<c?arguments[1]:void 0,a=void 0!==f,s=0,l=b(o);if(a&&(f=h(f,2<c?arguments[2]:void 0,2)),null==l||u==Array&&d(l))for(r=new u(n=y(o.length));s<n;s++)g(r,s,a?f(o[s],s):o[s]);else for(i=l.call(o),r=new u;!(e=i.next()).done;s++)g(r,s,a?p(i,f,[e.value,s],!0):e.value);return r.length=s,r}})},function(t,n,r){"use strict";var e=r(1),i=r(120)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(48)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(123)})},function(t,n,r){"use strict";var e=r(1),i=r(33),o=[].join;e(e.P+e.F*(r(116)!=Object||!r(48)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(33),o=r(49),u=r(8),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(48)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(1<arguments.length&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);0<=e;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(1);e(e.P+e.F*!r(48)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(139);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);t<n;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(168);e(e.P+e.F*!r(48)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(168);e(e.P+e.F*!r(48)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(143),a=r(45),s=r(78),l=r(8),h=[].slice;e(e.P+e.F*r(4)(function(){i&&h.call(i)}),"Array",{slice:function(t,n){var r=l(this.length),e=a(this);if(n=void 0===n?r:n,"Array"==e)return h.call(this,t,n);for(var i=s(t,r),o=s(n,r),u=l(o-i),c=new Array(u),f=0;f<u;f++)c[f]="String"==e?this.charAt(i+f):this[i+f];return c}})},function(t,n,r){"use strict";var e=r(1),i=r(50)(3);e(e.P+e.F*!r(48)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(21),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(48)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(77)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){var e=r(1),i=r(216);e(e.P+e.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(26)(i,e,r(217))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(27)(e,o,function(){var t=c.call(this);return t==t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(169)})},function(t,n,r){"use strict";var e=r(5),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(10)&&e(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(180),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){var e=r(1),i=Math.asinh;e(e.S+e.F*!(i&&0<1/i(0)),"Math",{asinh:function t(n){return isFinite(n=+n)&&0!=n?n<0?-t(-n):Math.log(n+Math.sqrt(n*n+1)):n}})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(149);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(148);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1);e(e.S,"Math",{fround:r(179)})},function(t,n,r){var e=r(1),f=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,i=0,o=0,u=arguments.length,c=0;o<u;)c<(r=f(arguments[o++]))?(i=i*(e=c/r)*e+1,c=r):0<r?i+=(e=r/c)*e:i+=r;return c===1/0?1/0:c*Math.sqrt(i)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(180)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(149)})},function(t,n,r){var e=r(1),i=r(148),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(148),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(30),o=r(45),u=r(144),s=r(53),c=r(4),f=r(73).f,a=r(31).f,l=r(11).f,h=r(84).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(72)(y))==v,b="trim"in String.prototype,x=function(t){var n=s(t,!1);if("string"==typeof n&&2<n.length){var r,e,i,o=(n=b?n.trim():h(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,c=n.slice(2),f=0,a=c.length;f<a;f++)if((u=c.charCodeAt(f))<48||i<u)return NaN;return parseInt(c,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?c(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(x(n)),r,p):x(n)};for(var m,S=r(10)?f(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;S.length>w;w++)i(d,m=S[w])&&!i(p,m)&&l(p,m,a(d,m));(p.prototype=y).constructor=p,r(27)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(176)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(176),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(188);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(189);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),a=r(49),s=r(165),l=r(156),i=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",v=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*u[r],u[r]=e%1e7,e=o(e/1e7)},p=function(t){for(var n=6,r=0;0<=--n;)r+=u[n],u[n]=o(r/t),r=r%t*1e7},d=function(){for(var t=6,n="";0<=--t;)if(""!==n||0===t||0!==u[t]){var r=String(u[t]);n=""===n?r:n+l.call("0",7-r.length)+r}return n},y=function(t,n,r){return 0===n?r:n%2==1?y(t,n-1,r*t):y(t*t,n/2,r)};e(e.P+e.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){i.call({})})),"Number",{toFixed:function(t){var n,r,e,i,o=s(this,h),u=a(t),c="",f="0";if(u<0||20<u)throw RangeError(h);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(c="-",o=-o),1e-21<o)if(r=(n=function(t){for(var n=0,r=t;4096<=r;)n+=12,r/=4096;for(;2<=r;)n+=1,r/=2;return n}(o*y(2,69,1))-69)<0?o*y(2,-n,1):o/y(2,n,1),r*=4503599627370496,0<(n=52-n)){for(v(0,r),e=u;7<=e;)v(1e7,0),e-=7;for(v(y(10,e,1),0),e=n-1;23<=e;)p(1<<23),e-=23;p(1<<e),v(1,1),p(2),f=d()}else v(0,r),v(1<<-n,0),f=d()+l.call("0",u);return f=0<u?c+((i=f.length)<=u?"0."+l.call("0",u-i)+f:f.slice(0,i-u)+"."+f.slice(i-u)):c+f}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(165),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(182)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(72)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(183)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("freeze",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(33),i=r(31).f;r(52)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(52)("getOwnPropertyNames",function(){return r(184).f})},function(t,n,r){var e=r(17),i=r(32);r(52)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5);r(52)("isExtensible",function(n){return function(t){return!!e(t)&&(!n||n(t))}})},function(t,n,r){var e=r(5);r(52)("isFrozen",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(5);r(52)("isSealed",function(n){return function(t){return!e(t)||!!n&&n(t)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(192)})},function(t,n,r){var e=r(17),i=r(74);r(52)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("preventExtensions",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(5),i=r(69).onFreeze;r(52)("seal",function(n){return function(t){return n&&e(t)?n(i(t)):t}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(153).set})},function(t,n,r){"use strict";var e=r(81),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(27)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(188);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(189);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u,c=r(68),f=r(3),a=r(47),s=r(81),l=r(1),h=r(5),v=r(21),p=r(70),d=r(71),y=r(119),g=r(158).set,b=r(150)(),x=r(151),m=r(190),S=r(133),w=r(191),_="Promise",O=f.TypeError,E=f.process,M=E&&E.versions,P=M&&M.v8||"",j=f[_],F="process"==s(E),A=function(){},I=i=x.f,L=!!function(){try{var t=j.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(A,A)};return(F||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof n&&0!==P.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(t){}}(),N=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},T=function(s,r){if(!s._n){s._n=!0;var e=s._c;b(function(){for(var f=s._v,a=1==s._s,t=0,n=function(t){var n,r,e,i=a?t.ok:t.fail,o=t.resolve,u=t.reject,c=t.domain;try{i?(a||(2==s._h&&C(s),s._h=1),!0===i?n=f:(c&&c.enter(),n=i(f),c&&(c.exit(),e=!0)),n===t.promise?u(O("Promise-chain cycle")):(r=N(n))?r.call(n,o,u):o(n)):u(f)}catch(t){c&&!e&&c.exit(),u(t)}};e.length>t;)n(e[t++]);s._c=[],s._n=!1,r&&!s._h&&k(s)})}},k=function(o){g.call(f,function(){var t,n,r,e=o._v,i=R(o);if(i&&(t=m(function(){F?E.emit("unhandledRejection",e,o):(n=f.onunhandledrejection)?n({promise:o,reason:e}):(r=f.console)&&r.error&&r.error("Unhandled promise rejection",e)}),o._h=F||R(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},C=function(n){g.call(f,function(){var t;F?E.emit("rejectionHandled",n):(t=f.onrejectionhandled)&&t({promise:n,reason:n._v})})},D=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),T(n,!0))},G=function(t){var r,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw O("Promise can't be resolved itself");(r=N(t))?b(function(){var n={_w:e,_d:!1};try{r.call(t,a(G,n,1),a(D,n,1))}catch(t){D.call(n,t)}}):(e._v=t,e._s=1,T(e,!1))}catch(t){D.call({_w:e,_d:!1},t)}}};L||(j=function(t){p(this,j,_,"_h"),v(t),e.call(this);try{t(a(G,this,1),a(D,this,1))}catch(t){D.call(this,t)}},(e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(76)(j.prototype,{then:function(t,n){var r=I(y(this,j));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=F?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&T(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new e;this.promise=t,this.resolve=a(G,t,1),this.reject=a(D,t,1)},x.f=I=function(t){return t===j||t===u?new o(t):i(t)}),l(l.G+l.W+l.F*!L,{Promise:j}),r(83)(j,_),r(77)(_),u=r(46)[_],l(l.S+l.F*!L,_,{reject:function(t){var n=I(this);return(0,n.reject)(t),n.promise}}),l(l.S+l.F*(c||!L),_,{resolve:function(t){return w(c&&this===u?j:this,t)}}),l(l.S+l.F*!(L&&r(125)(function(t){j.all(t).catch(A)})),_,{all:function(t){var u=this,n=I(u),c=n.resolve,f=n.reject,r=m(function(){var e=[],i=0,o=1;d(t,!1,function(t){var n=i++,r=!1;e.push(void 0),o++,u.resolve(t).then(function(t){r||(r=!0,e[n]=t,--o||c(e))},f)}),--o||c(e)});return r.e&&f(r.v),n.promise},race:function(t){var n=this,r=I(n),e=r.reject,i=m(function(){d(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i.e&&e(i.v),r.promise}})},function(t,n,r){var e=r(1),o=r(21),u=r(2),c=(r(3).Reflect||{}).apply,f=Function.apply;e(e.S+e.F*!r(4)(function(){c(function(){})}),"Reflect",{apply:function(t,n,r){var e=o(t),i=u(r);return c?c(e,n,i):f.call(e,n,i)}})},function(t,n,r){var e=r(1),c=r(72),f=r(21),a=r(2),s=r(5),i=r(4),l=r(169),h=(r(3).Reflect||{}).construct,v=i(function(){function t(){}return!(h(function(){},[],t)instanceof t)}),p=!i(function(){h(function(){})});e(e.S+e.F*(v||p),"Reflect",{construct:function(t,n){f(t),a(n);var r=arguments.length<3?t:f(arguments[2]);if(p&&!v)return h(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(l.apply(t,e))}var i=r.prototype,o=c(s(i)?i:Object.prototype),u=Function.apply.call(t,o,n);return s(u)?u:o}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(53);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(146)(o,"Object",function(){var t,n=this._k;do{if(this._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[this._i++])in this._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){var u=r(31),c=r(32),f=r(30),e=r(1),a=r(5),s=r(2);e(e.S,"Reflect",{get:function t(n,r){var e,i,o=arguments.length<3?n:arguments[2];return s(n)===o?n[r]:(e=u.f(n,r))?f(e,"value")?e.value:void 0!==e.get?e.get.call(o):void 0:a(i=c(n))?t(i,r,o):void 0}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(187)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(153);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){var f=r(11),a=r(31),s=r(32),l=r(30),e=r(1),h=r(75),v=r(2),p=r(5);e(e.S,"Reflect",{set:function t(n,r,e){var i,o,u=arguments.length<4?n:arguments[3],c=a.f(v(n),r);if(!c){if(p(o=s(n)))return t(o,r,e,u);c=h(0)}if(l(c,"value")){if(!1===c.writable||!p(u))return!1;if(i=a.f(u,r)){if(i.get||i.set||!1===i.writable)return!1;i.value=e,f.f(u,r,i)}else f.f(u,r,h(0,e));return!0}return void 0!==c.set&&(c.set.call(u,e),!0)}})},function(t,n,r){var e=r(3),o=r(144),i=r(11).f,u=r(73).f,c=r(124),f=r(115),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),i=void 0===n;return!r&&e&&t.constructor===a&&i?t:o(p?new s(e&&!i?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&i?f.call(t):n),r?this:l,a)};for(var d=function(n){n in a||i(a,n,{configurable:!0,get:function(){return s[n]},set:function(t){s[n]=t}})},y=u(s),g=0;y.length>g;)d(y[g++]);(l.constructor=a).prototype=l,r(27)(e,"RegExp",a)}r(77)("RegExp")},function(t,n,r){"use strict";var l=r(2),h=r(8),v=r(136),p=r(128);r(122)("match",1,function(e,i,a,s){return[function(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=s(a,t,this);if(n.done)return n.value;var r=l(t),e=String(this);if(!r.global)return p(r,e);for(var i,o=r.unicode,u=[],c=r.lastIndex=0;null!==(i=p(r,e));){var f=String(i[0]);""===(u[c]=f)&&(r.lastIndex=v(e,h(r.lastIndex),o)),c++}return 0===c?null:u}]})},function(t,n,r){"use strict";var O=r(2),e=r(17),E=r(8),M=r(49),P=r(136),j=r(128),F=Math.max,A=Math.min,h=Math.floor,v=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;r(122)("replace",2,function(i,o,S,w){function _(o,u,c,f,a,t){var s=c+o.length,l=f.length,n=p;return void 0!==a&&(a=e(a),n=v),S.call(t,n,function(t,n){var r;switch(n.charAt(0)){case"$":return"$";case"&":return o;case"`":return u.slice(0,c);case"'":return u.slice(s);case"<":r=a[n.slice(1,-1)];break;default:var e=+n;if(0===e)return t;if(l<e){var i=h(e/10);return 0===i?t:i<=l?void 0===f[i-1]?n.charAt(1):f[i-1]+n.charAt(1):t}r=f[e-1]}return void 0===r?"":r})}return[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):S.call(String(r),t,n)},function(t,n){var r=w(S,t,this,n);if(r.done)return r.value;var e=O(t),i=String(this),o="function"==typeof n;o||(n=String(n));var u,c=e.global;if(c){var f=e.unicode;e.lastIndex=0}for(var a=[];;){var s=j(e,i);if(null===s)break;if(a.push(s),!c)break;""===String(s[0])&&(e.lastIndex=P(i,E(e.lastIndex),f))}for(var l="",h=0,v=0;v<a.length;v++){s=a[v];for(var p=String(s[0]),d=F(A(M(s.index),i.length),0),y=[],g=1;g<s.length;g++)y.push(void 0===(u=s[g])?u:String(u));var b=s.groups;if(o){var x=[p].concat(y,d,i);void 0!==b&&x.push(b);var m=String(n.apply(void 0,x))}else m=_(p,i,d,y,b,n);h<=d&&(l+=i.slice(h,d)+m,h=d+p.length)}return l+i.slice(h)}]})},function(t,n,r){"use strict";var f=r(2),a=r(192),s=r(128);r(122)("search",1,function(e,i,u,c){return[function(t){var n=e(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n):new RegExp(t)[i](String(n))},function(t){var n=c(u,t,this);if(n.done)return n.value;var r=f(t),e=String(this),i=r.lastIndex;a(i,0)||(r.lastIndex=0);var o=s(r,e);return a(r.lastIndex,i)||(r.lastIndex=i),null===o?-1:o.index}]})},function(t,n,r){"use strict";var l=r(124),x=r(2),m=r(119),S=r(136),w=r(8),_=r(128),h=r(152),e=r(4),O=Math.min,v=[].push,u="split",p="length",d="lastIndex",E=4294967295,M=!e(function(){RegExp(E,"y")});r(122)("split",2,function(i,o,y,g){var b;return b="c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[p]||2!="ab"[u](/(?:ab)*/)[p]||4!="."[u](/(.?)(.?)/)[p]||1<"."[u](/()()/)[p]||""[u](/.?/)[p]?function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!l(t))return y.call(r,t,n);for(var e,i,o,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,a=void 0===n?E:n>>>0,s=new RegExp(t.source,c+"g");(e=h.call(s,r))&&!(f<(i=s[d])&&(u.push(r.slice(f,e.index)),1<e[p]&&e.index<r[p]&&v.apply(u,e.slice(1)),o=e[0][p],f=i,u[p]>=a));)s[d]===e.index&&s[d]++;return f===r[p]?!o&&s.test("")||u.push(""):u.push(r.slice(f)),u[p]>a?u.slice(0,a):u}:"0"[u](void 0,0)[p]?function(t,n){return void 0===t&&0===n?[]:y.call(this,t,n)}:y,[function(t,n){var r=i(this),e=null==t?void 0:t[o];return void 0!==e?e.call(t,r,n):b.call(String(r),t,n)},function(t,n){var r=g(b,t,this,n,b!==y);if(r.done)return r.value;var e=x(t),i=String(this),o=m(e,RegExp),u=e.unicode,c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(M?"y":"g"),f=new o(M?e:"^(?:"+e.source+")",c),a=void 0===n?E:n>>>0;if(0===a)return[];if(0===i.length)return null===_(f,i)?[i]:[];for(var s=0,l=0,h=[];l<i.length;){f.lastIndex=M?l:0;var v,p=_(f,M?i:i.slice(l));if(null===p||(v=O(w(f.lastIndex+(M?0:l)),i.length))===s)l=S(i,l,u);else{if(h.push(i.slice(s,l)),h.length===a)return h;for(var d=1;d<=p.length-1;d++)if(h.push(p[d]),h.length===a)return h;l=s=v}}return h.push(i.slice(s)),h}]})},function(t,n,r){"use strict";r(198);var e=r(2),i=r(115),o=r(10),u="toString",c=/./[u],f=function(t){r(27)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(28)("anchor",function(n){return function(t){return n(this,"a","name",t)}})},function(t,n,r){"use strict";r(28)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(28)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(28)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(131)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),u=r(8),c=r(155),f="endsWith",a=""[f];e(e.P+e.F*r(142)(f),"String",{endsWith:function(t){var n=c(this,t,f),r=1<arguments.length?arguments[1]:void 0,e=u(n.length),i=void 0===r?e:Math.min(u(r),e),o=String(t);return a?a.call(n,o,i):n.slice(i-o.length,i)===o}})},function(t,n,r){"use strict";r(28)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(28)("fontcolor",function(n){return function(t){return n(this,"font","color",t)}})},function(t,n,r){"use strict";r(28)("fontsize",function(n){return function(t){return n(this,"font","size",t)}})},function(t,n,r){var e=r(1),o=r(78),u=String.fromCharCode,i=String.fromCodePoint;e(e.S+e.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,i=0;i<e;){if(n=+arguments[i++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?u(n):u(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(155);e(e.P+e.F*r(142)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,1<arguments.length?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(28)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(131)(!0);r(147)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(28)("link",function(n){return function(t){return n(this,"a","href",t)}})},function(t,n,r){var e=r(1),u=r(33),c=r(8);e(e.S,"String",{raw:function(t){for(var n=u(t.raw),r=c(n.length),e=arguments.length,i=[],o=0;o<r;)i.push(String(n[o++])),o<e&&i.push(String(arguments[o]));return i.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(156)})},function(t,n,r){"use strict";r(28)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(8),o=r(155),u="startsWith",c=""[u];e(e.P+e.F*r(142)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(1<arguments.length?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(28)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(28)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(28)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(84)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),u=r(30),i=r(10),o=r(1),c=r(27),f=r(69).KEY,a=r(4),s=r(118),l=r(83),h=r(79),v=r(7),p=r(195),d=r(160),y=r(218),g=r(123),b=r(2),x=r(5),m=r(17),S=r(33),w=r(53),_=r(75),O=r(72),E=r(184),M=r(31),P=r(127),j=r(11),F=r(74),A=M.f,I=j.f,L=E.f,N=e.Symbol,T=e.JSON,k=T&&T.stringify,R="prototype",C=v("_hidden"),D=v("toPrimitive"),G={}.propertyIsEnumerable,W=s("symbol-registry"),U=s("symbols"),V=s("op-symbols"),B=Object[R],q="function"==typeof N&&!!P.f,z=e.QObject,K=!z||!z[R]||!z[R].findChild,H=i&&a(function(){return 7!=O(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=A(B,n);e&&delete B[n],I(t,n,r),e&&t!==B&&I(B,n,e)}:I,J=function(t){var n=U[t]=O(N[R]);return n._k=t,n},$=q&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===B&&Y(V,n,r),b(t),n=w(n,!0),b(r),u(U,n)?(r.enumerable?(u(t,C)&&t[C][n]&&(t[C][n]=!1),r=O(r,{enumerable:_(0,!1)})):(u(t,C)||I(t,C,_(1,{})),t[C][n]=!0),H(t,n,r)):I(t,n,r)},X=function(t,n){b(t);for(var r,e=y(n=S(n)),i=0,o=e.length;i<o;)Y(t,r=e[i++],n[r]);return t},Q=function(t){var n=G.call(this,t=w(t,!0));return!(this===B&&u(U,t)&&!u(V,t))&&(!(n||!u(this,t)||!u(U,t)||u(this,C)&&this[C][t])||n)},Z=function(t,n){if(t=S(t),n=w(n,!0),t!==B||!u(U,n)||u(V,n)){var r=A(t,n);return!r||!u(U,n)||u(t,C)&&t[C][n]||(r.enumerable=!0),r}},tt=function(t){for(var n,r=L(S(t)),e=[],i=0;r.length>i;)u(U,n=r[i++])||n==C||n==f||e.push(n);return e},nt=function(t){for(var n,r=t===B,e=L(r?V:S(t)),i=[],o=0;e.length>o;)!u(U,n=e[o++])||r&&!u(B,n)||i.push(U[n]);return i};q||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var n=h(0<arguments.length?arguments[0]:void 0),r=function(t){this===B&&r.call(V,t),u(this,C)&&u(this[C],n)&&(this[C][n]=!1),H(this,n,_(1,t))};return i&&K&&H(B,n,{configurable:!0,set:r}),J(n)})[R],"toString",function(){return this._k}),M.f=Z,j.f=Y,r(73).f=E.f=tt,r(117).f=Q,P.f=nt,i&&!r(68)&&c(B,"propertyIsEnumerable",Q,!0),p.f=function(t){return J(v(t))}),o(o.G+o.W+o.F*!q,{Symbol:N});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;rt.length>et;)v(rt[et++]);for(var it=F(v.store),ot=0;it.length>ot;)d(it[ot++]);o(o.S+o.F*!q,"Symbol",{for:function(t){return u(W,t+="")?W[t]:W[t]=N(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var n in W)if(W[n]===t)return n},useSetter:function(){K=!0},useSimple:function(){K=!1}}),o(o.S+o.F*!q,"Object",{create:function(t,n){return void 0===n?O(t):X(O(t),n)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Z,getOwnPropertyNames:tt,getOwnPropertySymbols:nt});var ut=a(function(){P.f(1)});o(o.S+o.F*ut,"Object",{getOwnPropertySymbols:function(t){return P.f(m(t))}}),T&&o(o.S+o.F*(!q||a(function(){var t=N();return"[null]"!=k([t])||"{}"!=k({a:t})||"{}"!=k(Object(t))})),"JSON",{stringify:function(t){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);if(r=n=e[1],(x(n)||void 0!==t)&&!$(t))return g(n)||(n=function(t,n){if("function"==typeof r&&(n=r.call(this,t,n)),!$(n))return n}),e[1]=n,k.apply(T,e)}}),N[R][D]||r(26)(N[R],D,N[R].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(132),o=r(159),a=r(2),s=r(78),l=r(8),u=r(5),c=r(3).ArrayBuffer,h=r(119),v=o.ArrayBuffer,p=o.DataView,f=i.ABV&&c.isView,d=v.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(c!==v),{ArrayBuffer:v}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return f&&f(t)||u(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new v(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(a(this),t);for(var r=a(this).byteLength,e=s(t,r),i=s(void 0===n?r:n,r),o=new(h(this,v))(l(i-e)),u=new p(this),c=new p(o),f=0;e<i;)c.setUint8(f++,u.getUint8(e++));return o}}),r(77)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(132).ABV,{DataView:r(159).DataView})},function(t,n,r){r(57)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(t,n,r){r(57)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(t,n,r){"use strict";var e=r(172),i=r(80);r(121)("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return e.def(i(this,"WeakSet"),t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(173),o=r(17),u=r(8),c=r(21),f=r(138);e(e.P,"Array",{flatMap:function(t){var n,r,e=o(this);return c(t),n=u(e.length),r=f(e,0),i(r,e,e,n,0,1,t,arguments[1]),r}}),r(67)("flatMap")},function(t,n,r){"use strict";var e=r(1),i=r(173),o=r(17),u=r(8),c=r(49),f=r(138);e(e.P,"Array",{flatten:function(){var t=arguments[0],n=o(this),r=u(n.length),e=f(n,0);return i(e,n,n,r,0,void 0===t?1:c(t)),e}}),r(67)("flatten")},function(t,n,r){"use strict";var e=r(1),i=r(120)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),r(67)("includes")},function(t,n,r){var e=r(1),i=r(150)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.G,{global:r(3)})},function(t,n,r){r(129)("Map")},function(t,n,r){r(130)("Map")},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(171)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{clamp:function(t,n,r){return Math.min(r,Math.max(n,t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,n,r){var e=r(1),i=180/Math.PI;e(e.S,"Math",{degrees:function(t){return t*i}})},function(t,n,r){var e=r(1),o=r(181),u=r(179);e(e.S,"Math",{fscale:function(t,n,r,e,i){return u(o(t,n,r,e,i))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)+(e>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>16,c=e>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>16)+((i*c>>>0)+(65535&f)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=r>>>0;return(n>>>0)-(e>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,n,r){var e=r(1),i=Math.PI/180;e(e.S,"Math",{radians:function(t){return t*i}})},function(t,n,r){var e=r(1);e(e.S,"Math",{scale:r(181)})},function(t,n,r){var e=r(1);e(e.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=+t,e=+n,i=65535&r,o=65535&e,u=r>>>16,c=e>>>16,f=(u*o>>>0)+(i*o>>>16);return u*c+(f>>>16)+((i*c>>>0)+(65535&f)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(21),u=r(11);r(10)&&e(e.P+r(126),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(21),u=r(11);r(10)&&e(e.P+r(126),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(186)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),f=r(187),a=r(33),s=r(31),l=r(139);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r,e=a(t),i=s.f,o=f(e),u={},c=0;o.length>c;)void 0!==(r=i(e,n=o[c++]))&&l(u,n,r);return u}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53),u=r(32),c=r(31).f;r(10)&&e(e.P+r(126),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(53),u=r(32),c=r(31).f;r(10)&&e(e.P+r(126),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(186)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),o=r(3),u=r(46),i=r(150)(),c=r(7)("observable"),f=r(21),a=r(2),s=r(70),l=r(76),h=r(26),v=r(71),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},x=function(t,n){a(t),this._c=void 0,this._o=t,t=new m(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};x.prototype=l({},{unsubscribe:function(){b(this)}});var m=function(t){this._s=t};m.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var S=function(t){s(this,S,"Observable","_f")._f=f(t)};l(S.prototype,{subscribe:function(t){return new x(t,this._f)},forEach:function(e){var i=this;return new(u.Promise||o.Promise)(function(t,n){f(e);var r=i.subscribe({next:function(t){try{return e(t)}catch(t){n(t),r.unsubscribe()}},error:n,complete:t})})}}),l(S,{from:function(t){var n="function"==typeof this?this:S,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return i(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,e=new Array(n);t<n;)e[t]=arguments[t++];return new("function"==typeof this?this:S)(function(n){var r=!1;return i(function(){if(!r){for(var t=0;t<e.length;++t)if(n.next(e[t]),r)return;n.complete()}}),function(){r=!0}})}}),h(S.prototype,c,function(){return this}),e(e.G,{Observable:S}),r(77)("Observable")},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(3),u=r(119),c=r(191);e(e.P+e.R,"Promise",{finally:function(n){var r=u(this,i.Promise||o.Promise),t="function"==typeof n;return this.then(t?function(t){return c(r,n()).then(function(){return t})}:n,t?function(t){return c(r,n()).then(function(){throw t})}:n)}})},function(t,n,r){"use strict";var e=r(1),i=r(151),o=r(190);e(e.S,"Promise",{try:function(t){var n=i.f(this),r=o(t);return(r.e?n.reject:n.resolve)(r.v),n.promise}})},function(t,n,r){var e=r(56),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(56),o=r(2),u=e.key,c=e.map,f=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:u(arguments[2]),e=c(o(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var i=f.get(n);return i.delete(r),!!i.size||f.delete(n)}})},function(t,n,r){var o=r(199),u=r(167),e=r(56),i=r(2),c=r(32),f=e.keys,a=e.key,s=function(t,n){var r=f(t,n),e=c(t);if(null===e)return r;var i=s(e,n);return i.length?r.length?u(new o(r.concat(i))):i:r};e.exp({getMetadataKeys:function(t){return s(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(56),i=r(2),o=r(21),u=e.key,c=e.set;e.exp({metadata:function(r,e){return function(t,n){c(r,e,(void 0!==n?i:o)(t),u(n))}}})},function(t,n,r){r(129)("Set")},function(t,n,r){r(130)("Set")},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(171)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(131)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(51),o=r(8),u=r(124),c=r(115),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(146)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(193),o=r(133),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padEnd:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(193),o=r(133),u=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);e(e.P+e.F*u,"String",{padStart:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(84)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(84)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(160)("asyncIterator")},function(t,n,r){r(160)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){r(129)("WeakMap")},function(t,n,r){r(130)("WeakMap")},function(t,n,r){r(129)("WeakSet")},function(t,n,r){r(130)("WeakSet")},function(t,n,r){for(var e=r(162),i=r(74),o=r(27),u=r(3),c=r(26),f=r(82),a=r(7),s=a("iterator"),l=a("toStringTag"),h=f.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var y,g=p[d],b=v[g],x=u[g],m=x&&x.prototype;if(m&&(m[s]||c(m,s,h),m[l]||c(m,l,g),f[g]=h,b))for(y in e)m[y]||o(m,y,e[y],!0)}},function(t,n,r){var e=r(1),i=r(158);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(133),u=[].slice,c=/MSIE .\./.test(o),f=function(i){return function(t,n){var r=2<arguments.length,e=!!r&&u.call(arguments,2);return i(r?function(){("function"==typeof t?t:Function(t)).apply(this,e)}:t,n)}};i(i.G+i.B+i.F*c,{setTimeout:f(e.setTimeout),setInterval:f(e.setInterval)})},function(t,n,r){r(341),r(280),r(282),r(281),r(284),r(286),r(291),r(285),r(283),r(293),r(292),r(288),r(289),r(287),r(279),r(290),r(294),r(295),r(247),r(249),r(248),r(297),r(296),r(267),r(277),r(278),r(268),r(269),r(270),r(271),r(272),r(273),r(274),r(275),r(276),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(328),r(333),r(340),r(331),r(323),r(324),r(329),r(334),r(336),r(319),r(320),r(321),r(322),r(325),r(326),r(327),r(330),r(332),r(335),r(337),r(338),r(339),r(242),r(244),r(243),r(246),r(245),r(231),r(229),r(235),r(232),r(238),r(240),r(228),r(234),r(225),r(239),r(223),r(237),r(236),r(230),r(233),r(222),r(224),r(227),r(226),r(241),r(162),r(313),r(197),r(318),r(198),r(314),r(315),r(316),r(317),r(298),r(196),r(199),r(200),r(353),r(342),r(343),r(348),r(351),r(352),r(346),r(349),r(347),r(350),r(344),r(345),r(299),r(300),r(301),r(302),r(303),r(306),r(304),r(305),r(307),r(308),r(309),r(310),r(312),r(311),r(356),r(354),r(355),r(397),r(400),r(399),r(401),r(402),r(398),r(403),r(404),r(378),r(381),r(377),r(375),r(376),r(379),r(380),r(362),r(396),r(361),r(395),r(407),r(409),r(360),r(394),r(406),r(408),r(359),r(405),r(358),r(363),r(364),r(365),r(366),r(367),r(369),r(368),r(370),r(371),r(372),r(374),r(373),r(383),r(384),r(385),r(386),r(388),r(387),r(390),r(389),r(391),r(392),r(393),r(357),r(382),r(412),r(411),r(410),t.exports=r(46)},function(t,n){t.exports=function(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}}])</script><script src="/./main.a5fda8.js"></script><script>!function(){var e,t;e="/slider.27463f.js",t=document.createElement("script"),document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}()</script>



<!--  -->

<script>
  /* 标签页标题切换 */
  var originTitle = document.title;
  var titleTime;
  document.addEventListener("visibilitychange", function () {
    if (document.hidden) {
      document.title = "二刺螈真恶心" + originTitle;
      clearTimeout(titleTime);
    } else {
      document.title = "二刺螈就是这样的 " + originTitle;
      titleTime = setTimeout(function () {
        document.title = originTitle;
      }, 2000);
    }
  });
</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia-plus根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="/" target="_blank" 
                class="search-title" title="基于">
                
                  <img src="/img/head.webp">
                
                冻鱼0x
              </a>
            </li>
          
            <li class="search-li">
              <a href="https://github.com/JoeyBling" target="_blank" 
                class="search-title" >
                
                  <i class="icon-link icon"></i>
                
                此博客主题GitHub
              </a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
        
          
  	  		<div class="aboutme-wrap" id="aboutme">关于我：<br>此博客只是用于个人用途，用来记录学习笔记和分享一些技术<br><br></div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>

  
  
<script type="text/javascript" src="/plugins/activate-power-mode/activate-power-mode.js"></script>
<script>
  POWERMODE.colorful = true; // make power mode colorful
  POWERMODE.shake = false; // turn off shake
  document.body.addEventListener('input', POWERMODE);
</script>

  
  <!-- <script async type="text/javascript" size="90" alpha="0.2" zIndex="0" src="/plugins/ribbon.js/ribbon.min.js"></script> -->
  
  
  
</body>

</html>
